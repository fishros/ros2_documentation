<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>The-ROS2-Project/Contributing/Build-Farms</title>
</head>
<body>
  <div class="section" id="ros-build-farms">
<span id="buildfarms"></span><h1>ROS构建农场 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1367">[1367]</a><a class="headerlink" href="#ros-build-farms" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1329">[]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#jobs-and-deployment" id="id8">作业和部署 [1372]</a></p></li>
<li><p><a class="reference internal" href="#frequency-asked-questions-faq-and-troubleshooting" id="id9">常见问题解答 (FAQ) 和故障排除 [1396]</a></p></li>
<li><p><a class="reference internal" href="#further-reading" id="id10">进一步阅读 [1406]</a></p></li>
</ul>
</div>
<p>ROS构建农场是支持ROS生态系统的重要基础设施，由 <a class="reference external" href="https://www.openrobotics.org/">Open Robotics</a> 提供和维护。它们为ROS 1和ROS 2软件包提供源代码和二进制软件包的构建、持续集成、测试和分析。开源软件包有两个托管实例： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1368">[1368]</a></p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://build.ros.org/">https://build.ros.org/</a> 用于ROS 1软件包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1369">[1369]</a></p></li>
<li><p><a class="reference external" href="https://build.ros2.org/">https://build.ros2.org/</a> 用于ROS 2软件包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1370">[1370]</a></p></li>
</ol>
<p>如果您打算使用提供的基础设施，请考虑注册`构建农场讨论论坛 &lt;<a class="reference external" href="http://discourse.ros.org/c/buildfarm">http://discourse.ros.org/c/buildfarm</a>&gt;`__ 以便接收通知，例如有关任何即将到来的更改的通知。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1371">[1371]</a></p>
<div class="section" id="jobs-and-deployment">
<h2>作业和部署 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1372">[1372]</a><a class="headerlink" href="#jobs-and-deployment" title="永久链接至标题"></a></h2>
<p>ROS构建农场执行几种不同的作业。对于每种作业类型，您将找到有关它们的详细说明以及它们的工作原理： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1373">[1373]</a></p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/release_jobs.rst">release jobs</a> 生成二进制软件包，例如 Debian 软件包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1374">[1374]</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/devel_jobs.rst">devel jobs</a> 在轮询基础上构建和测试 ROS 软件包的单个存储库 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1375">[1375]</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/devel_jobs.rst">pull_request jobs</a> 通过 Webhooks 触发在单个存储库中构建和测试 ROS 软件包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1376">[1376]</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/ci_jobs.rst">CI jobs</a> 跨存储库构建和测试 ROS 软件包，可选择使用其他 CI 作业的工件加快构建速度 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1377">[1377]</a></p></li>
<li><p>「<code class="xref any docutils literal notranslate"><span class="pre">doc</span> <span class="pre">jobs</span></code>」_ 生成软件包的 API 文档，并从清单中提取信息 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1378">[1378]</a></p></li>
<li><p>「<code class="xref any docutils literal notranslate"><span class="pre">miscellaneous</span> <span class="pre">jobs</span></code>」_ 执行维护任务，并生成信息数据以可视化构建平台的状态及其生成的构件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1379">[1379]</a></p></li>
</ul>
<div class="section" id="creation-and-deployment">
<h3>创建和部署 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1380">[1380]</a><a class="headerlink" href="#creation-and-deployment" title="永久链接至标题"></a></h3>
<p>上述工作是在软件包「开花」时创建和部署的，即发布到 ROS 1 或 ROS 2。一旦开花成功，并且软件包被纳入 ROS 发行版之一（通过对 <a class="reference external" href="https://github.com/ros/rosdistro">rosdistro</a> 提交拉取请求），相应的工作将会被创建。工作的名称编码了它们的类型和目的：<a class="footnote-reference brackets" href="#id5" id="id1">1</a> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1381">[1381]</a></p>
<ul>
<li><p>发布任务: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1382">[1382]</a></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{distro}src_{platf}__{package}__{platform}__source</span></code> 构建发布的源代码包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1383">[1383]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{distro}bin_{platf}__{package}__{platform}__binary</span></code> 构建发布的二进制包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1384">[1384]</a></p></li>
</ul>
<p>例如，ROS 2 Iron 上 rclcpp 的二进制打包任务（在 Ubuntu Jammy amd64 上运行）被命名为 <code class="docutils literal notranslate"><span class="pre">Ibin_uJ64__rclcpp__ubuntu_jammy_amd64__binary</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1385">[1385]</a></p>
</div></blockquote>
</li>
<li><p>开发任务: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1386">[1386]</a></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{distro}dev__{package}__{platform}</span></code> 在发布分支上执行 CI 构建 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1387">[1387]</a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>拉取请求任务: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1388">[1388]</a></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">{distro}pr__{package}__{platform}</span></code> 在拉取请求上执行 CI 构建 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1389">[1389]</a></p></li>
</ul>
<p>例如，对于在Ubuntu Jammy amd64上运行的ROS 2 Iron上的rclcpp的PR工作，其名称为``Ipr__rclcpp__ubuntu_jammy_amd64``。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1390">[1390]</a></p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="execution">
<h3>执行 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1391">[1391]</a><a class="headerlink" href="#execution" title="永久链接至标题"></a></h3>
<p>作业的执行取决于作业的类型： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1392">[1392]</a></p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/devel_jobs.rst">devel jobs</a> 将根据配置的频率，每次对相应分支进行提交时触发轮询。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1393">[1393]</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/devel_jobs.rst">pull_request jobs</a> 将由上游 <a class="footnote-reference brackets" href="#id6" id="id2">2</a> 仓库的相应拉取请求的 Webhook 触发 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1394">[1394]</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/release_jobs.rst">release jobs</a> 将在每次发布新软件包版本时触发，即每次此软件包的新 <a class="reference external" href="https://github.com/ros/rosdistro">rosdistro</a> 拉取请求被接受时。源码作业是由 rosdistro 分发文件中的版本更改触发的，而二进制作业是由其源码作业的对应部分触发的。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1395">[1395]</a></p></li>
</ul>
</div>
</div>
<div class="section" id="frequency-asked-questions-faq-and-troubleshooting">
<h2>常见问题解答 (FAQ) 和故障排除 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1396">[1396]</a><a class="headerlink" href="#frequency-asked-questions-faq-and-troubleshooting" title="永久链接至标题"></a></h2>
<ol class="arabic">
<li><p><strong>我收到来自构建工作失败的 Jenkins 邮件。我该怎么办？</strong> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1397">[1397]</a></p>
<p>转到引发问题的作业。您可以在Jenkins电子邮件的顶部找到链接。一旦您点击链接进入构建作业，点击左侧的*Console Output*，然后点击*Full Log*。这将给您提供失败构建的完整控制台输出。尝试找到最顶部的错误，因为通常它是最重要的，其他错误可能是后续错误。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1398">[1398]</a></p>
<p>电子邮件底部可能会显示``'apt-src build [...]' failed. This is usually because of an error building the package.``这通常暗示缺少依赖项，请参阅2。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1399">[1399]</a></p>
</li>
<li><p><strong>我似乎缺少一个依赖项，我该如何找出是哪个依赖项？</strong> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1400">[1400]</a></p>
<p>基本上有两种选择，a. 更简单，但可能需要多次迭代，b. 更详细，并且可以提供完整的了解以及本地调试。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1401">[1401]</a></p>
<ol class="loweralpha simple">
<li><p>检查引发问题的发布任务（参见 1.）并定位 cmake 依赖问题。为此，请浏览到 cmake 部分，例如，在 Ubuntu/Debian 构建任务中通过左侧菜单导航到“build binarydeb”部分。通常，<em>CMake Error</em> 会提示 cmake 配置所需的依赖项，在 <a class="reference external" href="http://wiki.ros.org/Manifest">package manifest</a> 中缺失。修复 manifest 中的依赖项后，重新发布软件包并等待构建服务器的反馈或... <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1402">[1402]</a></p></li>
<li><p>为了获得完整的了解和更快的本地调试，您可以在本地运行发布任务（<a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/release_jobs.rst#run-the-release-job-locally">run the release jobs locally</a>）。这样可以在本地迭代 manifest，直到所有依赖项都被修复。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1403">[1403]</a></p></li>
</ol>
</li>
<li><p><strong>为什么发布任务失败，而开发任务 / 我的 GitHub Actions / 我的本地构建成功？</strong> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1404">[1404]</a></p>
<p>这可能有几个潜在原因。首先，发布任务使用最小的 ROS 安装进行构建，以检查所有依赖项是否在 <a class="reference external" href="http://wiki.ros.org/Manifest">package manifest</a> 中正确声明。开发任务 / GitHub Actions / 本地构建可能在已安装了依赖项的环境中执行，因此不会注意到依赖关系问题。其次，它们可能构建不同版本的源代码。而开发任务 / GitHub Actions / 本地构建通常构建来自 <em>upstream</em> <a class="footnote-reference brackets" href="#id6" id="id3">2</a> 存储库的最新版本，<a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/jobs/release_jobs.rst">release jobs</a> 则构建最新发布的源代码，即在 <em>release</em> 存储库 <a class="footnote-reference brackets" href="#id7" id="id4">3</a> 的相应 <em>upstream</em> 分支中的源代码。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1405">[1405]</a></p>
</li>
</ol>
</div>
<div class="section" id="further-reading">
<h2>进一步阅读 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1406">[1406]</a><a class="headerlink" href="#further-reading" title="永久链接至标题"></a></h2>
<p>以下链接提供更多关于构建农场的细节和见解： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1407">[1407]</a></p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/index.rst">https://github.com/ros-infrastructure/ros_buildfarm/blob/master/doc/index.rst</a> - 构建农场基础设施和生成的构建作业的常规文档 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1408">[1408]</a></p></li>
<li><p><a class="reference external" href="http://wiki.ros.org/regression_tests#Setting_up_Your_Computer_for_Prerelease">http://wiki.ros.org/regression_tests#Setting_up_Your_Computer_for_Prerelease</a> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1409">[1409]</a></p></li>
<li><p><a class="reference external" href="http://wiki.ros.org/buildfarm">http://wiki.ros.org/buildfarm</a> - ROS 1构建农场的ROS维基页面（部分*过时*） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1410">[1410]</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros-infrastructure/cookbook-ros-buildfarm">https://github.com/ros-infrastructure/cookbook-ros-buildfarm</a> - 安装和配置ROS构建农场机器 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1411">[1411]</a></p></li>
</ul>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">{distro}</span></code> 是ROS发行版的首字母，<code class="docutils literal notranslate"><span class="pre">{platform}``（``{platf}</span></code>）表示软件包构建的平台（及其简短代码），<code class="docutils literal notranslate"><span class="pre">{package}</span></code> 是正在构建的ROS软件包的名称。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1412">[1412]</a></p>
</dd>
<dt class="label" id="id6"><span class="brackets">2</span><span class="fn-backref">(<a href="#id2">1</a>,<a href="#id3">2</a>)</span></dt>
<dd><p>“上游”存储库是包含相应ROS 1 / ROS 2软件包原始源代码的存储库。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1413">[1413]</a></p>
</dd>
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p>“<em>release</em>”仓库是ROS 2基础设施用于发布软件包的仓库，详情请参阅 <a class="reference external" href="https://github.com/ros2-gbp/">https://github.com/ros2-gbp/</a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1414">[1414]</a></p>
</dd>
</dl>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>