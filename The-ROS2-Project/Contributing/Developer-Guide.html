<!DOCTYPE html>
<html class="writer-html5" lang="zh" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ROS 2开发者指南 &mdash; ROS 2 Documentation: Humble  文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.ros.org/en/humble/The-ROS2-Project/Contributing/Developer-Guide.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="代码风格和语言版本" href="Code-Style-Language-Versions.html" />
    <link rel="prev" title="贡献" href="../Contributing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> ROS 2 Documentation: Humble
            <img src="../../_static/humble-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Installation.html">安装</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Ubuntu-Install-Debians.html">Ubuntu (Debian)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Windows-Install-Binary.html">Windows (binary)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/RHEL-Install-RPMs.html">RHEL (RPM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Alternatives.html">Alternatives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Development-Setup.html">Ubuntu (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Install-Binary.html">Ubuntu (binary)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Windows-Development-Setup.html">Windows (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Development-Setup.html">RHEL (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Install-Binary.html">RHEL (binary)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/macOS-Development-Setup.html">macOS (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Fedora-Development-Setup.html">Fedora (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Latest-Development-Setup.html">Latest development (source)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Maintaining-a-Source-Checkout.html">Maintain source checkout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Testing.html">Testing with pre-release binaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/DDS-Implementations.html">DDS implementations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Connext security plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-University-Eval.html">RTI Connext DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Eclipse Cyclone DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">GurumNetworks GurumDDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">eProsima Fast DDS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Releases.html">Distributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Iron-Irwini.html">Iron Irwini (<code class="docutils literal notranslate"><span class="pre">iron</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Iron-Irwini-Complete-Changelog.html">Iron Irwini Changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Humble-Hawksbill.html">Humble Hawksbill (<code class="docutils literal notranslate"><span class="pre">humble</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Humble-Hawksbill-Complete-Changelog.html">Humble Hawksbill changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Foxy-Fitzroy.html">Foxy Fitzroy (<code class="docutils literal notranslate"><span class="pre">foxy</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Rolling-Ridley.html">Rolling Ridley (<code class="docutils literal notranslate"><span class="pre">rolling</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Development.html">Development Distribution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Jazzy-Jalisco.html">Jazzy Jalisco (codename 'jazzy'; May, 2024)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/End-of-Life.html">End-of-Life Distributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Galactic-Geochelone.html">Galactic Geochelone (<code class="docutils literal notranslate"><span class="pre">galactic</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Releases/Galactic-Geochelone-Complete-Changelog.html">Galactic Geochelone changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Eloquent-Elusor.html">Eloquent Elusor (<code class="docutils literal notranslate"><span class="pre">eloquent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Dashing-Diademata.html">Dashing Diademata (<code class="docutils literal notranslate"><span class="pre">dashing</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Crystal-Clemmys.html">Crystal Clemmys (<code class="docutils literal notranslate"><span class="pre">crystal</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Bouncy-Bolson.html">Bouncy Bolson (<code class="docutils literal notranslate"><span class="pre">bouncy</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Ardent-Apalone.html">Ardent Apalone (<code class="docutils literal notranslate"><span class="pre">ardent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta3-Overview.html">Beta 3 (<code class="docutils literal notranslate"><span class="pre">r2b3</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta2-Overview.html">Beta 2 (<code class="docutils literal notranslate"><span class="pre">r2b2</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta1-Overview.html">Beta 1 (<code class="docutils literal notranslate"><span class="pre">Asphalt</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Alpha-Overview.html">Alphas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Process.html">Development process for a release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials.html">教程</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools.html">初学者：CLI 工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">配置环境</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html">使用``turtlesim``、<code class="docutils literal notranslate"><span class="pre">ros2``和``rqt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">理解节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">理解话题</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">了解服务</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">理解参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">理解行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">使用 <code class="docutils literal notranslate"><span class="pre">rqt_console</span></code> 查看日志</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">启动节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">录制和回放数据</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries.html">初学者：客户端库</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html">使用 <code class="docutils literal notranslate"><span class="pre">colcon</span></code> 构建软件包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html">创建一个工作空间</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">创建软件包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">编写一个简单的发布者和订阅者（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html">编写一个简单的发布者和订阅者（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html">编写一个简单的服务和客户端（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html">编写一个简单的服务和客户端（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html">创建自定义的 msg 和 srv 文件。</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html">实现自定义接口</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-CPP.html">在类中使用参数（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html">在类中使用参数（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Getting-Started-With-Ros2doctor.html">使用``ros2doctor``来识别问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Pluginlib.html">创建和使用插件（C++）</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Intermediate.html">中级</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Rosdep.html">使用rosdep管理依赖关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Creating-an-Action.html">创建一个动作</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Writing-an-Action-Server-Client/Cpp.html">Writing an action server and client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Writing-an-Action-Server-Client/Py.html">Writing an action server and client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Composition.html">在单个进程中组合多个节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Monitoring-For-Parameter-Changes-CPP.html">监视参数变化（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Launch-Main.html">启动</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Creating-Launch-Files.html">创建一个启动文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Launch-system.html">将启动文件集成到ROS 2包中</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-Substitutions.html">使用替代项</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-Event-Handlers.html">使用事件处理程序</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-ROS2-Launch-For-Large-Projects.html">管理大型项目</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Tf2-Main.html"><code class="docutils literal notranslate"><span class="pre">tf2</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Introduction-To-Tf2.html">介绍``tf2``</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">Writing a static broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">Writing a static broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Py.html">Writing a broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">Writing a broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Py.html">Writing a listener (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Cpp.html">Writing a listener (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Adding-A-Frame-Py.html">添加一个帧（Python）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Adding-A-Frame-Cpp.html">添加一个框架（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Py.html">Using time (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Cpp.html">使用时间（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Py.html">Traveling in time (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Cpp.html">Traveling in time (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Debugging-Tf2-Problems.html">调试</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Quaternion-Fundamentals.html">Quaternion fundamentals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">Using stamped datatypes with <code class="docutils literal notranslate"><span class="pre">tf2_ros::MessageFilter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Testing-Main.html">测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/CLI.html">从命令行中运行 ROS 2 中的测试</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Cpp.html">使用 GTest 编写基本的 C++ 测试</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Python.html">使用Python编写基本测试</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/URDF-Main.html">URDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">Building a visual robot model from scratch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF.html">Building a movable robot model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">Adding physical and collision properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">Using Xacro to clean up your code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Using-URDF-with-Robot-State-Publisher.html">Using URDF with <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Advanced.html">高级</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html">启用主题统计信息（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Discovery-Server/Discovery-Server.html">使用Fast DDS Discovery Server作为发现协议[社区贡献]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Allocator-Template-Tutorial.html">实现自定义内存分配器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/FastDDS-Configuration.html">发挥Fast DDS中间件的潜力 [社区贡献]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-CPP.html">从节点（C++）录制一个包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-Py.html">从节点录制包（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Simulation-Main.html">模拟器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Simulation-Webots.html">Webots</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Installation-Ubuntu.html">安装（Ubuntu）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Installation-Windows.html">安装（Windows）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Installation-MacOS.html">安装（macOS）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Basic.html">设置机器人仿真（基础）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Advanced.html">设置机器人模拟（高级）</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Gazebo/Simulation-Gazebo.html">Gazebo</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Gazebo/Gazebo.html">设置机器人仿真（Gazebo）。</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Security/Security-Main.html">安全性</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Introducing-ros2-security.html">设置安全性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/The-Keystore.html">理解安全密钥库</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Security-on-Two.html">确保跨机器的安全性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Examine-Traffic.html">检查网络流量</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Access-Controls.html">设置访问控制</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Deployment-Guidelines.html">部署指南</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Demos.html">演示</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Quality-of-Service.html">在不稳定网络中使用服务质量设置</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Managed-Nodes.html">使用受控生命周期管理节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Intra-Process-Communication.html">设置高效的进程内通信</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Rosbag-with-ROS1-Bridge.html">使用ROS 1桥接在`rosbag`中记录和回放数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Real-Time-Programming.html">理解实时编程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/dummy-robot-demo.html">尝试使用虚拟机器人进行实验</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Logging-and-logger-configuration.html">记录日志</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Content-Filtering-Subscription.html">创建内容过滤订阅</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Miscellaneous.html">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html">Deploying on IBM Cloud Kubernetes [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Eclipse-Oxygen-with-ROS-2-and-rviz2.html">Using Eclipse Oxygen with <code class="docutils literal notranslate"><span class="pre">rviz2</span></code> [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Building-Realtime-rt_preempt-kernel-for-ROS-2.html">Building a real-time Linux kernel [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Building-ROS2-Package-with-eclipse-2021-06.html">Building a package with Eclipse 2021-06</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../How-To-Guides.html">如何指南</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installation-Troubleshooting.html">安装故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Developing-a-ROS-2-Package.html">开发ROS 2软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Documentation.html">ament_cmake 用户文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Python-Documentation.html">ament_cmake_python 用户文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-files-migration-guide.html">将启动文件从ROS 1迁移到ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-file-different-formats.html">使用 Python、XML 和 YAML 编写 ROS 2 启动文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launching-composable-nodes.html">使用ROS 2 launch启动可组合节点</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Parameters-YAML-files-migration-guide.html">将YAML参数文件从ROS 1迁移到ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Node-arguments.html">通过命令行向节点传递ROS参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Sync-Vs-Async.html">同步与异步服务客户端</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/DDS-tuning.html">DDS调优信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2：覆盖 QoS 策略</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Working-with-multiple-RMW-implementations.html">使用多个ROS 2中间件实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Cross-compilation.html">交叉编译</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Releasing/Releasing-a-Package.html">发布软件包</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/First-Time-Release.html">首次发布</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Subsequent-Releases.html">后续发布</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Team-Repository.html">发布团队/仓库</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Track.html">发布跟踪</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Python-Packages.html">在ROS 2中使用Python包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Port-Plugin-Windows.html">将RQt插件移植到Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html">在 Docker 中运行 ROS 2 节点[社区贡献]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Visualizing-ROS-2-Data-With-Foxglove-Studio.html">使用Foxglove Studio可视化ROS 2数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Package-maintainer-guide.html">ROS 2软件包维护人员指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-a-Custom-Debian-Package.html">构建自定义的Debian软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-ROS-2-with-Tracing-Instrumentation.html">使用跟踪工具构建ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Topics-Services-Actions.html">主题 vs 服务 vs 动作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Variants.html">使用变体</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros2-param.html">使用``ros2 param``命令行工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros1_bridge-Jammy-upstream.html">在Ubuntu 22.04上使用``ros1_bridge``和上游ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Disabling-ZeroCopy-loaned-messages.html">禁用零拷贝借用消息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installing-on-Raspberry-Pi.html">在 Raspberry Pi 上的 ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-callback-groups.html">使用回调组</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Setup-ROS-2-with-VSCode-and-Docker-Container.html">使用VSCode和Docker设置ROS 2 [社区贡献]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install.html">从源代码构建 RQt</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-MacOS.html">在 macOS 上从源代码构建 RQt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-Windows10.html">在 Windows 10 上从源代码构建 RQt</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Concepts.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Domain-ID.html">The ROS_DOMAIN_ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Different-Middleware-Vendors.html">About different ROS 2 DDS/RTPS vendors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Logging.html">About logging and logger configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Quality-of-Service-Settings.html">About Quality of Service settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Client-Libraries.html">About ROS 2 client libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-Interfaces.html">About ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Parameters.html">About parameters in ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Executors.html">Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Topic-Statistics.html">About topic statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Command-Line-Tools.html">Introspection with command line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-RQt.html">Overview and usage of RQt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Composition.html">About Composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Catment.html">On the mixing of ament and catkin (catment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Cross-Compilation.html">About Cross-compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Security.html">About ROS 2 Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Tf2.html">About tf2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Build-System.html">About the build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Internal-Interfaces.html">About internal ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Middleware-Implementations.html">About ROS 2 middleware implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Client-Libraries.html">About ROS 2 client libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Contact.html">Contact</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../The-ROS2-Project.html">ROS 2 项目</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../Contributing.html">贡献</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">ROS 2开发者指南</a></li>
<li class="toctree-l3"><a class="reference internal" href="Code-Style-Language-Versions.html">代码风格和语言版本</a></li>
<li class="toctree-l3"><a class="reference internal" href="Quality-Guide.html">质量指南：确保代码质量</a></li>
<li class="toctree-l3"><a class="reference internal" href="Migration-Guide.html">从ROS 1迁移指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Migration-Guide-Python.html">ROS 1的Python迁移指南</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Build-Farms.html">ROS构建农场</a></li>
<li class="toctree-l3"><a class="reference internal" href="Windows-Tips-and-Tricks.html">Windows提示和技巧</a></li>
<li class="toctree-l3"><a class="reference internal" href="Contributing-To-ROS-2-Documentation.html">为ROS 2文档做出贡献</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Features.html">功能状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Feature-Ideas.html">功能点子</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Roadmap.html">路线图</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ROSCon-Content.html">ROSCon 演讲</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Governance.html">项目治理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Governance/ROS2-TSC-Charter.html">ROS 2 技术指导委员会章程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Governance/ROS2-TSC-Intake-process.html">ROS 2 TSC申请者招募流程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Governance/How-To-Start-A-Community-Working-Group.html">如何启动社区工作组</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Marketing.html">营销</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../API-Docs.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Related-Projects.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Intel-ROS2-Projects.html">Intel ROS 2 Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Nvidia-ROS2-Projects.html">NVIDIA ROS 2 Projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Citations.html">Citations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS 2 Documentation: Humble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../The-ROS2-Project.html">ROS 2 项目</a> &raquo;</li>
          <li><a href="../Contributing.html">贡献</a> &raquo;</li>
      <li>ROS 2开发者指南</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/humble/source/The-ROS2-Project/Contributing/Developer-Guide.rst" class="fa fa-github"> 在 GitHub 上修改</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <div class="section" id="ros-2-developer-guide">
<h1>ROS 2开发者指南<a class="headerlink" href="#ros-2-developer-guide" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#general-principles" id="id2">一般原则</a></p></li>
<li><p><a class="reference internal" href="#quality-practices" id="id3">质量实践</a></p>
<ul>
<li><p><a class="reference internal" href="#versioning" id="id4">版本管理</a></p></li>
<li><p><a class="reference internal" href="#change-control-process" id="id5">变更控制流程</a></p></li>
<li><p><a class="reference internal" href="#documentation" id="id6">文档</a></p></li>
<li><p><a class="reference internal" href="#testing" id="id7">测试</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#general-practices" id="id8">一般实践</a></p>
<ul>
<li><p><a class="reference internal" href="#issues" id="id9">问题</a></p></li>
<li><p><a class="reference internal" href="#branches" id="id10">分支</a></p></li>
<li><p><a class="reference internal" href="#pull-requests" id="id11">拉取请求</a></p></li>
<li><p><a class="reference internal" href="#library-versioning" id="id12">库版本管理</a></p></li>
<li><p><a class="reference internal" href="#development-process" id="id13">开发过程</a></p></li>
<li><p><a class="reference internal" href="#changes-to-rmw-api" id="id14">RMW API的更改</a></p></li>
<li><p><a class="reference internal" href="#tracking-tasks" id="id15">跟踪任务</a></p></li>
<li><p><a class="reference internal" href="#programming-conventions" id="id16">编程约定</a></p></li>
<li><p><a class="reference internal" href="#filesystem-layout" id="id17">文件系统布局</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#developer-workflow" id="id18">开发者工作流程</a></p></li>
<li><p><a class="reference internal" href="#architectural-development-practices" id="id19">架构开发实践</a></p>
<ul>
<li><p><a class="reference internal" href="#software-development-lifecycle" id="id20">软件开发生命周期</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#build-farm-introduction" id="id21">构建农场介绍</a></p>
<ul>
<li><p><a class="reference internal" href="#note-on-coverage-runs" id="id22">覆盖率运行注意事项</a></p></li>
<li><p><a class="reference internal" href="#how-to-read-the-coverage-rate-from-the-buildfarm-report" id="id23">如何从构建工厂报告中读取覆盖率</a></p></li>
<li><p><a class="reference internal" href="#how-to-calculate-the-coverage-rate-from-the-buildfarm-report" id="id24">如何从构建农场报告中计算覆盖率</a></p></li>
<li><p><a class="reference internal" href="#how-to-measure-coverage-locally-using-lcov-ubuntu" id="id25">如何使用 lcov（Ubuntu）在本地测量覆盖率</a></p></li>
</ul>
</li>
</ul>
</div>
<p>这个页面定义了我们在开发ROS 2时采用的实践和策略。</p>
<div class="section" id="general-principles">
<h2><a class="toc-backref" href="#id2">一般原则</a><a class="headerlink" href="#general-principles" title="永久链接至标题"></a></h2>
<p>以下原则适用于所有ROS 2的开发：</p>
<ul class="simple">
<li><p><strong>共享所有权</strong>：每个参与ROS 2开发的人都应该对系统的所有部分有所所有感。代码的原始作者没有特殊的权限或义务来控制或维护该代码块。每个人都可以自由地在任何地方提出更改、处理任何类型的问题票和审核任何拉取请求。</p></li>
<li><p><strong>愿意做任何工作</strong>：作为共享所有权的必然结果，每个人都应该愿意承担任何可用的任务，并为系统的任何方面做出贡献。</p></li>
<li><p><strong>寻求帮助</strong>：如果在某个任务上遇到困难，请适当地通过工单、评论或电子邮件向你的开发同事寻求帮助。</p></li>
</ul>
</div>
<div class="section" id="quality-practices">
<h2><a class="toc-backref" href="#id3">质量实践</a><a class="headerlink" href="#quality-practices" title="永久链接至标题"></a></h2>
<p>根据它们所遵循的开发实践，软件包可以根据不同的质量水平进行分类，根据《REP 2004：软件包质量分类指南 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-2004.html">https://www.ros.org/reps/rep-2004.html</a>&gt;》中的准则进行分类。这些分类根据版本管理、测试、文档编写等方面的策略进行区分。</p>
<p>以下部分是我们遵循的特定开发规则，以确保核心软件包具有最高质量（“一级”）。我们建议所有ROS开发人员努力遵守以下政策，以确保ROS生态系统的质量。</p>
<div class="section" id="versioning">
<span id="semver"></span><h3><a class="toc-backref" href="#id4">版本管理</a><a class="headerlink" href="#versioning" title="永久链接至标题"></a></h3>
<p>我们将使用`语义化版本指南 &lt;<a class="reference external" href="http://semver.org/">http://semver.org/</a>&gt;`__（<code class="docutils literal notranslate"><span class="pre">semver</span></code>）进行版本管理。</p>
<p>我们还将遵守一些基于``semver``的ROS特定规则，这些规则是在``semver``完整意义上建立的。</p>
<ul class="simple">
<li><p>不应该在已发布的ROS发行版中进行主要版本增加（即破坏性变更）</p>
<ul>
<li><p>补丁（保持接口兼容）和次要（非破坏性）版本增加不会破坏兼容性，因此此类更改*允许*在发布中进行</p></li>
<li><p>主要ROS版本是发布破坏性变更的最佳时机。如果核心包需要多个破坏性变更，则应将它们合并到集成分支（例如rolling）中，以便快速在CI中发现问题，但同时发布以减少ROS用户的主要发布数量</p></li>
<li><p>尽管主要增量需要新的发行版，但新的发行版并不一定需要进行主要更新（如果开发和发布可以在不破坏API的情况下进行）</p></li>
</ul>
</li>
<li><p>对于编译代码，ABI（应用二进制接口）被视为公共接口的一部分。任何需要重新编译依赖代码的更改都被视为主要更改（破坏性的）</p>
<ul>
<li><p>ABI破坏性更改可以在次要版本升级之前（加入滚动发布）进行</p></li>
</ul>
</li>
<li><p>尽管 Dashing 和 Eloquent 的主要版本组件为``0``，我们仍对核心包的API稳定性进行强制执行，尽管 <a class="reference external" href="https://semver.org/#spec-item-4">SemVer 规范</a> 中有关初始开发的规定</p>
<ul>
<li><p>随后，软件包应努力达到成熟状态并增加到版本``1.0.0``以符合``semver``的规范</p></li>
</ul>
</li>
</ul>
<div class="section" id="caveats">
<h4>注意事项<a class="headerlink" href="#caveats" title="永久链接至标题"></a></h4>
<p>这些规则是*尽力而为*的。在极端情况下，可能需要在一个主要版本/发布中打破API的兼容性。对于非计划中的兼容性断裂，是将主版本号还是次版本号增加将根据具体情况进行评估。</p>
<p>例如，考虑一个涉及发布的 X-turtle 和对应的主版本号为``1.0.0``的 Y-turtle 的情况。</p>
<p>如果在 X-turtle 中发现必须打破API兼容性的问题，显然不能选择升级到``2.0.0``，因为``2.0.0``已经存在。</p>
<p>在这种情况下处理X-turtle版本的解决方案，都是非理想的，包括：</p>
<ol class="arabic simple">
<li><p>增加X-turtle的次要版本：非理想，因为它违反了语义化版本规范（SemVer）中破坏性变更必须增加主要版本的原则。</p></li>
<li><p>将X-turtle的主要版本升级到超过Y-turtle（<code class="docutils literal notranslate"><span class="pre">3.0.0</span></code>）：非理想，因为旧发行版的版本将会高于已有的新发行版版本，这将使得特定版本条件代码失效/破坏。</p></li>
</ol>
<p>开发人员将需要决定使用哪种解决方案，或者更重要的是，他们愿意违背哪个原则。我们不能建议选用其中一种，但无论哪种情况，我们都要求采取明确的措施手动向用户传达中断情况及其解释（不仅仅是版本号的增加）。</p>
<p>如果没有 Y-turtle，即使修复只是一个补丁，X-turtle 也必须升级到 <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code>。这种情况符合 SemVer 规则，但违反了我们自己的规定，即在发布的分发版中不应引入主要增量。</p>
<p>这就是为什么我们将版本规则视为“尽力而为”。尽管上述例子不太可能出现，但准确定义我们的版本系统非常重要。</p>
</div>
<div class="section" id="public-api-declaration">
<h4>公共 API 声明<a class="headerlink" href="#public-api-declaration" title="永久链接至标题"></a></h4>
<p>根据 <code class="docutils literal notranslate"><span class="pre">semver</span></code>，每个软件包必须明确声明一个公共 API。我们将使用软件包的质量声明中的“公共 API 声明”部分来声明哪些符号是公共 API 的一部分。</p>
<p>对于大多数 C 和 C++ 包，声明是其安装的任何头文件。然而，定义一组被视为私有的符号也是可以接受的。在头文件中避免私有符号可以帮助实现 ABI 的稳定性，但并非必需。</p>
<p>对于其他语言如 Python，必须明确定义公共 API，以便清楚地知道哪些符号可以依赖于版本指南。公共 API 还可以扩展到构建工件，如配置变量、CMake 配置文件等，以及可执行文件、命令行选项和输出。包的文档应清楚地说明公共 API 的任何元素。如果你使用的内容在包的文档中没有明确列出作为公共 API 的一部分，那么你不能指望它在次要或修补版本之间不发生变化。</p>
</div>
<div class="section" id="deprecation-strategy">
<h4>废弃策略<a class="headerlink" href="#deprecation-strategy" title="永久链接至标题"></a></h4>
<p>在可能的情况下，我们还将使用主要版本增量的滴答滴答废弃和迁移策略。新的废弃将在新的发行版中提出，伴随着编译器警告，表示该功能正在被废弃。在下一个发布中，该功能将被完全移除（不再有警告）。</p>
<p>示例函数 <code class="docutils literal notranslate"><span class="pre">foo</span></code> 已弃用，并被函数 <code class="docutils literal notranslate"><span class="pre">bar</span></code> 替代：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>版本</p></th>
<th class="head"><p>API</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>X-turtle</p></td>
<td><p>void foo();</p></td>
</tr>
<tr class="row-odd"><td><p>Y-龟</p></td>
<td><p>[[已弃用(&quot;使用bar()&quot;)]] void foo(); &lt;br&gt; void bar();</p></td>
</tr>
<tr class="row-even"><td><p>Z-龟</p></td>
<td><p>void bar();</p></td>
</tr>
</tbody>
</table>
<p>在发行版发布之后，我们不能添加废弃项。然而，废弃项不一定需要引发主要版本的升级。如果在发行版发布之前进行次要版本的升级，就可以引入废弃项（类似于破坏ABI的更改）。</p>
<p>例如，如果X-turtle作为``2.0.0``开始开发，可以在X-turtle发布之前的``2.1.0``中添加废弃项。</p>
<p>我们将尽可能在不同发行版之间保持兼容性。然而，与语义化版本控制（SemVer）相关的注意事项一样，特定情况下可能无法完全遵守打勾或废弃项。</p>
</div>
</div>
<div class="section" id="change-control-process">
<h3><a class="toc-backref" href="#id5">变更控制流程</a><a class="headerlink" href="#change-control-process" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>所有更改都必须通过拉取请求进行。</p></li>
<li><p>我们将在ROSCore仓库的拉取请求中执行`开发者证书 (DCO) &lt;<a class="reference external" href="https://developercertificate.org/">https://developercertificate.org/</a>&gt;`_ 的强制要求。</p>
<ul>
<li><p>它要求所有提交消息都包含与提交作者相匹配的``Signed-off-by``行及其电子邮件地址。</p></li>
<li><p>您可以在``git commit``命令中添加``-s`` / <code class="docutils literal notranslate"><span class="pre">--signoff``参数或手动编写所需的消息（例如：``Signed-off-by:</span> <span class="pre">Your</span> <span class="pre">Name</span> <span class="pre">Developer</span> <span class="pre">&lt;your.name&#64;example.com&gt;</span></code>）。</p></li>
<li><p>只涉及空格删除、拼写错误更正和其他 <a class="reference external" href="http://cr.openjdk.java.net/~jrose/draft/trivial-fixes.html">微小更改</a> 的拉取请求，不需要DCO。</p></li>
</ul>
</li>
<li><p>对于每个拉取请求，始终在所有 <a class="reference external" href="https://www.ros.org/reps/rep-2000.html#support-tiers">一级支持平台</a> 上运行CI作业，并在拉取请求中包含作业链接。（如果您无权访问Jenkins作业，将有人为您触发作业。）</p></li>
<li><p>需要至少来自未参与拉取请求撰写的其他开发人员的1个批准才能被视为已批准。在合并之前需要批准。</p>
<ul>
<li><p>软件包可以选择增加此数字。</p></li>
</ul>
</li>
<li><p>在合并相关更改之前，必须先提出对文档（API文档、功能文档、发布说明等）所需的任何更改。</p></li>
</ul>
<div class="section" id="guidelines-for-backporting-prs">
<h4>关于回溯拉取请求的准则<a class="headerlink" href="#guidelines-for-backporting-prs" title="永久链接至标题"></a></h4>
<p>在更改较旧版本的ROS时：</p>
<ul class="simple">
<li><p>确保在向较旧版本回溯更改的拉取请求之前，这些功能或修复已被接受并合并到滚动分支中。</p></li>
<li><p>当将代码回溯到较旧的版本时，还要考虑回溯到任何其他 <a class="reference internal" href="../../Releases.html"><span class="doc">仍受支持的版本</span></a>，甚至非LTS版本。</p></li>
<li><p>如果您要完整地回溯单个PR，请将回溯PR的标题命名为&quot;[Distro] &lt;原始PR的名称&gt;&quot;。如果从一个或多个PR回溯部分更改，则标题应为&quot;[Distro] &lt;更改的描述&gt;&quot;。</p></li>
<li><p>在回溯PR的描述中链接到您回溯更改的所有PR。在将Foxy更改回溯到Dashing时，您不需要链接到同一更改的Eloquent回溯。</p></li>
</ul>
</div>
</div>
<div class="section" id="documentation">
<h3><a class="toc-backref" href="#id6">文档</a><a class="headerlink" href="#documentation" title="永久链接至标题"></a></h3>
<p>所有的软件包都应该在其README中包含或从其README中链接到以下文档元素：</p>
<ul class="simple">
<li><p>描述和目的</p></li>
<li><p>公共API的定义和描述</p></li>
<li><p>示例</p></li>
<li><p>如何构建和安装（应该引用外部工具/工作流程）</p></li>
<li><p>如何构建和运行测试</p></li>
<li><p>如何构建文档</p></li>
<li><p>如何进行开发（对于描述诸如``python setup.py develop``之类的内容很有用）</p></li>
<li><p>许可证和版权声明</p></li>
</ul>
<p>每个源文件必须有一个许可证和版权声明，通过自动化检查工具进行检查。</p>
<p>每个软件包必须有一个LICENSE文件，通常是Apache 2.0许可证，除非该软件包有现有的宽松许可证（例如，rviz使用三条款的BSD许可证）。</p>
<p>每个软件包应该对自身和其目的进行描述，尽量假设读者没有关于ROS或其他相关项目的先前知识而意外发现该软件包。</p>
<p>每个软件包应该定义和描述其公共API，以便用户可以合理地预期语义版本控制政策所覆盖的内容。即使在C和C++中，公共API可以通过API和ABI检查来强制执行，这也是一个很好的机会来描述代码的结构和每个部分的功能。</p>
<p>理应很容易通过任何软件包的文档了解如何构建、运行、构建并运行测试，并构建文档。显然，我们应该避免在常见工作流程中重复自己，比如在工作空间中构建软件包，但基本工作流程应该被描述或引用。</p>
<p>最后，它应该包含开发者的任何文档。这可能包括使用类似 <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> 的方法测试代码的工作流程，或者可能意味着描述如何利用软件包提供的扩展点。</p>
<p>示例：</p>
<ul class="simple">
<li><p>功能：<a class="reference external" href="https://docs.ros.org/hydro/api/capabilities/html/">https://docs.ros.org/hydro/api/capabilities/html/</a></p>
<ul>
<li><p>这个例子展示了描述公共API的文档</p></li>
</ul>
</li>
<li><p>catkin_tools：<a class="reference external" href="https://catkin-tools.readthedocs.org/en/latest/development/extending_the_catkin_command.html">https://catkin-tools.readthedocs.org/en/latest/development/extending_the_catkin_command.html</a></p>
<ul>
<li><p>这是描述软件包扩展点的示例</p></li>
</ul>
</li>
</ul>
<p>（API文档尚未自动生成）</p>
</div>
<div class="section" id="testing">
<h3><a class="toc-backref" href="#id7">测试</a><a class="headerlink" href="#testing" title="永久链接至标题"></a></h3>
<p>所有的软件包都应该具备一定程度的 <a class="reference internal" href="../../Tutorials/Intermediate/Testing/Testing-Main.html#testingmain"><span class="std std-ref">系统测试、集成测试和/或单元测试。</span></a></p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>单元测试**应该始终位于被测试的软件包中，并且应该使用诸如``Mock``之类的工具，尝试在构建的场景中测试代码库的狭窄部分。单元测试不应引入非测试工具的测试依赖，例如 gtest、nosestest、pytest、mock 等...</p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>集成测试**可以测试代码的各个部分之间或代码与系统之间的交互。它们通常以我们期望用户使用它们的方式测试软件接口。与单元测试类似，集成测试应该位于被测试的软件包中，除非绝对必要，否则不应引入非工具测试依赖，即所有非工具依赖都应在极端审查下才被允许，因此应尽量避免使用。</p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>系统测试**旨在测试软件包之间的端到端情况，并应位于它们自己的软件包中，以避免软件包膨胀或耦合以及避免循环依赖。</p>
<p>通常情况下，应尽量减少外部或跨包的测试依赖，以避免循环依赖和紧密耦合的测试包。</p>
<p>所有的包都应该有一些单元测试和可能的集成测试，但其数量取决于包的质量分类。以下小节适用于“Level 1”包：</p>
<div class="section" id="code-coverage">
<h4>代码覆盖率<a class="headerlink" href="#code-coverage" title="永久链接至标题"></a></h4>
<p>我们将提供行覆盖率，并保证行覆盖率达到95%以上。如果有合理降低百分比目标的情况，必须明确记录。我们可以提供分支覆盖率，或者将某些代码排除在覆盖率之外（测试代码、调试代码等）。在合并更改之前，我们要求覆盖率要增加或保持不变，但在适当的理由下，可能会接受降低代码覆盖率的更改（例如，删除以前覆盖的代码可能会导致百分比下降）。</p>
</div>
<div class="section" id="performance">
<h4>性能<a class="headerlink" href="#performance" title="永久链接至标题"></a></h4>
<p>我们强烈建议进行性能测试，但我们也认识到对于某些软件包来说，这并没有意义。如果有性能测试，我们将选择在每次更改或发布之前进行检查，或者两者都要进行。我们还需要对降低性能的更改或发布进行合并的理由。</p>
</div>
<div class="section" id="linters-and-static-analysis">
<h4>代码检查器和静态分析<a class="headerlink" href="#linters-and-static-analysis" title="永久链接至标题"></a></h4>
<p>我们将使用:doc:<a class="reference internal" href="Code-Style-Language-Versions.html"><span class="doc">ROS代码风格</span></a>，并使用来自`ament_lint_common&lt;<a class="reference external" href="https://github.com/ament/ament_lint/tree/humble/ament_lint_common/doc/index.rst">https://github.com/ament/ament_lint/tree/humble/ament_lint_common/doc/index.rst</a>&gt;`_的代码检查器来强制执行。必须使用`ament_lint_common`的所有代码检查器和静态分析工具。</p>
<p><code class="docutils literal notranslate"><span class="pre">ament_lint_auto</span></code> 文档提供了关于运行 <code class="docutils literal notranslate"><span class="pre">ament_lint_common</span></code> 的信息。</p>
</div>
</div>
</div>
<div class="section" id="general-practices">
<h2><a class="toc-backref" href="#id8">一般实践</a><a class="headerlink" href="#general-practices" title="永久链接至标题"></a></h2>
<p>一些实践适用于所有 ROS 2 开发。</p>
<p>这些实践不会影响软件包质量等级（如 <a class="reference external" href="https://www.ros.org/reps/rep-2004.html">REP 2004</a> 中所述），但在开发过程中仍然强烈推荐。</p>
<div class="section" id="issues">
<h3><a class="toc-backref" href="#id9">问题</a><a class="headerlink" href="#issues" title="永久链接至标题"></a></h3>
<p>在提交问题时，请确保：</p>
<ul class="simple">
<li><p>提供足够的信息让其他人能够理解问题。在ROS 2中，以下几点对于缩小问题原因范围非常有帮助。在每个类别中尽可能尝试多种替代方案将特别有帮助。</p>
<ul>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>操作系统及版本。<a href="#id3"><span class="problematic" id="id4">**</span></a>原因：ROS 2支持多个平台，某些错误可能只出现在特定版本的操作系统/编译器上。</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>安装方法。<a href="#id3"><span class="problematic" id="id4">**</span></a>理由：某些问题只在使用“fat archives”或Debians安装ROS 2时才显现出来。这可以帮助我们确定问题是否与打包过程有关。</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>ROS 2的具体版本。<a href="#id3"><span class="problematic" id="id4">**</span></a>理由：某些错误可能存在于特定的ROS 2版本中，后来被修复。了解您的安装是否包含这些修复非常重要。</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>正在使用的DDS/RMW实现**（参见`此页面&lt;../../Concepts/About-Different-Middleware-Vendors&gt;`，以了解如何确定使用的是哪个）。理由：通信问题可能特定于所使用的基础ROS中间件。</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>正在使用的ROS 2客户端库。<a href="#id3"><span class="problematic" id="id4">**</span></a>理由：这可以帮助我们缩小问题可能出现的堆栈层级范围。</p></li>
</ul>
</li>
<li><p>包含一系列重现问题的步骤。</p></li>
<li><p>如果遇到错误，请考虑提供一个`简短、自包含、正确（可编译）的示例 &lt;<a class="reference external" href="http://sscce.org/">http://sscce.org/</a>&gt;`__。如果其他人能够轻松地重现错误，问题更有可能被解决。</p></li>
<li><p>提及已尝试过的故障排除步骤，包括：</p>
<ul>
<li><p>升级到最新版本的代码，该版本可能包含尚未发布的错误修复。参见`此部分 &lt;building-from-source&gt;`，并按照说明获取&quot;rolling&quot;分支。</p></li>
<li><p>尝试使用不同的RMW实现。请参考`此页面 &lt;../../How-To-Guides/Working-with-multiple-RMW-implementations&gt;`了解如何操作。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="branches">
<h3><a class="toc-backref" href="#id10">分支</a><a class="headerlink" href="#branches" title="永久链接至标题"></a></h3>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>这只是一些指南。选择分支名称以匹配其自身工作流程是包维护者的责任。</p>
</div>
<p>在一个包的源代码库中，为其所针对的每个ROS发行版创建**单独的分支**是一种良好的做法。这些分支通常以它们所针对的发行版命名。例如，针对Humble发行版的开发可以创建一个名为``humble``的分支。</p>
<p>从这些分支中也可以发布版本，以适应相应的发行版。针对特定ROS发行版的开发可以在相应的分支上进行。例如：针对``foxy``的开发提交将被放到``foxy``分支，并且针对``foxy``的软件包发布将从同一分支进行。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>这需要软件包维护者根据需要执行回溯或向前移植，以保持所有分支与功能的同步。维护者还必须对所有仍然进行软件包发布的分支进行常规维护（修复错误等）。</p>
<p>例如，如果某个功能已合并到特定于Rolling的分支（例如``rolling``或``main``），并且该功能也适用于Humble发行版（不会破坏API等），那么将该功能回溯到Humble特定分支是一种良好的做法。</p>
<p>如果存在新功能或错误修复，则维护者可以为这些旧的发行版进行发布。</p>
</div>
<p><strong>关于</strong> <code class="docutils literal notranslate"><span class="pre">main</span></code> <strong>和</strong> <code class="docutils literal notranslate"><span class="pre">rolling</span></code> <strong>呢？</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">main</span></code> 通常目标为 <span class="xref std std-doc">Rolling &lt;../../Releases/Release-Rolling-Ridley&gt;`（即下一个尚未发布的ROS版本），但维护者可能决定从 ``rolling`</span> 分支进行开发和发布。</p>
</div>
<div class="section" id="pull-requests">
<h3><a class="toc-backref" href="#id11">拉取请求</a><a class="headerlink" href="#pull-requests" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>一个拉取请求应该只关注一个更改。不同的更改应该放入不同的拉取请求中。参见 <a class="reference external" href="https://github.com/blog/1943-how-to-write-the-perfect-pull-request">GitHub完美拉取请求指南</a>。</p></li>
<li><p>补丁应该尽量保持最小的大小，并避免任何不必要的更改。</p></li>
<li><p>拉取请求必须包含最少数量的有意义的提交。</p>
<ul>
<li><p>在拉取请求正在审核中时，您可以创建新的提交。</p></li>
</ul>
</li>
<li><p>在合并拉取请求之前，所有的更改应该被压缩成少量的语义提交，以保持历史清晰。</p>
<ul>
<li><p>在审核期间避免压缩提交记录。您的审阅人员可能不会注意到您所做的更改，从而引入混淆的可能性。而且，无论如何在合并之前都要进行压缩；提前压缩没有任何好处。</p></li>
</ul>
</li>
<li><p>任何开发者都可以审核并批准拉取请求（请参阅 <a class="reference internal" href="#general-principles">General Principles</a>）。</p></li>
<li><p>当您正在处理尚未准备好审核或合并的更改时，请使用草稿拉取请求。当这些更改准备好进行审核时，将拉取请求从草稿状态移出。请注意，如果您想从草稿拉取请求中获得特定人员的早期反馈意见，可以在拉取请求的描述或评论中提及他们。</p></li>
<li><p>如果您的拉取请求依赖于其他拉取请求，请通过在拉取请求的描述顶部添加 <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">Depends</span> <span class="pre">on</span> <span class="pre">&lt;link&gt;</span></code> 来链接到每个所依赖的拉取请求。这样做有助于审阅人员了解拉取请求的上下文。</p></li>
<li><p>当您开始审查拉取请求时，请在拉取请求上发表评论，以便其他开发人员知道您正在进行审查。</p></li>
<li><p>拉取请求审查不是只读的，审查人员会发表评论，然后等待作者处理。作为审查人员，可以自由地进行一些小的改进（拼写错误、样式问题等）。作为拉取请求的发起人，如果您在一个分支上工作，请勾选`允许来自上游贡献者的编辑 &lt;<a class="reference external" href="https://github.com/blog/2247-improving-collaboration-with-forks">https://github.com/blog/2247-improving-collaboration-with-forks</a>&gt;`__ 选项，这将有助于前述情况。作为审查人员，也可以自由地进行一些较大的改进，但考虑将它们放在一个单独的分支中（在评论中提到新的分支，或者从新分支向原始分支发起另一个拉取请求）。</p></li>
<li><p>任何开发人员（作者、审查人员或其他人）都可以合并任何已批准的拉取请求。</p></li>
</ul>
</div>
<div class="section" id="library-versioning">
<h3><a class="toc-backref" href="#id12">库版本管理</a><a class="headerlink" href="#library-versioning" title="永久链接至标题"></a></h3>
<p>我们将同时对一个包中的所有库进行版本控制。这意味着库的版本继承自该包。这样可以防止库和包的版本分歧，并与共享同一个代码仓库的包发布策略保持一致。如果您需要库具有不同的版本，请考虑将它们拆分为不同的包。</p>
</div>
<div class="section" id="development-process">
<h3><a class="toc-backref" href="#id13">开发过程</a><a class="headerlink" href="#development-process" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>默认分支（大多数情况下是滚动分支）必须始终构建，通过所有测试并且没有警告信息。如果出现任何回归问题，最重要的是至少恢复到先前的状态。</p></li>
<li><p>始终使用启用了测试的构建。</p></li>
<li><p>在对更改进行推送之前，始终在本地运行测试，并确保它们在拉取请求中正常工作。除了使用自动化测试外，还要手动运行修改后的代码路径，以确保补丁按预期工作。</p></li>
<li><p>对于每个拉取请求，始终运行适用于所有平台的CI作业，并在拉取请求中包含作业链接。</p></li>
</ul>
<p>有关推荐的软件开发工作流程的更多详细信息，请参阅“软件开发生命周期”_部分。</p>
</div>
<div class="section" id="changes-to-rmw-api">
<h3><a class="toc-backref" href="#id14">RMW API的更改</a><a class="headerlink" href="#changes-to-rmw-api" title="永久链接至标题"></a></h3>
<p>当更新 <a class="reference external" href="https://github.com/ros2/rmw">RMW API</a> 时，需要同时更新Tier 1中间件库的RMW实现。例如，RMW API 中引入了新函数 <code class="docutils literal notranslate"><span class="pre">rmw_foo()</span></code>，必须在以下软件包中实现（截至ROS Galactic版本）：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rmw_connextdds">rmw_connextdds</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw_cyclonedds">rmw_cyclonedds</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw_fastrtps">rmw_fastrtps</a></p></li>
</ul>
<p>如果可行的话，也应考虑更新非一级中间件库（例如，根据更改的大小）。有关中间件库及其等级的列表，请参阅 <a class="reference external" href="https://www.ros.org/reps/rep-2000.html">REP-2000</a>。</p>
</div>
<div class="section" id="tracking-tasks">
<h3><a class="toc-backref" href="#id15">跟踪任务</a><a class="headerlink" href="#tracking-tasks" title="永久链接至标题"></a></h3>
<p>为了帮助组织ROS 2的工作，核心ROS 2开发团队使用看板式 <a class="reference external" href="https://github.com/orgs/ros2/projects">GitHub项目看板</a>。</p>
<p>然而，并不是所有问题和拉取请求都在项目看板上跟踪。一个看板通常表示一个即将发布的版本或特定的项目。可以通过浏览 <a class="reference external" href="https://github.com/ros2">ROS 2存储库的个别问题页面</a> 来浏览票证。</p>
<p>任何给定的ROS 2项目看板中的列名称和用途可能会有所不同，但通常遵循相同的一般结构：</p>
<ul class="simple">
<li><p><strong>待办事项</strong>：与项目相关的问题，可以分配处理</p></li>
<li><p><strong>进行中</strong>：正在进行工作的活动拉取请求</p></li>
<li><p><strong>审核中</strong>：工作已完成且准备好进行审核的拉取请求，以及目前正在进行主动审核的请求</p></li>
<li><p><strong>完成</strong>：合并/关闭拉取请求和相关问题（仅供参考）</p></li>
</ul>
<p>如果要请求更改权限，请在您感兴趣的工单上发表评论即可。根据复杂程度，描述您打算如何解决问题可能会很有用。我们将更新状态（如果您没有权限），然后您可以开始处理拉取请求。如果您经常做出贡献，我们可能会直接授予您管理标签等权限。</p>
</div>
<div class="section" id="programming-conventions">
<h3><a class="toc-backref" href="#id16">编程约定</a><a class="headerlink" href="#programming-conventions" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>防御式编程：确保尽早持有假设。例如，检查每个返回代码，并确保至少抛出异常，直到处理情况更加优雅为止。</p></li>
<li><p>所有错误消息必须指向 <code class="docutils literal notranslate"><span class="pre">stderr</span></code>。</p></li>
<li><p>在尽可能狭窄的范围内声明变量。</p></li>
<li><p>保持一组项目（依赖项、导入项、包含项等）按字母顺序排列。</p></li>
</ul>
<div class="section" id="c-specific">
<h4>特定于 C++。<a class="headerlink" href="#c-specific" title="永久链接至标题"></a></h4>
<ul class="simple">
<li><p>避免直接将流 (<code class="xref any docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>) 输出到 <code class="xref any docutils literal notranslate"><span class="pre">stdout</span></code>/<code class="xref any docutils literal notranslate"><span class="pre">stderr</span></code>，以防止多个线程之间的交错。</p></li>
<li><p>避免使用引用来操作 <code class="xref any docutils literal notranslate"><span class="pre">std::shared_ptr</span></code>，因为这会破坏引用计数。如果原始实例超出作用域且引用正在使用中，它将访问已释放的内存。</p></li>
</ul>
</div>
</div>
<div class="section" id="filesystem-layout">
<h3><a class="toc-backref" href="#id17">文件系统布局</a><a class="headerlink" href="#filesystem-layout" title="永久链接至标题"></a></h3>
<p>软件包和存储库的文件系统布局应遵循相同的约定，以便为浏览我们的源代码的用户提供一致的体验。</p>
<div class="section" id="package-layout">
<h4>包布局<a class="headerlink" href="#package-layout" title="永久链接至标题"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: 包含所有的 C 和 C++ 代码</p>
<ul>
<li><p>同时包含未安装的 C/C++ 头文件</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">include</span></code>: 包含所有已安装的 C 和 C++ 头文件</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;package</span> <span class="pre">name&gt;</span></code>：对于所有已安装的 C 和 C++ 标头，它们应该由包名进行命名空间分隔</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;package_name&gt;</span></code>：包含所有 Python 代码</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code>：包含所有自动化测试和测试数据</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code>：包含配置文件，例如 YAML 参数文件和 RViz 配置文件</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code>：包含所有的文档</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">launch</span></code>：包含所有的启动文件</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package.xml</span></code>：根据`REP-0140 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-0140.html">https://www.ros.org/reps/rep-0140.html</a>&gt;`_定义的（可能会更新用于原型设计）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>：仅限使用 CMake 的 ROS 软件包</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code>：仅适用于仅使用Python代码的ROS软件包</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README</span></code>：可以作为项目的首页在GitHub上显示</p>
<ul>
<li><p>这可以是简短或详细的，但至少应该链接到项目文档</p></li>
<li><p>考虑在此README中添加CI或代码覆盖率标签</p></li>
<li><p>它也可以是 <code class="docutils literal notranslate"><span class="pre">.rst</span></code> 或任何 GitHub 支持的格式</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTRIBUTING</span></code>：描述贡献准则</p>
<ul>
<li><p>这可能涉及许可证的含义，例如使用 Apache 2 许可证时</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>：此软件包的许可证副本或许可证</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHANGELOG.rst</span></code>：<a class="reference external" href="https://www.ros.org/reps/rep-0132.html">REP-0132</a> 兼容的变更日志</p></li>
</ul>
</div>
<div class="section" id="repository-layout">
<h4>存储库布局<a class="headerlink" href="#repository-layout" title="永久链接至标题"></a></h4>
<p>每个软件包应该位于与软件包同名的子文件夹中。如果一个存储库只包含一个软件包，它可以选择位于存储库的根目录中。</p>
</div>
</div>
</div>
<div class="section" id="developer-workflow">
<h2><a class="toc-backref" href="#id18">开发者工作流程</a><a class="headerlink" href="#developer-workflow" title="永久链接至标题"></a></h2>
<p>我们使用 <a class="reference external" href="https://github.com/orgs/ros2/projects">GitHub项目面板</a> 来跟踪与即将发布的版本和较大项目相关的未解决问题和活动中的PR。</p>
<p>通常的工作流程是：</p>
<ul>
<li><p>讨论设计（在适当的存储库上的GitHub票证，并在需要时在 <a class="reference external" href="https://github.com/ros2/design">https://github.com/ros2/design</a> 上创建设计PR）</p></li>
<li><p>在一个分支上的特性分支上编写实现</p>
<ul class="simple">
<li><p>请查看 <a class="reference internal" href="#"><span class="doc">开发人员指南</span></a> 以获取指导方针和最佳实践</p></li>
</ul>
</li>
<li><p>编写测试</p></li>
<li><p>启用并运行代码检查工具</p></li>
<li><p>在本地运行测试，使用 <a href="#id1"><span class="problematic" id="id2">``</span></a>colcon test``（请参阅 <a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html"><span class="doc">colcon 教程</span></a>）</p></li>
<li><p>一旦本地构建没有警告并且所有测试都通过，请在你的功能分支上运行CI：</p>
<ul class="simple">
<li><p>访问 ci.ros2.org</p></li>
<li><p>登录（右上角）</p></li>
<li><p>点击 <code class="docutils literal notranslate"><span class="pre">ci_launcher</span></code> 作业</p></li>
<li><p>点击&quot;使用参数构建&quot;（左列）</p></li>
<li><p>在第一个框中输入&quot;CI_BRANCH_TO_TEST&quot;，输入您的特性分支名称</p></li>
<li><p>点击 <code class="docutils literal notranslate"><span class="pre">build</span></code> 按钮</p></li>
</ul>
<p>(如果您不是ROS 2的贡献者，您无法访问CI工作区。在这种情况下，请联系您的PR审查者为您运行CI)</p>
</li>
<li><p>如果您的使用场景需要运行代码覆盖率:</p>
<ul class="simple">
<li><p>访问 ci.ros2.org</p></li>
<li><p>登录（右上角）</p></li>
<li><p>点击``ci_linux_coverage``作业</p></li>
<li><p>点击&quot;使用参数构建&quot;（左列）</p></li>
<li><p>确保将&quot;CI_BUILD_ARGS&quot;和&quot;CI_TEST_ARGS&quot;保留为默认值</p></li>
<li><p>点击 <code class="docutils literal notranslate"><span class="pre">build</span></code> 按钮</p></li>
<li><p>在文档的末尾，有关于如何 :ref:<a href="#id1"><span class="problematic" id="id2">`</span></a>解读报告结果 &lt;read-coverage-report&gt;`和 :ref:<a href="#id3"><span class="problematic" id="id4">`</span></a>计算覆盖率 &lt;calculate-coverage-rate&gt;`的说明</p></li>
</ul>
</li>
<li><p>如果 CI 作业在没有警告、错误和测试失败的情况下构建成功，请在您的 PR 或汇总所有 PR 的高级票证上发布您作业的链接（参见示例 <a class="reference external" href="https://github.com/ros2/rcl/pull/106#issuecomment-271119200">here</a>)</p>
<ul class="simple">
<li><p>请注意，这些徽章的 Markdown 代码位于“ci_launcher”作业的控制台输出中</p></li>
</ul>
</li>
<li><p>当 PR 被批准后：</p>
<ul class="simple">
<li><p>提交 PR 的人使用“Squash and Merge”选项将其合并，以便保持干净的历史记录</p>
<ul>
<li><p>如果这些提交应该保持分开：将所有的 nitpick/linters/typo 提交合并在一起，然后合并剩余的提交集合</p>
<ul>
<li><p>注意：每个 PR 应该针对一个具体的功能，因此大部分情况下 Squash and Merge 是有意义的</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>合并后删除该分支</p></li>
</ul>
</div>
<div class="section" id="architectural-development-practices">
<h2><a class="toc-backref" href="#id19">架构开发实践</a><a class="headerlink" href="#architectural-development-practices" title="永久链接至标题"></a></h2>
<p>本节描述了在对ROS 2进行重大架构更改时应采用的理想生命周期。</p>
<div class="section" id="software-development-lifecycle">
<h3><a class="toc-backref" href="#id20">软件开发生命周期</a><a class="headerlink" href="#software-development-lifecycle" title="永久链接至标题"></a></h3>
<p>本节逐步描述了如何规划、设计和实现一个新功能：</p>
<ol class="arabic simple">
<li><p>任务创建</p></li>
<li><p>创建设计文档</p></li>
<li><p>设计评审</p></li>
<li><p>实施</p></li>
<li><p>代码评审</p></li>
</ol>
<div class="section" id="task-creation">
<h4>任务创建<a class="headerlink" href="#task-creation" title="永久链接至标题"></a></h4>
<p>需要对ROS 2关键部分进行更改的任务应在发布周期的早期阶段进行设计审查。如果设计审查在后期阶段进行，则更改将成为未来发布的一部分。</p>
<ul class="simple">
<li><p>在适当的 <a class="reference external" href="https://github.com/ros2/">ros2 代码库</a> 中创建一个问题，清楚地描述正在进行的任务。</p>
<ul>
<li><p>它应具有明确的成功标准，并突出显示预期的具体改进。</p></li>
<li><p>如果该功能针对ROS版本，请确保在ROS版本票据中进行跟踪（<a class="reference external" href="https://github.com/ros2/ros2/issues/607">示例</a>）。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="writing-the-design-document">
<h4>编写设计文档<a class="headerlink" href="#writing-the-design-document" title="永久链接至标题"></a></h4>
<p>设计文档不得包含机密信息。是否需要为您的更改编写设计文档取决于任务的大小。</p>
<ol class="arabic simple">
<li><p>您正在进行小的更改或修复错误：</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>不需要设计文档，但应在适当的存储库中打开一个问题来跟踪工作并避免重复努力。</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>您正在实施新功能或希望为OSRF拥有的基础架构（如Jenkins CI）做贡献：</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>需要设计文档，并应贡献给 <a class="reference external" href="https://github.com/ros2/design/">ros2/design</a>，以便在 <a class="reference external" href="https://design.ros2.org/">https://design.ros2.org/</a> 上访问。</p></li>
<li><p>您应该fork存储库并提交拉取请求，详细说明设计。</p></li>
</ul>
<p>在拉取请求或提交消息中提及相关的ros2问题（例如，<code class="docutils literal notranslate"><span class="pre">任务ros2/ros2#&lt;问题编号&gt;的设计文档</span></code>）。详细说明可在`ROS 2 Contribute &lt;<a class="reference external" href="https://design.ros2.org/contribute.html">https://design.ros2.org/contribute.html</a>&gt;`__页面找到。设计评论将直接在拉取请求上进行。</p>
</div></blockquote>
<p>如果任务计划在特定版本的ROS中发布，应在拉取请求中包含这些信息。</p>
</div>
<div class="section" id="design-document-review">
<h4>设计文档审查<a class="headerlink" href="#design-document-review" title="永久链接至标题"></a></h4>
<p>一旦设计准备好进行审查，应打开拉取请求并指定适当的审阅者。建议将项目所有者（即所有受影响软件包的维护者，根据``package.xml``维护者字段定义，参见`REP-140 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-0140.html#maintainer-multiple-but-at-least-one">https://www.ros.org/reps/rep-0140.html#maintainer-multiple-but-at-least-one</a>&gt;`__）作为审阅者。</p>
<ul>
<li><p>如果设计文档很复杂或者审阅人员的日程安排有冲突，可以设置一个可选的设计审查会议。在这种情况下，</p>
<p><strong>会议之前</strong></p>
<ul class="simple">
<li><p>至少提前一周发送会议邀请</p></li>
<li><p>建议会议持续一个小时</p></li>
<li><p>会议邀请应列出审查期间需要做出的所有决策（需要包维护者批准的决策）</p></li>
<li><dl class="simple">
<dt>会议要求出席人员：设计拉取请求的审查人员</dt><dd><p>会议可选出席人员：所有OSRF工程师，如果适用的话</p>
</dd>
</dl>
</li>
</ul>
<p><strong>在会议期间</strong></p>
<ul class="simple">
<li><p>任务负责人主导会议，提出他们的想法，并管理讨论，以确保在规定时间内达成一致意见</p></li>
</ul>
<p><strong>会议之后</strong></p>
<ul class="simple">
<li><p>任务负责人应该向所有与会者发送会议纪要</p></li>
<li><p>如果有关设计的小问题被提出：</p>
<ul>
<li><p>任务所有者应根据反馈意见更新设计文档的拉取请求</p></li>
<li><p>不需要额外的审查</p></li>
</ul>
</li>
<li><p>如果有关设计方面的重大问题被提出：</p>
<ul>
<li><p>可以删除没有明确一致意见的部分，这是可以接受的</p></li>
<li><p>设计中有争议的部分可以在未来作为一个独立任务重新提交</p></li>
<li><p>如果无法移除有争议的部分，直接与包的所有者合作以达成一致</p></li>
</ul>
</li>
</ul>
</li>
<li><p>一旦达成共识：</p>
<ul class="simple">
<li><p>确保已合并`ros2/design &lt;<a class="reference external" href="https://github.com/ros2/design/">https://github.com/ros2/design/</a>&gt;`__的拉取请求（如果适用）</p></li>
<li><p>更新并关闭与此设计任务相关的 GitHub 问题</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="implementation">
<h4>实施<a class="headerlink" href="#implementation" title="永久链接至标题"></a></h4>
<p>开始之前，请参阅 <a class="reference internal" href="#pull-requests">Pull requests</a> 部分以了解最佳实践。</p>
<ul class="simple">
<li><p>对于每个需要修改的存储库：</p>
<ul>
<li><p>修改代码，完成后或定期备份工作，然后进入下一步。</p></li>
<li><p><a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Interactive-Staging">使用``git add -i``进行自我审查</a>，并将更改添加到暂存区。</p></li>
<li><p>使用``git commit -s``创建一个新的带有签名的提交。</p>
<ul>
<li><p>一个拉取请求应该包含最少的语义化的有意义的提交（例如，大量的一行提交是不可接受的）。在反馈过程中创建新的修正提交，或者根据需要使用``git commit --amend``修正现有的提交，如果你不想每次都创建新的提交。</p></li>
<li><p>每个提交必须有适当编写的、有意义的提交消息。更多说明请查看 <a class="reference external" href="https://chris.beams.io/posts/git-commit/">这里</a>。</p></li>
<li><p>将文件移动操作放在单独的提交中进行，否则 Git 可能无法准确跟踪文件的历史记录。</p></li>
<li><p>无论是拉取请求描述还是提交信息，都必须包含与相关 ros2 问题的引用，这样在合并拉取请求时会自动关闭它。有关更多详细信息，请参阅此 <a class="reference external" href="https://help.github.com/articles/closing-issues-using-keywords/">文档</a>。</p></li>
<li><p>推送新的提交。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="code-review">
<h4>代码审查。<a class="headerlink" href="#code-review" title="永久链接至标题"></a></h4>
<p>一旦修改准备好进行代码审查：</p>
<ul class="simple">
<li><p>为每个修改后的仓库打开一个拉取请求。</p>
<ul>
<li><p>记住遵循 <a class="reference internal" href="#pull-requests">拉取请求</a> 的最佳实践。</p></li>
<li><p><a class="reference external" href="https://hub.github.com/">GitHub</a> 可用于从命令行创建拉取请求。</p></li>
<li><p>如果任务计划在特定版本的ROS中发布，则应在每个拉取请求中包含此信息。</p></li>
</ul>
</li>
<li><p>应在拉取请求中提及已审查设计文档的包所有者。</p></li>
<li><p>代码审查SLO：尽管审查拉取请求是尽力而为的，但有助于评审人员在一周内对拉取请求发表评论，代码作者在一周内回复评论，以确保不会失去上下文。</p></li>
<li><p>按照通常的做法，根据反馈进行迭代，根据需要修改和更新开发分支。</p></li>
<li><p>一旦PR被批准，软件包维护人员将合并这些更改。</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="build-farm-introduction">
<h2><a class="toc-backref" href="#id21">构建农场介绍</a><a class="headerlink" href="#build-farm-introduction" title="永久链接至标题"></a></h2>
<p>构建农场位于 <a class="reference external" href="https://ci.ros2.org/">ci.ros2.org</a>。</p>
<p>每晚我们运行夜间任务，对各种场景和平台进行构建和运行所有测试。此外，在合并之前，我们还会将所有拉取请求与这些平台进行测试。</p>
<p>这是当前的目标平台和架构设置，尽管它会随时间变化而发展:</p>
<ul class="simple">
<li><p>Ubuntu 22.04 Jammy</p>
<ul>
<li><p>amd64</p></li>
<li><p>aarch64</p></li>
</ul>
</li>
<li><p>Windows 10</p>
<ul>
<li><p>amd64</p></li>
</ul>
</li>
</ul>
<p>构建农场上有几类工作：</p>
<ul class="simple">
<li><p>手动工作（由开发人员手动触发）：</p>
<ul>
<li><p>ci_linux：在Ubuntu Xenial上构建+测试代码</p></li>
<li><p>ci_linux-aarch64：在ARM 64位机器（aarch64）上的Ubuntu Xenial上构建+测试代码</p></li>
<li><p>ci_linux_coverage：构建 + 测试 + 生成测试覆盖率</p></li>
<li><p>ci_windows：在 Windows 10 上构建 + 测试代码</p></li>
<li><p>ci_launcher：触发上述所有作业</p></li>
</ul>
</li>
<li><p>每晚运行的夜间任务：</p>
<ul>
<li><p>调试：使用CMAKE_BUILD_TYPE=Debug构建和测试代码</p>
<ul>
<li><p>每夜构建（Linux平台，调试模式）</p></li>
<li><p>每夜构建（Linux平台，aarch64架构，调试模式）</p></li>
<li><p>每夜构建（Windows平台，调试模式）</p></li>
</ul>
</li>
<li><p>发布：使用CMAKE_BUILD_TYPE=Release构建和测试代码</p>
<ul>
<li><p>每夜构建：Linux平台 Release 版本</p></li>
<li><p>每夜构建：Linux（aarch64架构）平台 Release 版本</p></li>
<li><p>每夜构建：Windows平台 Release 版本</p></li>
</ul>
</li>
<li><p>重复执行：构建，然后运行每个测试最多20次或直到失败（也称为稳定性测试）</p>
<ul>
<li><p>每夜Linux重复执行</p></li>
<li><p>每夜Linux-aarch64重复执行</p></li>
<li><p>每夜Windows重复执行</p></li>
</ul>
</li>
<li><p>覆盖率：</p>
<ul>
<li><p>nightly_linux_coverage：构建 + 测试代码 + 分析 C/C++ 和 Python 的覆盖率</p>
<ul>
<li><p>结果以 Cobertura 报告的形式导出</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>打包（每晚运行；结果打包成一个归档文件）：</p>
<ul>
<li><p><a href="#id26"><span class="problematic" id="id27">打包_</span></a> Linux</p></li>
<li><p><a href="#id28"><span class="problematic" id="id29">打包_</span></a> Windows</p></li>
</ul>
</li>
</ul>
<p>通过提供源码和二进制包的构建、持续集成、测试和分析，另外两个构建农场支持 ROS / ROS 2 生态系统。</p>
<p>有关详细信息、常见问题和故障排除，请参阅：<a class="reference internal" href="Build-Farms.html"><span class="doc">构建农场</span></a>。</p>
<div class="section" id="note-on-coverage-runs">
<h3><a class="toc-backref" href="#id22">覆盖率运行注意事项</a><a class="headerlink" href="#note-on-coverage-runs" title="永久链接至标题"></a></h3>
<p>ROS 2软件包的组织方式是，给定软件包的测试代码不仅包含在该软件包内，还可以存在于其他软件包中。换句话说，在测试阶段，软件包可以执行属于其他软件包的代码。</p>
<p>为了达到ROS 2核心软件包中所有可用代码的覆盖率，建议使用一组固定的建议存储库运行构建。该集合在Jenkins中的覆盖率作业的默认参数中定义。</p>
</div>
<div class="section" id="how-to-read-the-coverage-rate-from-the-buildfarm-report">
<span id="read-coverage-report"></span><h3><a class="toc-backref" href="#id23">如何从构建工厂报告中读取覆盖率</a><a class="headerlink" href="#how-to-read-the-coverage-rate-from-the-buildfarm-report" title="永久链接至标题"></a></h3>
<p>查看给定包的覆盖率报告：</p>
<ul class="simple">
<li><p>当``ci_linux_coverage``构建完成后，点击``Coverage Report``</p></li>
<li><p>向下滚动到``Coverage Breakdown by Package``表格</p></li>
<li><p>在表格中，查看名为&quot;Name&quot;的第一列</p></li>
</ul>
<p>构建工厂中的覆盖率报告包括在ROS工作空间中使用的所有软件包。覆盖率报告包括与同一软件包对应的不同路径：</p>
<ul class="simple">
<li><p>以以下形式的名称条目: <code class="docutils literal notranslate"><span class="pre">src.*.&lt;repository_name&gt;.&lt;package_name&gt;.*</span></code>。这些对应于针对软件包自身源代码的单元测试运行</p></li>
<li><p>以以下形式的名称条目: <code class="docutils literal notranslate"><span class="pre">build.&lt;repository_name&gt;.&lt;package_name&gt;.*</span></code>。这些对应于针对构建或配置时生成的文件的软件包的单元测试运行</p></li>
<li><p>以以下形式的名称条目: <code class="docutils literal notranslate"><span class="pre">install.&lt;package_name&gt;.*</span></code>。这些对应于来自其他软件包的测试运行的系统/集成测试</p></li>
</ul>
</div>
<div class="section" id="how-to-calculate-the-coverage-rate-from-the-buildfarm-report">
<span id="calculate-coverage-rate"></span><h3><a class="toc-backref" href="#id24">如何从构建农场报告中计算覆盖率</a><a class="headerlink" href="#how-to-calculate-the-coverage-rate-from-the-buildfarm-report" title="永久链接至标题"></a></h3>
<p>使用自动脚本获取组合单元覆盖率：</p>
<blockquote>
<div><ul class="simple">
<li><p>从ci_linux_coverage Jenkins构建中复制构建的URL</p></li>
<li><p>下载 <a class="reference external" href="https://raw.githubusercontent.com/ros2/ci/master/tools/get_coverage_ros2_pkg.py">get_coverage_ros2_pkg</a> 脚本</p></li>
<li><p>执行脚本：<a href="#id1"><span class="problematic" id="id2">``</span></a>./get_coverage_ros2_pkg.py &lt;jenkins_build_url&gt; &lt;ros2_package_name&gt;``（<a class="reference external" href="https://github.com/ros2/ci/blob/master/tools/README.md">README</a>）</p></li>
<li><p>从脚本输出的&quot;Combined unit testing&quot;最后一行中获取结果</p></li>
</ul>
</div></blockquote>
<p>替代方法：从覆盖率报告中获取组合单元覆盖率（需要手动计算）：</p>
<ul class="simple">
<li><p>当ci_linux_coverage构建完成后，点击``Cobertura Coverage Report``</p></li>
<li><p>向下滚动到``Coverage Breakdown by Package``表格</p></li>
<li><p>在表格中，查找第一列“Name”下的内容（其中&lt;package_name&gt;是您正在测试的软件包）：</p>
<ul>
<li><p>在模式“src.*.&lt;repository_name&gt;.&lt;package_name&gt;.*”下的所有目录中，获取列“Lines”中的两个绝对值。</p></li>
<li><p>在模式“build/.&lt;repository_name&gt;.*”下的所有目录中，获取列“Lines”中的两个绝对值。</p></li>
</ul>
</li>
<li><p>使用上述选择：对于每个单元格，第一个值是测试的行数，第二个值是代码总行数。汇总所有行以获得测试的行数总和和正在测试的代码行数总和。进行除法运算以获取覆盖率。</p></li>
</ul>
</div>
<div class="section" id="how-to-measure-coverage-locally-using-lcov-ubuntu">
<span id="measure-coverage-locally"></span><h3><a class="toc-backref" href="#id25">如何使用 lcov（Ubuntu）在本地测量覆盖率</a><a class="headerlink" href="#how-to-measure-coverage-locally-using-lcov-ubuntu" title="永久链接至标题"></a></h3>
<p>要在自己的机器上测量覆盖率，请安装``lcov``。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install -y lcov
</pre></div>
</div>
<p>本节的其余部分假设您正在使用自己的 colcon 工作空间。使用覆盖率标志进行调试编译。可以使用 colcon 标志来针对特定的软件包。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon build --cmake-args -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DCMAKE_CXX_FLAGS<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CMAKE_CXX_FLAGS</span><span class="si">}</span><span class="s2"> --coverage&quot;</span> -DCMAKE_C_FLAGS<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CMAKE_C_FLAGS</span><span class="si">}</span><span class="s2"> --coverage&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">lcov</span></code> 需要一个初始基准，您可以使用以下命令生成。根据您的需要更新输出文件位置。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lcov --no-external --capture --initial --directory . --output-file ~/ros2_base.info
</pre></div>
</div>
<p>运行测试以获得与覆盖率测量相关的软件包。例如，如果同时测量``rclcpp``和``test_rclcpp``</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon <span class="nb">test</span> --packages-select rclcpp test_rclcpp
</pre></div>
</div>
<p>使用类似的命令捕获 lcov 结果，但这次不使用``--initial``标志。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lcov --no-external --capture --directory . --output-file ~/ros2.info
</pre></div>
</div>
<p>合并追踪的 .info 文件：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lcov --add-tracefile ~/ros2_base.info --add-tracefile ~/ros2.info --output-file ~/ros2_coverage.info
</pre></div>
</div>
<p>生成 HTML，以便轻松可视化和标注覆盖的代码行。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p coverage
genhtml ~/ros2_coverage.info --output-directory coverage
</pre></div>
</div>
</div>
</div>
</div>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Contributing.html" class="btn btn-neutral float-left" title="贡献" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="Code-Style-Language-Versions.html" class="btn btn-neutral float-right" title="代码风格和语言版本" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2023, Open Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EVD5Z6G6NH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>