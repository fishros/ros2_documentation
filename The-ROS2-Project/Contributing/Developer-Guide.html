<!DOCTYPE html>
<html class="writer-html5" lang="zh" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ROS 2开发者指南 &mdash; ROS 2 Documentation: Humble  文档</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.ros.org/en/humble/The-ROS2-Project/Contributing/Developer-Guide.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="代码风格和语言版本" href="Code-Style-Language-Versions.html" />
    <link rel="prev" title="贡献" href="../Contributing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> ROS 2 Documentation: Humble
            <img src="../../_static/humble-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Installation.html">安装</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Ubuntu-Install-Debians.html">Ubuntu (Debian)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Windows-Install-Binary.html">Windows (binary)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/RHEL-Install-RPMs.html">RHEL (RPM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Alternatives.html">Alternatives</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Development-Setup.html">Ubuntu (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Ubuntu-Install-Binary.html">Ubuntu (binary)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Windows-Development-Setup.html">Windows (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Development-Setup.html">RHEL (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/RHEL-Install-Binary.html">RHEL (binary)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/macOS-Development-Setup.html">macOS (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Fedora-Development-Setup.html">Fedora (source)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/Alternatives/Latest-Development-Setup.html">Latest development (source)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Maintaining-a-Source-Checkout.html">Maintain source checkout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/Testing.html">Testing with pre-release binaries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Installation/DDS-Implementations.html">DDS implementations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Connext security plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Install-Connext-University-Eval.html">RTI Connext DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Eclipse Cyclone DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">GurumNetworks GurumDDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">eProsima Fast DDS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Releases.html">Distributions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Iron-Irwini.html">Iron Irwini (<code class="docutils literal notranslate"><span class="pre">iron</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Iron-Irwini-Complete-Changelog.html">Iron Irwini Changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Humble-Hawksbill.html">Humble Hawksbill (<code class="docutils literal notranslate"><span class="pre">humble</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Humble-Hawksbill-Complete-Changelog.html">Humble Hawksbill changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Foxy-Fitzroy.html">Foxy Fitzroy (<code class="docutils literal notranslate"><span class="pre">foxy</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Rolling-Ridley.html">Rolling Ridley (<code class="docutils literal notranslate"><span class="pre">rolling</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Development.html">Development Distribution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Jazzy-Jalisco.html">Jazzy Jalisco (codename 'jazzy'; May, 2024)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/End-of-Life.html">End-of-Life Distributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Galactic-Geochelone.html">Galactic Geochelone (<code class="docutils literal notranslate"><span class="pre">galactic</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Releases/Galactic-Geochelone-Complete-Changelog.html">Galactic Geochelone changelog</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Eloquent-Elusor.html">Eloquent Elusor (<code class="docutils literal notranslate"><span class="pre">eloquent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Dashing-Diademata.html">Dashing Diademata (<code class="docutils literal notranslate"><span class="pre">dashing</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Crystal-Clemmys.html">Crystal Clemmys (<code class="docutils literal notranslate"><span class="pre">crystal</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Bouncy-Bolson.html">Bouncy Bolson (<code class="docutils literal notranslate"><span class="pre">bouncy</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Release-Ardent-Apalone.html">Ardent Apalone (<code class="docutils literal notranslate"><span class="pre">ardent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta3-Overview.html">Beta 3 (<code class="docutils literal notranslate"><span class="pre">r2b3</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta2-Overview.html">Beta 2 (<code class="docutils literal notranslate"><span class="pre">r2b2</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Beta1-Overview.html">Beta 1 (<code class="docutils literal notranslate"><span class="pre">Asphalt</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Releases/Alpha-Overview.html">Alphas</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Releases/Release-Process.html">Development process for a release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools.html">Beginner: CLI tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">Configuring environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html">Using <code class="docutils literal notranslate"><span class="pre">turtlesim</span></code>, <code class="docutils literal notranslate"><span class="pre">ros2</span></code>, and <code class="docutils literal notranslate"><span class="pre">rqt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">Understanding nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">Understanding topics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">Understanding services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">Understanding parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">Understanding actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">Using <code class="docutils literal notranslate"><span class="pre">rqt_console</span></code> to view logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">Launching nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">Recording and playing back data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries.html">Beginner: Client libraries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html">Using <code class="docutils literal notranslate"><span class="pre">colcon</span></code> to build packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html">Creating a workspace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">创建软件包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html">Writing a simple publisher and subscriber (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html">Writing a simple service and client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html">Writing a simple service and client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html">Creating custom msg and srv files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html">Implementing custom interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-CPP.html">Using parameters in a class (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html">Using parameters in a class (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Getting-Started-With-Ros2doctor.html">Using <code class="docutils literal notranslate"><span class="pre">ros2doctor</span></code> to identify issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Pluginlib.html">Creating and using plugins (C++)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Intermediate.html">Intermediate</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Rosdep.html">Managing Dependencies with rosdep</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Creating-an-Action.html">Creating an action</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Writing-an-Action-Server-Client/Cpp.html">Writing an action server and client (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Writing-an-Action-Server-Client/Py.html">Writing an action server and client (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Composition.html">Composing multiple nodes in a single process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Monitoring-For-Parameter-Changes-CPP.html">Monitoring for parameter changes (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Launch-Main.html">Launch</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Creating-Launch-Files.html">Creating a launch file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Launch-system.html">Integrating launch files into ROS 2 packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-Substitutions.html">Using substitutions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-Event-Handlers.html">Using event handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Launch/Using-ROS2-Launch-For-Large-Projects.html">Managing large projects</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Tf2-Main.html"><code class="docutils literal notranslate"><span class="pre">tf2</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Introduction-To-Tf2.html">Introducing <code class="docutils literal notranslate"><span class="pre">tf2</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">Writing a static broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">Writing a static broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Py.html">Writing a broadcaster (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">Writing a broadcaster (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Py.html">Writing a listener (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Cpp.html">Writing a listener (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Adding-A-Frame-Py.html">Adding a frame (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Adding-A-Frame-Cpp.html">Adding a frame (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Py.html">Using time (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Cpp.html">Using time (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Py.html">Traveling in time (Python)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Cpp.html">Traveling in time (C++)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Debugging-Tf2-Problems.html">Debugging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Quaternion-Fundamentals.html">Quaternion fundamentals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">Using stamped datatypes with <code class="docutils literal notranslate"><span class="pre">tf2_ros::MessageFilter</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Testing-Main.html">测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/CLI.html">Running Tests in ROS 2 from the Command Line</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Cpp.html">Writing Basic Tests with C++ with GTest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/Testing/Python.html">Writing Basic Tests with Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/URDF-Main.html">URDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">Building a visual robot model from scratch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF.html">Building a movable robot model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">Adding physical and collision properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">Using Xacro to clean up your code</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Intermediate/URDF/Using-URDF-with-Robot-State-Publisher.html">Using URDF with <code class="docutils literal notranslate"><span class="pre">robot_state_publisher</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Advanced.html">Advanced</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html">Enabling topic statistics (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Discovery-Server/Discovery-Server.html">Using Fast DDS Discovery Server as discovery protocol [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Allocator-Template-Tutorial.html">Implementing a custom memory allocator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/FastDDS-Configuration.html">Unlocking the potential of Fast DDS middleware [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-CPP.html">Recording a bag from a node (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-Py.html">Recording a bag from a node (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Simulation-Main.html">Simulators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Simulation-Webots.html">Webots</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Installation-Ubuntu.html">Installation (Ubuntu)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Installation-Windows.html">Installation (Windows)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Installation-MacOS.html">Installation (macOS)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Basic.html">Setting up a robot simulation (Basic)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Advanced.html">Setting up a robot simulation (Advanced)</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Gazebo/Simulation-Gazebo.html">Gazebo</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../Tutorials/Advanced/Simulators/Gazebo/Gazebo.html">Setting up a robot simulation (Gazebo)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Advanced/Security/Security-Main.html">Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Introducing-ros2-security.html">Setting up security</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/The-Keystore.html">Understanding the security keystore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Security-on-Two.html">Ensuring security across machines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Examine-Traffic.html">Examining network traffic</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Access-Controls.html">Setting access controls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../Tutorials/Advanced/Security/Deployment-Guidelines.html">Deployment Guidelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Demos.html">Demos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Quality-of-Service.html">Using quality-of-service settings for lossy networks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Managed-Nodes.html">Managing nodes with managed lifecycles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Intra-Process-Communication.html">Setting up efficient intra-process communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Rosbag-with-ROS1-Bridge.html">Recording and playing back data with <code class="docutils literal notranslate"><span class="pre">rosbag</span></code> using the ROS 1 bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Real-Time-Programming.html">Understanding real-time programming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/dummy-robot-demo.html">Experimenting with a dummy robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Logging-and-logger-configuration.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Demos/Content-Filtering-Subscription.html">Creating a content filtering subscription</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Tutorials/Miscellaneous.html">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html">Deploying on IBM Cloud Kubernetes [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Eclipse-Oxygen-with-ROS-2-and-rviz2.html">Using Eclipse Oxygen with <code class="docutils literal notranslate"><span class="pre">rviz2</span></code> [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Building-Realtime-rt_preempt-kernel-for-ROS-2.html">Building a real-time Linux kernel [community-contributed]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Tutorials/Miscellaneous/Building-ROS2-Package-with-eclipse-2021-06.html">Building a package with Eclipse 2021-06</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../How-To-Guides.html">如何指南</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installation-Troubleshooting.html">安装故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Developing-a-ROS-2-Package.html">开发ROS 2软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Documentation.html">ament_cmake 用户文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Ament-CMake-Python-Documentation.html">ament_cmake_python 用户文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-files-migration-guide.html">将启动文件从ROS 1迁移到ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launch-file-different-formats.html">使用 Python、XML 和 YAML 编写 ROS 2 启动文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Launching-composable-nodes.html">使用ROS 2 launch启动可组合节点</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Parameters-YAML-files-migration-guide.html">将YAML参数文件从ROS 1迁移到ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Node-arguments.html">通过命令行向节点传递ROS参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Sync-Vs-Async.html">同步与异步服务客户端</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/DDS-tuning.html">DDS调优信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2：覆盖 QoS 策略</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Working-with-multiple-RMW-implementations.html">使用多个ROS 2中间件实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Cross-compilation.html">交叉编译</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Releasing/Releasing-a-Package.html">发布软件包</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/First-Time-Release.html">首次发布</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Subsequent-Releases.html">后续发布</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Team-Repository.html">发布团队/仓库</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/Releasing/Release-Track.html">发布跟踪</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Python-Packages.html">在ROS 2中使用Python包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Port-Plugin-Windows.html">将RQt插件移植到Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html">在 Docker 中运行 ROS 2 节点[社区贡献]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Visualizing-ROS-2-Data-With-Foxglove-Studio.html">使用Foxglove Studio可视化ROS 2数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Package-maintainer-guide.html">ROS 2软件包维护人员指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-a-Custom-Debian-Package.html">构建自定义的Debian软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Building-ROS-2-with-Tracing-Instrumentation.html">使用跟踪工具构建ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Topics-Services-Actions.html">主题 vs 服务 vs 动作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-Variants.html">使用变体</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros2-param.html">使用``ros2 param``命令行工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-ros1_bridge-Jammy-upstream.html">在Ubuntu 22.04上使用``ros1_bridge``和上游ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Disabling-ZeroCopy-loaned-messages.html">禁用零拷贝借用消息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Installing-on-Raspberry-Pi.html">在 Raspberry Pi 上的 ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Using-callback-groups.html">使用回调组</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/Setup-ROS-2-with-VSCode-and-Docker-Container.html">使用VSCode和Docker设置ROS 2 [社区贡献]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install.html">从源代码构建 RQt</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-MacOS.html">在 macOS 上从源代码构建 RQt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../How-To-Guides/RQt-Source-Install-Windows10.html">在 Windows 10 上从源代码构建 RQt</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Concepts.html">Concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Domain-ID.html">The ROS_DOMAIN_ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Different-Middleware-Vendors.html">About different ROS 2 DDS/RTPS vendors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Logging.html">About logging and logger configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Quality-of-Service-Settings.html">About Quality of Service settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Client-Libraries.html">About ROS 2 client libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-Interfaces.html">About ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Parameters.html">About parameters in ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Executors.html">Executors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Topic-Statistics.html">About topic statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Command-Line-Tools.html">Introspection with command line tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-RQt.html">Overview and usage of RQt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Composition.html">About Composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Catment.html">On the mixing of ament and catkin (catment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Cross-Compilation.html">About Cross-compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Security.html">About ROS 2 Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Tf2.html">About tf2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Build-System.html">About the build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Internal-Interfaces.html">About internal ROS 2 interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-Middleware-Implementations.html">About ROS 2 middleware implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Concepts/About-ROS-2-Client-Libraries.html">About ROS 2 client libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Contact.html">Contact</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../The-ROS2-Project.html">ROS 2 项目</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../Contributing.html">贡献</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">ROS 2开发者指南</a></li>
<li class="toctree-l3"><a class="reference internal" href="Code-Style-Language-Versions.html">代码风格和语言版本</a></li>
<li class="toctree-l3"><a class="reference internal" href="Quality-Guide.html">Quality guide: ensuring code quality</a></li>
<li class="toctree-l3"><a class="reference internal" href="Migration-Guide.html">Migration guide from ROS 1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Migration-Guide-Python.html">Python migration guide from ROS 1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Build-Farms.html">ROS构建农场</a></li>
<li class="toctree-l3"><a class="reference internal" href="Windows-Tips-and-Tricks.html">Windows Tips and Tricks</a></li>
<li class="toctree-l3"><a class="reference internal" href="Contributing-To-ROS-2-Documentation.html">为ROS 2文档做出贡献</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Features.html">Features Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Feature-Ideas.html">Feature Ideas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Roadmap.html">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ROSCon-Content.html">ROSCon Talks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Governance.html">Project Governance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Governance/ROS2-TSC-Charter.html">ROS 2 Technical Steering Committee Charter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Governance/ROS2-TSC-Intake-process.html">ROS 2 TSC applicant intake process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Governance/How-To-Start-A-Community-Working-Group.html">How to Start a Community Working Group</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Marketing.html">Marketing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../API-Docs.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Related-Projects.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Intel-ROS2-Projects.html">Intel ROS 2 Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Related-Projects/Nvidia-ROS2-Projects.html">NVIDIA ROS 2 Projects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Citations.html">Citations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS 2 Documentation: Humble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../The-ROS2-Project.html">ROS 2 项目</a> &raquo;</li>
          <li><a href="../Contributing.html">贡献</a> &raquo;</li>
      <li>ROS 2开发者指南</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/humble/source/The-ROS2-Project/Contributing/Developer-Guide.rst" class="fa fa-github"> 在 GitHub 上修改</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <div class="section" id="ros-2-developer-guide">
<h1>ROS 2开发者指南<a class="headerlink" href="#ros-2-developer-guide" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#general-principles" id="id2">一般原则</a></p></li>
<li><p><a class="reference internal" href="#quality-practices" id="id3">质量实践</a></p>
<ul>
<li><p><a class="reference internal" href="#versioning" id="id4">版本管理</a></p></li>
<li><p><a class="reference internal" href="#change-control-process" id="id5">变更控制流程</a></p></li>
<li><p><a class="reference internal" href="#documentation" id="id6">文档</a></p></li>
<li><p><a class="reference internal" href="#testing" id="id7">测试</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#general-practices" id="id8">一般实践</a></p>
<ul>
<li><p><a class="reference internal" href="#issues" id="id9">Issues</a></p></li>
<li><p><a class="reference internal" href="#branches" id="id10">Branches</a></p></li>
<li><p><a class="reference internal" href="#pull-requests" id="id11">Pull requests</a></p></li>
<li><p><a class="reference internal" href="#library-versioning" id="id12">Library versioning</a></p></li>
<li><p><a class="reference internal" href="#development-process" id="id13">Development process</a></p></li>
<li><p><a class="reference internal" href="#changes-to-rmw-api" id="id14">Changes to RMW API</a></p></li>
<li><p><a class="reference internal" href="#tracking-tasks" id="id15">Tracking tasks</a></p></li>
<li><p><a class="reference internal" href="#programming-conventions" id="id16">Programming conventions</a></p></li>
<li><p><a class="reference internal" href="#filesystem-layout" id="id17">Filesystem layout</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#developer-workflow" id="id18">Developer Workflow</a></p></li>
<li><p><a class="reference internal" href="#architectural-development-practices" id="id19">Architectural Development Practices</a></p>
<ul>
<li><p><a class="reference internal" href="#software-development-lifecycle" id="id20">Software Development Lifecycle</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#build-farm-introduction" id="id21">Build Farm Introduction</a></p>
<ul>
<li><p><a class="reference internal" href="#note-on-coverage-runs" id="id22">Note on Coverage runs</a></p></li>
<li><p><a class="reference internal" href="#how-to-read-the-coverage-rate-from-the-buildfarm-report" id="id23">How to read the coverage rate from the buildfarm report</a></p></li>
<li><p><a class="reference internal" href="#how-to-calculate-the-coverage-rate-from-the-buildfarm-report" id="id24">How to calculate the coverage rate from the buildfarm report</a></p></li>
<li><p><a class="reference internal" href="#how-to-measure-coverage-locally-using-lcov-ubuntu" id="id25">How to measure coverage locally using lcov (Ubuntu)</a></p></li>
</ul>
</li>
</ul>
</div>
<p>这个页面定义了我们在开发ROS 2时采用的实践和策略。</p>
<div class="section" id="general-principles">
<h2><a class="toc-backref" href="#id2">一般原则</a><a class="headerlink" href="#general-principles" title="永久链接至标题"></a></h2>
<p>以下原则适用于所有ROS 2的开发：</p>
<ul class="simple">
<li><p><strong>共享所有权</strong>：每个参与ROS 2开发的人都应该对系统的所有部分有所所有感。代码的原始作者没有特殊的权限或义务来控制或维护该代码块。每个人都可以自由地在任何地方提出更改、处理任何类型的问题票和审核任何拉取请求。</p></li>
<li><p><strong>愿意做任何工作</strong>：作为共享所有权的必然结果，每个人都应该愿意承担任何可用的任务，并为系统的任何方面做出贡献。</p></li>
<li><p><strong>寻求帮助</strong>：如果在某个任务上遇到困难，请适当地通过工单、评论或电子邮件向你的开发同事寻求帮助。</p></li>
</ul>
</div>
<div class="section" id="quality-practices">
<h2><a class="toc-backref" href="#id3">质量实践</a><a class="headerlink" href="#quality-practices" title="永久链接至标题"></a></h2>
<p>根据它们所遵循的开发实践，软件包可以根据不同的质量水平进行分类，根据《REP 2004：软件包质量分类指南 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-2004.html">https://www.ros.org/reps/rep-2004.html</a>&gt;》中的准则进行分类。这些分类根据版本管理、测试、文档编写等方面的策略进行区分。</p>
<p>以下部分是我们遵循的特定开发规则，以确保核心软件包具有最高质量（“一级”）。我们建议所有ROS开发人员努力遵守以下政策，以确保ROS生态系统的质量。</p>
<div class="section" id="versioning">
<span id="semver"></span><h3><a class="toc-backref" href="#id4">版本管理</a><a class="headerlink" href="#versioning" title="永久链接至标题"></a></h3>
<p>我们将使用`语义化版本指南 &lt;<a class="reference external" href="http://semver.org/">http://semver.org/</a>&gt;`__（<code class="docutils literal notranslate"><span class="pre">semver</span></code>）进行版本管理。</p>
<p>我们还将遵守一些基于``semver``的ROS特定规则，这些规则是在``semver``完整意义上建立的。</p>
<ul class="simple">
<li><p>不应该在已发布的ROS发行版中进行主要版本增加（即破坏性变更）</p>
<ul>
<li><p>补丁（保持接口兼容）和次要（非破坏性）版本增加不会破坏兼容性，因此此类更改*允许*在发布中进行</p></li>
<li><p>主要ROS版本是发布破坏性变更的最佳时机。如果核心包需要多个破坏性变更，则应将它们合并到集成分支（例如rolling）中，以便快速在CI中发现问题，但同时发布以减少ROS用户的主要发布数量</p></li>
<li><p>尽管主要增量需要新的发行版，但新的发行版并不一定需要进行主要更新（如果开发和发布可以在不破坏API的情况下进行）</p></li>
</ul>
</li>
<li><p>对于编译代码，ABI（应用二进制接口）被视为公共接口的一部分。任何需要重新编译依赖代码的更改都被视为主要更改（破坏性的）</p>
<ul>
<li><p>ABI破坏性更改可以在次要版本升级之前（加入滚动发布）进行</p></li>
</ul>
</li>
<li><p>尽管 Dashing 和 Eloquent 的主要版本组件为``0``，我们仍对核心包的API稳定性进行强制执行，尽管 <a class="reference external" href="https://semver.org/#spec-item-4">SemVer 规范</a> 中有关初始开发的规定</p>
<ul>
<li><p>随后，软件包应努力达到成熟状态并增加到版本``1.0.0``以符合``semver``的规范</p></li>
</ul>
</li>
</ul>
<div class="section" id="caveats">
<h4>注意事项<a class="headerlink" href="#caveats" title="永久链接至标题"></a></h4>
<p>这些规则是*尽力而为*的。在极端情况下，可能需要在一个主要版本/发布中打破API的兼容性。对于非计划中的兼容性断裂，是将主版本号还是次版本号增加将根据具体情况进行评估。</p>
<p>例如，考虑一个涉及发布的 X-turtle 和对应的主版本号为``1.0.0``的 Y-turtle 的情况。</p>
<p>如果在 X-turtle 中发现必须打破API兼容性的问题，显然不能选择升级到``2.0.0``，因为``2.0.0``已经存在。</p>
<p>在这种情况下处理X-turtle版本的解决方案，都是非理想的，包括：</p>
<ol class="arabic simple">
<li><p>增加X-turtle的次要版本：非理想，因为它违反了语义化版本规范（SemVer）中破坏性变更必须增加主要版本的原则。</p></li>
<li><p>将X-turtle的主要版本升级到超过Y-turtle（<code class="docutils literal notranslate"><span class="pre">3.0.0</span></code>）：非理想，因为旧发行版的版本将会高于已有的新发行版版本，这将使得特定版本条件代码失效/破坏。</p></li>
</ol>
<p>开发人员将需要决定使用哪种解决方案，或者更重要的是，他们愿意违背哪个原则。我们不能建议选用其中一种，但无论哪种情况，我们都要求采取明确的措施手动向用户传达中断情况及其解释（不仅仅是版本号的增加）。</p>
<p>如果没有 Y-turtle，即使修复只是一个补丁，X-turtle 也必须升级到 <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code>。这种情况符合 SemVer 规则，但违反了我们自己的规定，即在发布的分发版中不应引入主要增量。</p>
<p>这就是为什么我们将版本规则视为“尽力而为”。尽管上述例子不太可能出现，但准确定义我们的版本系统非常重要。</p>
</div>
<div class="section" id="public-api-declaration">
<h4>公共 API 声明<a class="headerlink" href="#public-api-declaration" title="永久链接至标题"></a></h4>
<p>根据 <code class="docutils literal notranslate"><span class="pre">semver</span></code>，每个软件包必须明确声明一个公共 API。我们将使用软件包的质量声明中的“公共 API 声明”部分来声明哪些符号是公共 API 的一部分。</p>
<p>对于大多数 C 和 C++ 包，声明是其安装的任何头文件。然而，定义一组被视为私有的符号也是可以接受的。在头文件中避免私有符号可以帮助实现 ABI 的稳定性，但并非必需。</p>
<p>对于其他语言如 Python，必须明确定义公共 API，以便清楚地知道哪些符号可以依赖于版本指南。公共 API 还可以扩展到构建工件，如配置变量、CMake 配置文件等，以及可执行文件、命令行选项和输出。包的文档应清楚地说明公共 API 的任何元素。如果你使用的内容在包的文档中没有明确列出作为公共 API 的一部分，那么你不能指望它在次要或修补版本之间不发生变化。</p>
</div>
<div class="section" id="deprecation-strategy">
<h4>废弃策略<a class="headerlink" href="#deprecation-strategy" title="永久链接至标题"></a></h4>
<p>在可能的情况下，我们还将使用主要版本增量的滴答滴答废弃和迁移策略。新的废弃将在新的发行版中提出，伴随着编译器警告，表示该功能正在被废弃。在下一个发布中，该功能将被完全移除（不再有警告）。</p>
<p>示例函数 <code class="docutils literal notranslate"><span class="pre">foo</span></code> 已弃用，并被函数 <code class="docutils literal notranslate"><span class="pre">bar</span></code> 替代：</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>版本</p></th>
<th class="head"><p>API</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>X-turtle</p></td>
<td><p>void foo();</p></td>
</tr>
<tr class="row-odd"><td><p>Y-龟</p></td>
<td><p>[[已弃用(&quot;使用bar()&quot;)]] void foo(); &lt;br&gt; void bar();</p></td>
</tr>
<tr class="row-even"><td><p>Z-龟</p></td>
<td><p>void bar();</p></td>
</tr>
</tbody>
</table>
<p>在发行版发布之后，我们不能添加废弃项。然而，废弃项不一定需要引发主要版本的升级。如果在发行版发布之前进行次要版本的升级，就可以引入废弃项（类似于破坏ABI的更改）。</p>
<p>例如，如果X-turtle作为``2.0.0``开始开发，可以在X-turtle发布之前的``2.1.0``中添加废弃项。</p>
<p>我们将尽可能在不同发行版之间保持兼容性。然而，与语义化版本控制（SemVer）相关的注意事项一样，特定情况下可能无法完全遵守打勾或废弃项。</p>
</div>
</div>
<div class="section" id="change-control-process">
<h3><a class="toc-backref" href="#id5">变更控制流程</a><a class="headerlink" href="#change-control-process" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>所有更改都必须通过拉取请求进行。</p></li>
<li><p>我们将在ROSCore仓库的拉取请求中执行`开发者证书 (DCO) &lt;<a class="reference external" href="https://developercertificate.org/">https://developercertificate.org/</a>&gt;`_ 的强制要求。</p>
<ul>
<li><p>它要求所有提交消息都包含与提交作者相匹配的``Signed-off-by``行及其电子邮件地址。</p></li>
<li><p>您可以在``git commit``命令中添加``-s`` / <code class="docutils literal notranslate"><span class="pre">--signoff``参数或手动编写所需的消息（例如：``Signed-off-by:</span> <span class="pre">Your</span> <span class="pre">Name</span> <span class="pre">Developer</span> <span class="pre">&lt;your.name&#64;example.com&gt;</span></code>）。</p></li>
<li><p>只涉及空格删除、拼写错误更正和其他 <a class="reference external" href="http://cr.openjdk.java.net/~jrose/draft/trivial-fixes.html">微小更改</a> 的拉取请求，不需要DCO。</p></li>
</ul>
</li>
<li><p>对于每个拉取请求，始终在所有 <a class="reference external" href="https://www.ros.org/reps/rep-2000.html#support-tiers">一级支持平台</a> 上运行CI作业，并在拉取请求中包含作业链接。（如果您无权访问Jenkins作业，将有人为您触发作业。）</p></li>
<li><p>需要至少来自未参与拉取请求撰写的其他开发人员的1个批准才能被视为已批准。在合并之前需要批准。</p>
<ul>
<li><p>软件包可以选择增加此数字。</p></li>
</ul>
</li>
<li><p>在合并相关更改之前，必须先提出对文档（API文档、功能文档、发布说明等）所需的任何更改。</p></li>
</ul>
<div class="section" id="guidelines-for-backporting-prs">
<h4>关于回溯拉取请求的准则<a class="headerlink" href="#guidelines-for-backporting-prs" title="永久链接至标题"></a></h4>
<p>在更改较旧版本的ROS时：</p>
<ul class="simple">
<li><p>确保在向较旧版本回溯更改的拉取请求之前，这些功能或修复已被接受并合并到滚动分支中。</p></li>
<li><p>当将代码回溯到较旧的版本时，还要考虑回溯到任何其他 <a class="reference internal" href="../../Releases.html"><span class="doc">仍受支持的版本</span></a>，甚至非LTS版本。</p></li>
<li><p>如果您要完整地回溯单个PR，请将回溯PR的标题命名为&quot;[Distro] &lt;原始PR的名称&gt;&quot;。如果从一个或多个PR回溯部分更改，则标题应为&quot;[Distro] &lt;更改的描述&gt;&quot;。</p></li>
<li><p>在回溯PR的描述中链接到您回溯更改的所有PR。在将Foxy更改回溯到Dashing时，您不需要链接到同一更改的Eloquent回溯。</p></li>
</ul>
</div>
</div>
<div class="section" id="documentation">
<h3><a class="toc-backref" href="#id6">文档</a><a class="headerlink" href="#documentation" title="永久链接至标题"></a></h3>
<p>所有的软件包都应该在其README中包含或从其README中链接到以下文档元素：</p>
<ul class="simple">
<li><p>描述和目的</p></li>
<li><p>公共API的定义和描述</p></li>
<li><p>示例</p></li>
<li><p>如何构建和安装（应该引用外部工具/工作流程）</p></li>
<li><p>如何构建和运行测试</p></li>
<li><p>如何构建文档</p></li>
<li><p>如何进行开发（对于描述诸如``python setup.py develop``之类的内容很有用）</p></li>
<li><p>许可证和版权声明</p></li>
</ul>
<p>每个源文件必须有一个许可证和版权声明，通过自动化检查工具进行检查。</p>
<p>每个软件包必须有一个LICENSE文件，通常是Apache 2.0许可证，除非该软件包有现有的宽松许可证（例如，rviz使用三条款的BSD许可证）。</p>
<p>每个软件包应该对自身和其目的进行描述，尽量假设读者没有关于ROS或其他相关项目的先前知识而意外发现该软件包。</p>
<p>每个软件包应该定义和描述其公共API，以便用户可以合理地预期语义版本控制政策所覆盖的内容。即使在C和C++中，公共API可以通过API和ABI检查来强制执行，这也是一个很好的机会来描述代码的结构和每个部分的功能。</p>
<p>理应很容易通过任何软件包的文档了解如何构建、运行、构建并运行测试，并构建文档。显然，我们应该避免在常见工作流程中重复自己，比如在工作空间中构建软件包，但基本工作流程应该被描述或引用。</p>
<p>最后，它应该包含开发者的任何文档。这可能包括使用类似 <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></code> 的方法测试代码的工作流程，或者可能意味着描述如何利用软件包提供的扩展点。</p>
<p>示例：</p>
<ul class="simple">
<li><p>功能：<a class="reference external" href="https://docs.ros.org/hydro/api/capabilities/html/">https://docs.ros.org/hydro/api/capabilities/html/</a></p>
<ul>
<li><p>这个例子展示了描述公共API的文档</p></li>
</ul>
</li>
<li><p>catkin_tools：<a class="reference external" href="https://catkin-tools.readthedocs.org/en/latest/development/extending_the_catkin_command.html">https://catkin-tools.readthedocs.org/en/latest/development/extending_the_catkin_command.html</a></p>
<ul>
<li><p>这是描述软件包扩展点的示例</p></li>
</ul>
</li>
</ul>
<p>（API文档尚未自动生成）</p>
</div>
<div class="section" id="testing">
<h3><a class="toc-backref" href="#id7">测试</a><a class="headerlink" href="#testing" title="永久链接至标题"></a></h3>
<p>所有的软件包都应该具备一定程度的 <a class="reference internal" href="../../Tutorials/Intermediate/Testing/Testing-Main.html#testingmain"><span class="std std-ref">系统测试、集成测试和/或单元测试。</span></a></p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>单元测试**应该始终位于被测试的软件包中，并且应该使用诸如``Mock``之类的工具，尝试在构建的场景中测试代码库的狭窄部分。单元测试不应引入非测试工具的测试依赖，例如 gtest、nosestest、pytest、mock 等...</p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>集成测试**可以测试代码的各个部分之间或代码与系统之间的交互。它们通常以我们期望用户使用它们的方式测试软件接口。与单元测试类似，集成测试应该位于被测试的软件包中，除非绝对必要，否则不应引入非工具测试依赖，即所有非工具依赖都应在极端审查下才被允许，因此应尽量避免使用。</p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>系统测试**旨在测试软件包之间的端到端情况，并应位于它们自己的软件包中，以避免软件包膨胀或耦合以及避免循环依赖。</p>
<p>通常情况下，应尽量减少外部或跨包的测试依赖，以避免循环依赖和紧密耦合的测试包。</p>
<p>所有的包都应该有一些单元测试和可能的集成测试，但其数量取决于包的质量分类。以下小节适用于“Level 1”包：</p>
<div class="section" id="code-coverage">
<h4>代码覆盖率<a class="headerlink" href="#code-coverage" title="永久链接至标题"></a></h4>
<p>我们将提供行覆盖率，并保证行覆盖率达到95%以上。如果有合理降低百分比目标的情况，必须明确记录。我们可以提供分支覆盖率，或者将某些代码排除在覆盖率之外（测试代码、调试代码等）。在合并更改之前，我们要求覆盖率要增加或保持不变，但在适当的理由下，可能会接受降低代码覆盖率的更改（例如，删除以前覆盖的代码可能会导致百分比下降）。</p>
</div>
<div class="section" id="performance">
<h4>性能<a class="headerlink" href="#performance" title="永久链接至标题"></a></h4>
<p>我们强烈建议进行性能测试，但我们也认识到对于某些软件包来说，这并没有意义。如果有性能测试，我们将选择在每次更改或发布之前进行检查，或者两者都要进行。我们还需要对降低性能的更改或发布进行合并的理由。</p>
</div>
<div class="section" id="linters-and-static-analysis">
<h4>代码检查器和静态分析<a class="headerlink" href="#linters-and-static-analysis" title="永久链接至标题"></a></h4>
<p>我们将使用:doc:<a class="reference internal" href="Code-Style-Language-Versions.html"><span class="doc">ROS代码风格</span></a>，并使用来自`ament_lint_common&lt;<a class="reference external" href="https://github.com/ament/ament_lint/tree/humble/ament_lint_common/doc/index.rst">https://github.com/ament/ament_lint/tree/humble/ament_lint_common/doc/index.rst</a>&gt;`_的代码检查器来强制执行。必须使用`ament_lint_common`的所有代码检查器和静态分析工具。</p>
<p><code class="docutils literal notranslate"><span class="pre">ament_lint_auto</span></code> 文档提供了关于运行 <code class="docutils literal notranslate"><span class="pre">ament_lint_common</span></code> 的信息。</p>
</div>
</div>
</div>
<div class="section" id="general-practices">
<h2><a class="toc-backref" href="#id8">一般实践</a><a class="headerlink" href="#general-practices" title="永久链接至标题"></a></h2>
<p>一些实践适用于所有 ROS 2 开发。</p>
<p>这些实践不会影响软件包质量等级（如 <a class="reference external" href="https://www.ros.org/reps/rep-2004.html">REP 2004</a> 中所述），但在开发过程中仍然强烈推荐。</p>
<div class="section" id="issues">
<h3><a class="toc-backref" href="#id9">Issues</a><a class="headerlink" href="#issues" title="永久链接至标题"></a></h3>
<p>When filing an issue please make sure to:</p>
<ul class="simple">
<li><p>Include enough information for another person to understand the issue.
In ROS 2, the following points are needed for narrowing down the cause of an issue.
Testing with as many alternatives in each category as feasible will be especially helpful.</p>
<ul>
<li><p><strong>The operating system and version.</strong>
Reasoning: ROS 2 supports multiple platforms, and some bugs are specific to particular versions of operating systems/compilers.</p></li>
<li><p><strong>The installation method.</strong>
Reasoning: Some issues only manifest if ROS 2 has been installed from &quot;fat archives&quot; or from Debians.
This can help us determine if the issue is with the packaging process.</p></li>
<li><p><strong>The specific version of ROS 2.</strong>
Reasoning: Some bugs may be present in a particular ROS 2 release and later fixed.
It is important to know if your installation includes these fixes.</p></li>
<li><p><strong>The DDS/RMW implementation being used</strong> (see <a class="reference internal" href="../../Concepts/About-Different-Middleware-Vendors.html"><span class="doc">this page</span></a> for how to determine which one).
Reasoning: Communication issues may be specific to the underlying ROS middleware being used.</p></li>
<li><p><strong>The ROS 2 client library being used.</strong>
Reasoning: This helps us narrow down the layer in the stack at which the issue might be.</p></li>
</ul>
</li>
<li><p>Include a list of steps to reproduce the issue.</p></li>
<li><p>In case of a bug consider to provide a <a class="reference external" href="http://sscce.org/">short, self contained, correct (compilable), example</a>.
Issues are much more likely to be resolved if others can reproduce them easily.</p></li>
<li><p>Mention troubleshooting steps that have been tried already, including:</p>
<ul>
<li><p>Upgrading to the latest version of the code, which may include bug fixes that have not been released yet.
See <a class="reference internal" href="../../Installation.html#building-from-source"><span class="std std-ref">this section</span></a> and follow the instructions to get the &quot;rolling&quot; branches.</p></li>
<li><p>Trying with a different RMW implementation.
See <a class="reference internal" href="../../How-To-Guides/Working-with-multiple-RMW-implementations.html"><span class="doc">this page</span></a> for how to do that.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="branches">
<h3><a class="toc-backref" href="#id10">Branches</a><a class="headerlink" href="#branches" title="永久链接至标题"></a></h3>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>These are just guidelines.
It is up to the package maintainer to choose branch names that match their own workflow.</p>
</div>
<p>It is good practice to have <strong>separate branches</strong> in a package's source repository for each ROS distribution it is targeting.
These branches are typically named after the distribution they target.
For example, a <code class="docutils literal notranslate"><span class="pre">humble</span></code> branch for development targeted specifically at the Humble distribution.</p>
<p>Releases are also made from these branches, targeting the appropriate distribution.
Development targeted at a specific ROS distribution can happen on the appropriate branch.
For example: Development commits targeting <code class="docutils literal notranslate"><span class="pre">foxy</span></code> are made to the <code class="docutils literal notranslate"><span class="pre">foxy</span></code> branch, and package releases for <code class="docutils literal notranslate"><span class="pre">foxy</span></code> are made from that same branch.</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>This requires the package maintainers to perform backports or forwardports as appropriate to keep all branches up to date with features.
The maintainers must also perform general maintenance (bug fixes, etc.) on all branches from which package releases are still made.</p>
<p>For example, if a feature is merged into the Rolling-specific branch (e.g. <code class="docutils literal notranslate"><span class="pre">rolling</span></code> or <code class="docutils literal notranslate"><span class="pre">main</span></code>), and that feature is also appropriate
to the Humble distribution (does not break API, etc.), then it is good practice to backport the feature to the Humble-specific branch.</p>
<p>The maintainers may make releases for those older distributions if there are new features or bug fixes available.</p>
</div>
<p><strong>What about</strong> <code class="docutils literal notranslate"><span class="pre">main</span></code> <strong>and</strong> <code class="docutils literal notranslate"><span class="pre">rolling</span></code> <strong>?</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">main</span></code> typically targets <a class="reference internal" href="../../Releases/Release-Rolling-Ridley.html"><span class="doc">Rolling</span></a> (and so, the next unreleased ROS distribution), though the maintainers may decide to develop and release from a <code class="docutils literal notranslate"><span class="pre">rolling</span></code> branch instead.</p>
</div>
<div class="section" id="pull-requests">
<h3><a class="toc-backref" href="#id11">Pull requests</a><a class="headerlink" href="#pull-requests" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>A pull request should only focus on one change.
Separate changes should go into separate pull requests.
See <a class="reference external" href="https://github.com/blog/1943-how-to-write-the-perfect-pull-request">GitHub's guide to writing the perfect pull request</a>.</p></li>
<li><p>A patch should be minimal in size and avoid any kind of unnecessary changes.</p></li>
<li><p>A pull request must contain minimum number of meaningful commits.</p>
<ul>
<li><p>You can create new commits while the pull request is under review.</p></li>
</ul>
</li>
<li><p>Before merging a pull request all changes should be squashed into a small number of semantic commits to keep the history clear.</p>
<ul>
<li><p>But avoid squashing commits while a pull request is under review.
Your reviewers might not notice that you made the change, thereby introducing potential for confusion.
Plus, you're going to squash before merging anyway; there's no benefit to doing it early.</p></li>
</ul>
</li>
<li><p>Any developer is welcome to review and approve a pull request (see <a class="reference internal" href="#general-principles">General Principles</a>).</p></li>
<li><p>When you are working on a change that is not ready for review or to be merged, use a draft pull request.
When that change is ready for review, move the pull request out of the draft state.
Note that if you want early feedback from specific people on a draft pull request, you can &#64; mention them in the pull request's description or in a comment on the pull request.</p></li>
<li><p>If your pull request depends on other pull requests, link to each depended on pull request by adding <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">Depends</span> <span class="pre">on</span> <span class="pre">&lt;link&gt;</span></code> at the top of your pull request's description.
Doing so helps reviewers understand the context of the pull request.</p></li>
<li><p>When you start reviewing a pull request, comment on the pull request so that other developers know that you're reviewing it.</p></li>
<li><p>Pull-request review is not read-only, with the reviewer making comments and then waiting for the author to address them.
As a reviewer, feel free to make minor improvements (typos, style issues, etc.) in-place.
As the opener of a pull-request, if you are working in a fork, checking the box to <a class="reference external" href="https://github.com/blog/2247-improving-collaboration-with-forks">allow edits from upstream contributors</a> will assist with the aforementioned.
As a reviewer, also feel free to make more substantial improvements, but consider putting them in a separate branch (either mention the new branch in a comment, or open another pull request from the new branch to the original branch).</p></li>
<li><p>Any developer (the author, the reviewer, or somebody else) can merge any approved pull request.</p></li>
</ul>
</div>
<div class="section" id="library-versioning">
<h3><a class="toc-backref" href="#id12">Library versioning</a><a class="headerlink" href="#library-versioning" title="永久链接至标题"></a></h3>
<p>We will version all libraries within a package together.
This means that libraries inherit their version from the package.
This keeps library and package versions from diverging and shares reasoning with the policy of releasing packages which share a repository together.
If you need libraries to have different versions then consider splitting them into different packages.</p>
</div>
<div class="section" id="development-process">
<h3><a class="toc-backref" href="#id13">Development process</a><a class="headerlink" href="#development-process" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>The default branch (in most cases the rolling branch) must always build, pass all tests and compile without warnings.
If at any time there is a regression it is the top priority to restore at least the previous state.</p></li>
<li><p>Always build with tests enabled.</p></li>
<li><p>Always run tests locally after changes and before proposing them in a pull request.
Besides using automated tests, also run the modified code path manually to ensure that the patch works as intended.</p></li>
<li><p>Always run CI jobs for all platforms for every pull request and include links to the jobs in the pull request.</p></li>
</ul>
<p>For more details on recommended software development workflow, see <a class="reference internal" href="#software-development-lifecycle">Software Development Lifecycle</a> section.</p>
</div>
<div class="section" id="changes-to-rmw-api">
<h3><a class="toc-backref" href="#id14">Changes to RMW API</a><a class="headerlink" href="#changes-to-rmw-api" title="永久链接至标题"></a></h3>
<p>When updating <a class="reference external" href="https://github.com/ros2/rmw">RMW API</a>, it is required that RMW implementations for the Tier 1 middleware libraries are updated as well.
For example, a new function <code class="docutils literal notranslate"><span class="pre">rmw_foo()</span></code> introduced to the RMW API must be implemented in the following packages (as of ROS Galactic):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rmw_connextdds">rmw_connextdds</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw_cyclonedds">rmw_cyclonedds</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw_fastrtps">rmw_fastrtps</a></p></li>
</ul>
<p>Updates for non-Tier 1 middleware libraries should also be considered if feasible (e.g. depending on the size of the change).
See <a class="reference external" href="https://www.ros.org/reps/rep-2000.html">REP-2000</a> for the list of middleware libraries and their tiers.</p>
</div>
<div class="section" id="tracking-tasks">
<h3><a class="toc-backref" href="#id15">Tracking tasks</a><a class="headerlink" href="#tracking-tasks" title="永久链接至标题"></a></h3>
<p>To help organize work on ROS 2, the core ROS 2 development team uses kanban-style <a class="reference external" href="https://github.com/orgs/ros2/projects">GitHub project boards</a>.</p>
<p>Not all issues and pull requests are tracked on the project boards, however.
A board usually represents an upcoming release or specific project.
Tickets can be browsed on a per-repo basis by browsing the <a class="reference external" href="https://github.com/ros2">ROS 2 repositories'</a> individual issue pages.</p>
<p>The names and purposes of columns in any given ROS 2 project board vary, but typically follow the same general structure:</p>
<ul class="simple">
<li><p><strong>To do</strong>:
Issues that are relevant to the project, ready to be assigned</p></li>
<li><p><strong>In progress</strong>:
Active pull requests on which work is currently in progress</p></li>
<li><p><strong>In review</strong>:
Pull requests where work is complete and ready for review, and for those currently under active review</p></li>
<li><p><strong>Done</strong>:
Pull requests and related issues are merged/closed (for informational purposes)</p></li>
</ul>
<p>To request permission to make changes, simply comment on the tickets you're interested in.
Depending on the complexity, it might be useful to describe how you plan to address it.
We will update the status (if you don't have the permission) and you can start working on a pull request.
If you contribute regularly we will likely just grant you permission to manage the labels etc. yourself.</p>
</div>
<div class="section" id="programming-conventions">
<h3><a class="toc-backref" href="#id16">Programming conventions</a><a class="headerlink" href="#programming-conventions" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>Defensive programming: ensure that assumptions are held as early as possible.
E.g. check every return code and make sure to at least throw an exception until the case is handled more gracefully.</p></li>
<li><p>All error messages must be directed to <code class="docutils literal notranslate"><span class="pre">stderr</span></code>.</p></li>
<li><p>Declare variables in the narrowest scope possible.</p></li>
<li><p>Keep group of items (dependencies, imports, includes, etc.) ordered alphabetically.</p></li>
</ul>
<div class="section" id="c-specific">
<h4>C++ specific<a class="headerlink" href="#c-specific" title="永久链接至标题"></a></h4>
<ul class="simple">
<li><p>Avoid using direct streaming (<code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>) to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> / <code class="docutils literal notranslate"><span class="pre">stderr</span></code> to prevent interleaving between multiple threads.</p></li>
<li><p>Avoid using references for <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code> since that subverts the reference counting.
If the original instance goes out of scope and the reference is being used it accesses freed memory.</p></li>
</ul>
</div>
</div>
<div class="section" id="filesystem-layout">
<h3><a class="toc-backref" href="#id17">Filesystem layout</a><a class="headerlink" href="#filesystem-layout" title="永久链接至标题"></a></h3>
<p>The filesystem layout of packages and repositories should follow the same conventions in order to provide a consistent experience for users browsing our source code.</p>
<div class="section" id="package-layout">
<h4>Package layout<a class="headerlink" href="#package-layout" title="永久链接至标题"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src</span></code>: contains all C and C++ code</p>
<ul>
<li><p>Also contains C/C++ headers which are not installed</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">include</span></code>: contains all C and C++ headers which are installed</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;package</span> <span class="pre">name&gt;</span></code>: for all C and C++ installed headers they should be folder namespaced by the package name</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;package_name&gt;</span></code>: contains all Python code</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test</span></code>: contains all automated tests and test data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code>: contains configuration files, e.g. YAML parameters files and RViz config files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doc</span></code>: contains all the documentation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">launch</span></code>: contains all launch files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">package.xml</span></code>: as defined by <a class="reference external" href="https://www.ros.org/reps/rep-0140.html">REP-0140</a> (may be updated for prototyping)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>: only ROS packages which use CMake</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code>: only ROS packages which use Python code only</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README</span></code>: can be rendered on GitHub as a landing page for the project</p>
<ul>
<li><p>This can be as short or detailed as is convenient, but it should at least link to project documentation</p></li>
<li><p>Consider putting a CI or code coverage tag in this README</p></li>
<li><p>It can also be <code class="docutils literal notranslate"><span class="pre">.rst</span></code> or anything else that GitHub supports</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONTRIBUTING</span></code>: describes the contribution guidelines</p>
<ul>
<li><p>This might include license implication, e.g. when using the Apache 2 License.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">LICENSE</span></code>: a copy of the license or licenses for this package</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CHANGELOG.rst</span></code>: <a class="reference external" href="https://www.ros.org/reps/rep-0132.html">REP-0132</a> compliant changelog</p></li>
</ul>
</div>
<div class="section" id="repository-layout">
<h4>Repository layout<a class="headerlink" href="#repository-layout" title="永久链接至标题"></a></h4>
<p>Each package should be in a subfolder which has the same name as the package.
If a repository contains only a single package it can optionally be in the root of the repository.</p>
</div>
</div>
</div>
<div class="section" id="developer-workflow">
<h2><a class="toc-backref" href="#id18">Developer Workflow</a><a class="headerlink" href="#developer-workflow" title="永久链接至标题"></a></h2>
<p>We track open tickets and active PRs related to upcoming releases and larger projects using <a class="reference external" href="https://github.com/orgs/ros2/projects">GitHub project boards</a>.</p>
<p>The usual workflow is:</p>
<ul>
<li><p>Discuss design (GitHub ticket on the appropriate repository, and a design PR to <a class="reference external" href="https://github.com/ros2/design">https://github.com/ros2/design</a> if needed)</p></li>
<li><p>Write implementation on a feature branch on a fork</p>
<ul class="simple">
<li><p>Please check out the <a class="reference internal" href="#"><span class="doc">developer guide</span></a> for guidelines and best practices</p></li>
</ul>
</li>
<li><p>Write tests</p></li>
<li><p>Enable and run linters</p></li>
<li><p>Run tests locally using <code class="docutils literal notranslate"><span class="pre">colcon</span> <span class="pre">test</span></code> (see the <a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html"><span class="doc">colcon tutorial</span></a>)</p></li>
<li><p>Once everything builds locally without warnings and all tests are passing, run CI on your feature branch:</p>
<ul class="simple">
<li><p>Go to ci.ros2.org</p></li>
<li><p>Log in (top right corner)</p></li>
<li><p>Click on the <code class="docutils literal notranslate"><span class="pre">ci_launcher</span></code> job</p></li>
<li><p>Click &quot;Build with Parameters&quot; (left column)</p></li>
<li><p>In the first box &quot;CI_BRANCH_TO_TEST&quot; enter your feature branch name</p></li>
<li><p>Hit the <code class="docutils literal notranslate"><span class="pre">build</span></code> button</p></li>
</ul>
<p>(if you are not a ROS 2 committer, you don't have access to the CI farm. In that case, ping the reviewer of your PR to run CI for you)</p>
</li>
<li><p>If your use case requires running code coverage:</p>
<ul class="simple">
<li><p>Go to ci.ros2.org</p></li>
<li><p>Log in (top right corner)</p></li>
<li><p>Click on the <code class="docutils literal notranslate"><span class="pre">ci_linux_coverage</span></code> job</p></li>
<li><p>Click &quot;Build with Parameters&quot; (left column)</p></li>
<li><p>Be sure of leaving &quot;CI_BUILD_ARGS&quot; and &quot;CI_TEST_ARGS&quot; with the default values</p></li>
<li><p>Hit the <code class="docutils literal notranslate"><span class="pre">build</span></code> button</p></li>
<li><p>At the end of the document there are instructions on how to <a class="reference internal" href="#read-coverage-report"><span class="std std-ref">interpret the result of the report</span></a> and <a class="reference internal" href="#calculate-coverage-rate"><span class="std std-ref">calculate the coverage rate</span></a></p></li>
</ul>
</li>
<li><p>If the CI job built without warnings, errors and test failures, post the links of your jobs on your PR or high-level ticket aggregating all your PRs (see example <a class="reference external" href="https://github.com/ros2/rcl/pull/106#issuecomment-271119200">here</a>)</p>
<ul class="simple">
<li><p>Note that the markdown for these badges is in the console output of the <code class="docutils literal notranslate"><span class="pre">ci_launcher</span></code> job</p></li>
</ul>
</li>
<li><p>When the PR has been approved:</p>
<ul class="simple">
<li><p>the person who submitted the PR merges it using &quot;Squash and Merge&quot; option so that we keep a clean history</p>
<ul>
<li><p>If the commits deserve to keep separated: squash all the nitpick/linters/typo ones together and merge the remaining set</p>
<ul>
<li><p>Note: each PR should target a specific feature so Squash and Merge should make sense 99% of the time</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Delete the branch once merged</p></li>
</ul>
</div>
<div class="section" id="architectural-development-practices">
<h2><a class="toc-backref" href="#id19">Architectural Development Practices</a><a class="headerlink" href="#architectural-development-practices" title="永久链接至标题"></a></h2>
<p>This section describes the ideal lifecycle that should be employed when making large architectural changes to ROS 2.</p>
<div class="section" id="software-development-lifecycle">
<h3><a class="toc-backref" href="#id20">Software Development Lifecycle</a><a class="headerlink" href="#software-development-lifecycle" title="永久链接至标题"></a></h3>
<p>This section describes step-by-step how to plan, design, and implement a new feature:</p>
<ol class="arabic simple">
<li><p>Task Creation</p></li>
<li><p>Creating the Design Document</p></li>
<li><p>Design Review</p></li>
<li><p>Implementation</p></li>
<li><p>Code Review</p></li>
</ol>
<div class="section" id="task-creation">
<h4>Task creation<a class="headerlink" href="#task-creation" title="永久链接至标题"></a></h4>
<p>Tasks requiring changes to critical parts of ROS 2 should have design reviews during early stages of the release cycle.
If a design review is happening in the later stages, the changes will be part of a future release.</p>
<ul class="simple">
<li><p>An issue should be created in the appropriate <a class="reference external" href="https://github.com/ros2/">ros2 repository</a>, clearly describing the task being worked on.</p>
<ul>
<li><p>It should have a clear success criteria and highlight the concrete improvements expected from it.</p></li>
<li><p>If the feature is targeting a ROS release, ensure this is tracked in the ROS release ticket (<a class="reference external" href="https://github.com/ros2/ros2/issues/607">example</a>).</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="writing-the-design-document">
<h4>Writing the design document<a class="headerlink" href="#writing-the-design-document" title="永久链接至标题"></a></h4>
<p>Design docs must never include confidential information.
Whether or not a design document is required for your change depends on how big the task is.</p>
<ol class="arabic simple">
<li><p>You are making a small change or fixing a bug:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>A design document is not required, but an issue should be opened in the appropriate repository to track the work and avoid duplication of efforts.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>You are implementing a new feature or would like to contribute to OSRF-owned infrastructure (like Jenkins CI):</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Design doc is required and should be contributed to <a class="reference external" href="https://github.com/ros2/design/">ros2/design</a> to be made accessible on <a class="reference external" href="https://design.ros2.org/">https://design.ros2.org/</a>.</p></li>
<li><p>You should fork the repository and submit a pull request detailing the design.</p></li>
</ul>
<p>Mention the related ros2 issue (for example, <code class="docutils literal notranslate"><span class="pre">Design</span> <span class="pre">doc</span> <span class="pre">for</span> <span class="pre">task</span> <span class="pre">ros2/ros2#&lt;issue</span> <span class="pre">id&gt;</span></code>) in the pull request or the commit message.
Detailed instructions are on the <a class="reference external" href="https://design.ros2.org/contribute.html">ROS 2 Contribute</a> page.
Design comments will be made directly on the pull request.</p>
</div></blockquote>
<p>If the task is planned to be released with a specific version of ROS, this information should be included in the pull request.</p>
</div>
<div class="section" id="design-document-review">
<h4>Design document review<a class="headerlink" href="#design-document-review" title="永久链接至标题"></a></h4>
<p>Once the design is ready for review, a pull request should be opened and appropriate reviewers should be assigned.
It is recommended to include project owner(s) -
maintainers of all impacted packages (as defined by <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> maintainer field, see <a class="reference external" href="https://www.ros.org/reps/rep-0140.html#maintainer-multiple-but-at-least-one">REP-140</a>) - as reviewers.</p>
<ul>
<li><p>If the design doc is complex or reviewers have conflicting schedules, an optional design review meeting can be set up.
In this case,</p>
<p><strong>Before the meeting</strong></p>
<ul class="simple">
<li><p>Send a meeting invite at least one week in advance</p></li>
<li><p>Meeting duration of one hour is recommended</p></li>
<li><p>Meeting invite should list all decisions to be made during the review (decisions requiring package maintainer approval)</p></li>
<li><dl class="simple">
<dt>Meeting required attendees: design pull request reviewers</dt><dd><p>Meeting optional attendees: all OSRF engineers, if applicable</p>
</dd>
</dl>
</li>
</ul>
<p><strong>During the meeting</strong></p>
<ul class="simple">
<li><p>The task owner drives the meeting, presents their ideas and manages discussions to ensure an agreement is reached on time</p></li>
</ul>
<p><strong>After the meeting</strong></p>
<ul class="simple">
<li><p>The task owner should send back meeting notes to all attendees</p></li>
<li><p>If minor issues have been raised about the design:</p>
<ul>
<li><p>The task owner should update the design doc pull request based on the feedback</p></li>
<li><p>Additional review is not required</p></li>
</ul>
</li>
<li><p>If major issues have been raised about the design:</p>
<ul>
<li><p>It is acceptable to remove sections for which there is no clear agreement</p></li>
<li><p>The debatable parts of the design can be resubmitted as a separate task in the future</p></li>
<li><p>If removing the debatable parts is not an option, work directly with package owners to reach an agreement</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Once consensus is reached:</p>
<ul class="simple">
<li><p>Ensure the <a class="reference external" href="https://github.com/ros2/design/">ros2/design</a> pull request has been merged, if applicable</p></li>
<li><p>Update and close the GitHub issue associated with this design task</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="implementation">
<h4>Implementation<a class="headerlink" href="#implementation" title="永久链接至标题"></a></h4>
<p>Before starting, go through the <a class="reference internal" href="#pull-requests">Pull requests</a> section for best practices.</p>
<ul class="simple">
<li><p>For each repo to be modified:</p>
<ul>
<li><p>Modify the code, go to the next step if finished or at regular intervals to backup your work.</p></li>
<li><p><a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Interactive-Staging">Self-review</a> your changes using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span> <span class="pre">-i</span></code>.</p></li>
<li><p>Create a new signed commit using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-s</span></code>.</p>
<ul>
<li><p>A pull request should contain minimal semantically meaningful commits (for instance, a large number of 1-line commits is not acceptable).
Create new fixup commits while iterating on feedback, or optionally, amend existing commits using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span></code> if you don't want to create a new commit every time.</p></li>
<li><p>Each commit must have a properly written, meaningful, commit message.
More instructions <a class="reference external" href="https://chris.beams.io/posts/git-commit/">here</a>.</p></li>
<li><p>Moving files must be done in a separate commit, otherwise git may fail to accurately track the file history.</p></li>
<li><p>Either the pull request description or the commit message must contain a reference to the related ros2 issue, so it gets automatically closed when the pull request is merged.
See this <a class="reference external" href="https://help.github.com/articles/closing-issues-using-keywords/">doc</a> for more details.</p></li>
<li><p>Push the new commits.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="code-review">
<h4>Code review<a class="headerlink" href="#code-review" title="永久链接至标题"></a></h4>
<p>Once the change is ready for code review:</p>
<ul class="simple">
<li><p>Open a pull request for each modified repository.</p>
<ul>
<li><p>Remember to follow <a class="reference internal" href="#pull-requests">Pull requests</a> best practices.</p></li>
<li><p><a class="reference external" href="https://hub.github.com/">GitHub</a> can be used to create pull requests from the command-line.</p></li>
<li><p>If the task is planned to be released with a specific version of ROS, this information should be included in each pull request.</p></li>
</ul>
</li>
<li><p>Package owners who reviewed the design document should be mentioned in the pull request.</p></li>
<li><p>Code review SLO: although reviewing pull requests is best-effort,
it is helpful to have reviewers comment on pull requests within a week and
code authors to reply back to comments within a week, so there is no loss of context.</p></li>
<li><p>Iterate on feedback as usual, amend and update the development branch as needed.</p></li>
<li><p>Once the PR is approved, package maintainers will merge the changes in.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="build-farm-introduction">
<h2><a class="toc-backref" href="#id21">Build Farm Introduction</a><a class="headerlink" href="#build-farm-introduction" title="永久链接至标题"></a></h2>
<p>The build farm is located at <a class="reference external" href="https://ci.ros2.org/">ci.ros2.org</a>.</p>
<p>Every night we run nightly jobs which build and run all the tests in various scenarios on various platforms.
Additionally, we test all pull requests against these platforms before merging.</p>
<p>This is the current set of target platforms and architectures, though it evolves overtime:</p>
<ul class="simple">
<li><p>Ubuntu 22.04 Jammy</p>
<ul>
<li><p>amd64</p></li>
<li><p>aarch64</p></li>
</ul>
</li>
<li><p>Windows 10</p>
<ul>
<li><p>amd64</p></li>
</ul>
</li>
</ul>
<p>There are several categories of jobs on the buildfarm:</p>
<ul class="simple">
<li><p>manual jobs (triggered manually by developers):</p>
<ul>
<li><p>ci_linux: build + test the code on Ubuntu Xenial</p></li>
<li><p>ci_linux-aarch64: build + test the code on Ubuntu Xenial on an ARM 64-bit machine (aarch64)</p></li>
<li><p>ci_linux_coverage: build + test + generation of test coverage</p></li>
<li><p>ci_windows: build + test the code on Windows 10</p></li>
<li><p>ci_launcher: trigger all the jobs listed above</p></li>
</ul>
</li>
<li><p>nightly (run every night):</p>
<ul>
<li><p>Debug: build + test the code with CMAKE_BUILD_TYPE=Debug</p>
<ul>
<li><p>nightly_linux_debug</p></li>
<li><p>nightly_linux-aarch64_debug</p></li>
<li><p>nightly_win_deb</p></li>
</ul>
</li>
<li><p>Release: build + test the code with CMAKE_BUILD_TYPE=Release</p>
<ul>
<li><p>nightly_linux_release</p></li>
<li><p>nightly_linux-aarch64_release</p></li>
<li><p>nightly_win_rel</p></li>
</ul>
</li>
<li><p>Repeated: build then run each test up to 20 times or until failed (aka flakiness hunter)</p>
<ul>
<li><p>nightly_linux_repeated</p></li>
<li><p>nightly_linux-aarch64_repeated</p></li>
<li><p>nightly_win_rep</p></li>
</ul>
</li>
<li><p>Coverage:</p>
<ul>
<li><p>nightly_linux_coverage: build + test the code + analyses coverage for c/c++ and python</p>
<ul>
<li><p>results are exported as a cobertura report</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>packaging (run every night; result is bundled into an archive):</p>
<ul>
<li><p>packaging_linux</p></li>
<li><p>packaging_windows</p></li>
</ul>
</li>
</ul>
<p>Two additional build farms support the ROS / ROS 2 ecosystem by providing building of source and
binary packages, continuous integration, testing, and analysis.</p>
<p>For details, frequently asked questions, and troubleshooting see <a class="reference internal" href="Build-Farms.html"><span class="doc">build farms</span></a>.</p>
<div class="section" id="note-on-coverage-runs">
<h3><a class="toc-backref" href="#id22">Note on Coverage runs</a><a class="headerlink" href="#note-on-coverage-runs" title="永久链接至标题"></a></h3>
<p>ROS 2 packages are organized in a way that the testing code for a given package is not only contained within the package, but could also be present in a different package.
In other words: packages can exercise code belonging to other packages during the testing phase.</p>
<p>To achieve the coverage rate reached by all code available in the ROS 2 core packages it is recommended to run builds using a fixed set of proposed repositories.
That set is defined in the default parameters of coverage jobs in Jenkins.</p>
</div>
<div class="section" id="how-to-read-the-coverage-rate-from-the-buildfarm-report">
<span id="read-coverage-report"></span><h3><a class="toc-backref" href="#id23">How to read the coverage rate from the buildfarm report</a><a class="headerlink" href="#how-to-read-the-coverage-rate-from-the-buildfarm-report" title="永久链接至标题"></a></h3>
<p>To see the coverage report for a given package:</p>
<ul class="simple">
<li><p>When the <code class="docutils literal notranslate"><span class="pre">ci_linux_coverage</span></code> build finishes, click on <code class="docutils literal notranslate"><span class="pre">Coverage</span> <span class="pre">Report</span></code></p></li>
<li><p>Scroll down to the <code class="docutils literal notranslate"><span class="pre">Coverage</span> <span class="pre">Breakdown</span> <span class="pre">by</span> <span class="pre">Package</span></code> table</p></li>
<li><p>In the table, look at the first column called &quot;Name&quot;</p></li>
</ul>
<p>The coverage reports in the buildfarm include all the packages that were used in the ROS workspace.
The coverage report includes different paths corresponding to the same package:</p>
<ul class="simple">
<li><p>Name entries with the form: <code class="docutils literal notranslate"><span class="pre">src.*.&lt;repository_name&gt;.&lt;package_name&gt;.*</span></code>
These correspond to the unit test runs available in a package against its own source code</p></li>
<li><p>Name entries with the form: <code class="docutils literal notranslate"><span class="pre">build.&lt;repository_name&gt;.&lt;package_name&gt;.*</span></code>
These correspond to the unit test runs available in a package against its files generated at building or configuring time</p></li>
<li><p>Name entries with the form: <code class="docutils literal notranslate"><span class="pre">install.&lt;package_name&gt;.*</span></code>
These correspond to the system/integration tests coming from testing runs of other packages</p></li>
</ul>
</div>
<div class="section" id="how-to-calculate-the-coverage-rate-from-the-buildfarm-report">
<span id="calculate-coverage-rate"></span><h3><a class="toc-backref" href="#id24">How to calculate the coverage rate from the buildfarm report</a><a class="headerlink" href="#how-to-calculate-the-coverage-rate-from-the-buildfarm-report" title="永久链接至标题"></a></h3>
<p>Get the combined unit coverage rate using the automatic script:</p>
<blockquote>
<div><ul class="simple">
<li><p>From the ci_linux_coverage Jenkins build copy the URL of the build</p></li>
<li><p>Download the <a class="reference external" href="https://raw.githubusercontent.com/ros2/ci/master/tools/get_coverage_ros2_pkg.py">get_coverage_ros2_pkg</a> script</p></li>
<li><p>Execute the script: <code class="docutils literal notranslate"><span class="pre">./get_coverage_ros2_pkg.py</span> <span class="pre">&lt;jenkins_build_url&gt;</span> <span class="pre">&lt;ros2_package_name&gt;</span></code> (<a class="reference external" href="https://github.com/ros2/ci/blob/master/tools/README.md">README</a>)</p></li>
<li><p>Grab the results from the &quot;Combined unit testing&quot; final line in the output of the script</p></li>
</ul>
</div></blockquote>
<p>Alternative: get the combined unit coverage rate from coverage report (require manual calculation):</p>
<ul class="simple">
<li><p>When the ci_linux_coverage build finishes, click on <code class="docutils literal notranslate"><span class="pre">Cobertura</span> <span class="pre">Coverage</span> <span class="pre">Report</span></code></p></li>
<li><p>Scroll down to the <code class="docutils literal notranslate"><span class="pre">Coverage</span> <span class="pre">Breakdown</span> <span class="pre">by</span> <span class="pre">Package</span></code> table</p></li>
<li><p>In the table, under the first column &quot;Name&quot;, look for (where &lt;package_name&gt; is your package under testing):</p>
<ul>
<li><p>all the directories under the pattern <code class="docutils literal notranslate"><span class="pre">src.*.&lt;repository_name&gt;.&lt;package_name&gt;.*</span></code> grab the two absolute values in the column &quot;Lines&quot;.</p></li>
<li><p>all the directories under the pattern <code class="docutils literal notranslate"><span class="pre">build/.&lt;repository_name&gt;.*</span></code> grab the two absolute values in the column &quot;Lines&quot;.</p></li>
</ul>
</li>
<li><p>With the previous selection: for each cell, the first value is the lines tested and the second is the total lines of code.
Aggregate all rows for getting the total of the lines tested and the total of lines of code under test.
Divide to get the coverage rate.</p></li>
</ul>
</div>
<div class="section" id="how-to-measure-coverage-locally-using-lcov-ubuntu">
<span id="measure-coverage-locally"></span><h3><a class="toc-backref" href="#id25">How to measure coverage locally using lcov (Ubuntu)</a><a class="headerlink" href="#how-to-measure-coverage-locally-using-lcov-ubuntu" title="永久链接至标题"></a></h3>
<p>To measure coverage on your own machine, install <code class="docutils literal notranslate"><span class="pre">lcov</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install -y lcov
</pre></div>
</div>
<p>The rest of this section assumes you are working from your colcon workspace.
Compile in debug with coverage flags.
Feel free to use colcon flags to target specific packages.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon build --cmake-args -DCMAKE_BUILD_TYPE<span class="o">=</span>Debug -DCMAKE_CXX_FLAGS<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CMAKE_CXX_FLAGS</span><span class="si">}</span><span class="s2"> --coverage&quot;</span> -DCMAKE_C_FLAGS<span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">CMAKE_C_FLAGS</span><span class="si">}</span><span class="s2"> --coverage&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">lcov</span></code> requires an initial baseline, which you can produce with the following command.
Update the output file location for your needs.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lcov --no-external --capture --initial --directory . --output-file ~/ros2_base.info
</pre></div>
</div>
<p>Run tests for the packages that matter for your coverage measurements.
For example, if measuring <code class="docutils literal notranslate"><span class="pre">rclcpp</span></code> also with <code class="docutils literal notranslate"><span class="pre">test_rclcpp</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon <span class="nb">test</span> --packages-select rclcpp test_rclcpp
</pre></div>
</div>
<p>Capture the lcov results with a similar command this time dropping the <code class="docutils literal notranslate"><span class="pre">--initial</span></code> flag.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lcov --no-external --capture --directory . --output-file ~/ros2.info
</pre></div>
</div>
<p>Combine the trace .info files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lcov --add-tracefile ~/ros2_base.info --add-tracefile ~/ros2.info --output-file ~/ros2_coverage.info
</pre></div>
</div>
<p>Generate html for easy visualization and annotation of covered lines.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p coverage
genhtml ~/ros2_coverage.info --output-directory coverage
</pre></div>
</div>
</div>
</div>
</div>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../Contributing.html" class="btn btn-neutral float-left" title="贡献" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="Code-Style-Language-Versions.html" class="btn btn-neutral float-right" title="代码风格和语言版本" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2023, Open Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EVD5Z6G6NH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>