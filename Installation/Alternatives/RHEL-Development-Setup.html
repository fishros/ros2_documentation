<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Installation/Alternatives/RHEL-Development-Setup</title>
</head>
<body>
  <div class="section" id="rhel-source">
<span id="rhel-latest"></span><h1>RHEL（源代码）<a class="headerlink" href="#rhel-source" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#system-requirements" id="id1">系统要求</a></p></li>
<li><p><a class="reference internal" href="#system-setup" id="id2">系统设置</a></p>
<ul>
<li><p><a class="reference internal" href="#set-locale" id="id3">设置区域设置</a></p></li>
<li><p><a class="reference internal" href="#enable-required-repositories" id="id4">启用所需的软件仓库</a></p></li>
<li><p><a class="reference internal" href="#install-development-tools-and-ros-tools" id="id5">安装开发工具和ROS工具</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#get-ros-2-code" id="id6">获取ROS 2代码</a></p></li>
<li><p><a class="reference internal" href="#install-dependencies-using-rosdep" id="id7">使用rosdep安装依赖项</a></p></li>
<li><p><a class="reference internal" href="#install-additional-dds-implementations-optional" id="id8">安装额外的DDS实现（可选）</a></p></li>
<li><p><a class="reference internal" href="#build-the-code-in-the-workspace" id="id9">在工作空间中构建代码</a></p></li>
<li><p><a class="reference internal" href="#environment-setup" id="id10">环境设置</a></p>
<ul>
<li><p><a class="reference internal" href="#source-the-setup-script" id="id11">执行设置脚本</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#try-some-examples" id="id12">尝试一些示例</a></p></li>
<li><p><a class="reference internal" href="#next-steps-after-installing" id="id13">安装后的下一步</a></p></li>
<li><p><a class="reference internal" href="#additional-rmw-implementations-optional" id="id14">其他RMW实现（可选）</a></p></li>
<li><p><a class="reference internal" href="#alternate-compilers" id="id15">备选编译器</a></p>
<ul>
<li><p><a class="reference internal" href="#clang" id="id16">Clang</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#stay-up-to-date" id="id17">保持更新</a></p></li>
<li><p><a class="reference internal" href="#troubleshooting" id="id18">故障排除</a></p></li>
<li><p><a class="reference internal" href="#uninstall" id="id19">卸载</a></p></li>
</ul>
</div>
<div class="section" id="system-requirements">
<h2><a class="toc-backref" href="#id1">系统要求</a><a class="headerlink" href="#system-requirements" title="永久链接至标题"></a></h2>
<p>Humble Hawksbill 的当前目标 Red Hat 平台为：</p>
<ul class="simple">
<li><p>第二级：RHEL 8 64 位</p></li>
</ul>
<p>如 <a class="reference external" href="https://www.ros.org/reps/rep-2000.html">REP 2000</a> 中所定义</p>
</div>
<div class="section" id="system-setup">
<h2><a class="toc-backref" href="#id2">系统设置</a><a class="headerlink" href="#system-setup" title="永久链接至标题"></a></h2>
<div class="section" id="set-locale">
<h3><a class="toc-backref" href="#id3">设置区域设置</a><a class="headerlink" href="#set-locale" title="永久链接至标题"></a></h3>
<p>确保您拥有支持 <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code> 的区域设置。如果您使用的是最小环境（如 Docker 容器），区域设置可能是一些最小化的设置，例如 <code class="docutils literal notranslate"><span class="pre">C</span></code>。我们使用以下设置进行测试。然而，如果您使用的是不同的 UTF-8 支持的区域设置，也应该没问题。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>locale  <span class="c1"># check for UTF-8</span>

sudo dnf install langpacks-en glibc-langpack-en
<span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8

locale  <span class="c1"># verify settings</span>
</pre></div>
</div>
</div>
<div class="section" id="enable-required-repositories">
<h3><a class="toc-backref" href="#id4">启用所需的软件仓库</a><a class="headerlink" href="#enable-required-repositories" title="永久链接至标题"></a></h3>
<p>rosdep 数据库包含来自 EPEL 和 PowerTools 软件仓库的软件包，默认情况下这些仓库是禁用的。可以通过运行以下命令来启用它们：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf install <span class="s1">&#39;dnf-command(config-manager)&#39;</span> epel-release -y
sudo dnf config-manager --set-enabled powertools
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>这一步根据你使用的发行版可能会有些不同。请查阅EPEL文档：<a class="reference external" href="https://docs.fedoraproject.org/en-US/epel/#_quickstart">https://docs.fedoraproject.org/en-US/epel/#_quickstart</a></p>
</div>
</div>
<div class="section" id="install-development-tools-and-ros-tools">
<h3><a class="toc-backref" href="#id5">安装开发工具和ROS工具</a><a class="headerlink" href="#install-development-tools-and-ros-tools" title="永久链接至标题"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf install -y <span class="se">\</span>
  cmake <span class="se">\</span>
  gcc-c++ <span class="se">\</span>
  git <span class="se">\</span>
  make <span class="se">\</span>
  patch <span class="se">\</span>
  python3-colcon-common-extensions <span class="se">\</span>
  python3-pip <span class="se">\</span>
  python3-pydocstyle <span class="se">\</span>
  python3-pytest <span class="se">\</span>
  python3-pytest-repeat <span class="se">\</span>
  python3-pytest-rerunfailures <span class="se">\</span>
  python3-rosdep <span class="se">\</span>
  python3-setuptools <span class="se">\</span>
  python3-vcstool

<span class="c1"># install some pip packages needed for testing and</span>
<span class="c1"># not available as RPMs</span>
python3 -m pip install -U --user <span class="se">\</span>
  flake8-blind-except<span class="o">==</span><span class="m">0</span>.1.1 <span class="se">\</span>
  flake8-builtins <span class="se">\</span>
  flake8-class-newline <span class="se">\</span>
  flake8-comprehensions <span class="se">\</span>
  flake8-deprecated <span class="se">\</span>
  flake8-docstrings <span class="se">\</span>
  flake8-import-order <span class="se">\</span>
  flake8-quotes <span class="se">\</span>
  <span class="nv">mypy</span><span class="o">==</span><span class="m">0</span>.931
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-ros-2-code">
<span id="rhel-dev-get-ros2-code"></span><h2><a class="toc-backref" href="#id6">获取ROS 2代码</a><a class="headerlink" href="#get-ros-2-code" title="永久链接至标题"></a></h2>
<p>创建一个工作空间并克隆所有仓库：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/ros2_humble/src
<span class="nb">cd</span> ~/ros2_humble
vcs import --input https://raw.githubusercontent.com/ros2/ros2/humble/ros2.repos src
</pre></div>
</div>
</div>
<div class="section" id="install-dependencies-using-rosdep">
<span id="rhel-development-setup-install-dependencies-using-rosdep"></span><h2><a class="toc-backref" href="#id7">使用rosdep安装依赖项</a><a class="headerlink" href="#install-dependencies-using-rosdep" title="永久链接至标题"></a></h2>
<p>ROS 2包是在经常更新的RHEL系统上构建的。在安装新包之前，建议确保系统已经更新到最新。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf update
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo rosdep init
rosdep update
rosdep install --from-paths src --ignore-src -y --skip-keys <span class="s2">&quot;asio cyclonedds fastcdr fastrtps ignition-cmake2 ignition-math6 python3-babeltrace python3-mypy rti-connext-dds-6.0.1 urdfdom_headers&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="install-additional-dds-implementations-optional">
<h2><a class="toc-backref" href="#id8">安装额外的DDS实现（可选）</a><a class="headerlink" href="#install-additional-dds-implementations-optional" title="永久链接至标题"></a></h2>
<p>如果您想使用默认之外的其他DDS或RTPS供应商，您可以在这里找到说明：<a class="reference internal" href="../DDS-Implementations.html"><span class="doc">这里</span></a>。</p>
</div>
<div class="section" id="build-the-code-in-the-workspace">
<h2><a class="toc-backref" href="#id9">在工作空间中构建代码</a><a class="headerlink" href="#build-the-code-in-the-workspace" title="永久链接至标题"></a></h2>
<p>如果您已经以其他方式安装了ROS 2（通过RPM或二进制分发），请确保在一个新环境中运行以下命令，该环境没有其他安装被引用。还要确保您的``.bashrc``中没有``source /opt/ros/${ROS_DISTRO}/setup.bash``。您可以使用命令``printenv | grep -i ROS``确保ROS 2没有被引用。输出应为空。</p>
<p>有关在ROS工作空间中的操作的更多信息，请参阅：<a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html"><span class="doc">本教程</span></a>。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/ros2_humble/
colcon build --symlink-install --cmake-args -DTHIRDPARTY_Asio<span class="o">=</span>ON --no-warn-unused-cli
</pre></div>
</div>
<p>注意：如果您在编译所有示例时遇到问题，这导致您无法成功构建，您可以像使用 <a class="reference external" href="https://github.com/ros-infrastructure/rep/blob/master/rep-0128.rst">CATKIN_IGNORE</a> 中的``COLCON_IGNORE``一样，忽略子树或从工作空间中删除该文件夹。例如，假设您希望避免安装庞大的OpenCV库。那么只需在``cam2image``演示目录中运行``touch COLCON_IGNORE``，即可将其排除在构建过程之外。</p>
</div>
<div class="section" id="environment-setup">
<h2><a class="toc-backref" href="#id10">环境设置</a><a class="headerlink" href="#environment-setup" title="永久链接至标题"></a></h2>
<div class="section" id="source-the-setup-script">
<h3><a class="toc-backref" href="#id11">执行设置脚本</a><a class="headerlink" href="#source-the-setup-script" title="永久链接至标题"></a></h3>
<p>通过源化以下文件来设置您的环境。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Replace &quot;.bash&quot; with your shell if you&#39;re not using bash</span>
<span class="c1"># Possible values are: setup.bash, setup.sh, setup.zsh</span>
. ~/ros2_humble/install/local_setup.bash
</pre></div>
</div>
</div>
</div>
<div class="section" id="try-some-examples">
<span id="rhel-talker-listener"></span><h2><a class="toc-backref" href="#id12">尝试一些示例</a><a class="headerlink" href="#try-some-examples" title="永久链接至标题"></a></h2>
<p>在一个终端中，先源化设置文件，然后运行C++的``talker``：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros2_humble/install/local_setup.bash
ros2 run demo_nodes_cpp talker
</pre></div>
</div>
<p>在另一个终端中，先源化设置文件，然后运行Python的``listener``：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros2_humble/install/local_setup.bash
ros2 run demo_nodes_py listener
</pre></div>
</div>
<p>你应该看到“talker”说它正在“发布”消息，而“listener”说“我听到了”这些消息。这验证了C++和Python API都正常工作。太棒了！</p>
</div>
<div class="section" id="next-steps-after-installing">
<h2><a class="toc-backref" href="#id13">安装后的下一步</a><a class="headerlink" href="#next-steps-after-installing" title="永久链接至标题"></a></h2>
<p>继续进行:doc:<a class="reference internal" href="../../Tutorials.html"><span class="doc">教程和演示</span></a>，以配置你的环境，创建自己的工作空间和包，并学习ROS 2的核心概念。</p>
</div>
<div class="section" id="additional-rmw-implementations-optional">
<h2><a class="toc-backref" href="#id14">其他RMW实现（可选）</a><a class="headerlink" href="#additional-rmw-implementations-optional" title="永久链接至标题"></a></h2>
<p>ROS 2使用的默认中间件是“Fast DDS”，但是中间件（RMW）可以在运行时替换。请参阅:doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>指南 &lt;../../How-To-Guides/Working-with-multiple-RMW-implementations&gt;`以了解如何使用多个RMW。</p>
</div>
<div class="section" id="alternate-compilers">
<h2><a class="toc-backref" href="#id15">备选编译器</a><a class="headerlink" href="#alternate-compilers" title="永久链接至标题"></a></h2>
<p>使用除gcc之外的其他编译器编译ROS 2很容易。如果你将环境变量``CC``和``CXX``分别设置为可执行的C和C++编译器，并重新触发CMake配置（通过使用``--force-cmake-config``或删除要受影响的软件包），CMake将重新配置并使用不同的编译器。</p>
<div class="section" id="clang">
<h3><a class="toc-backref" href="#id16">Clang</a><a class="headerlink" href="#clang" title="永久链接至标题"></a></h3>
<p>配置CMake以检测并使用Clang的方法：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo dnf install clang
<span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>clang
<span class="nb">export</span> <span class="nv">CXX</span><span class="o">=</span>clang++
colcon build --cmake-force-configure
</pre></div>
</div>
</div>
</div>
<div class="section" id="stay-up-to-date">
<h2><a class="toc-backref" href="#id17">保持更新</a><a class="headerlink" href="#stay-up-to-date" title="永久链接至标题"></a></h2>
<p>参见:doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>../Maintaining-a-Source-Checkout`以定期刷新你的源代码安装。</p>
</div>
<div class="section" id="troubleshooting">
<h2><a class="toc-backref" href="#id18">故障排除</a><a class="headerlink" href="#troubleshooting" title="永久链接至标题"></a></h2>
<p>故障排除技术可以在此处找到：<a class="reference internal" href="../../How-To-Guides/Installation-Troubleshooting.html#linux-troubleshooting"><span class="std std-ref">这里</span></a>。</p>
</div>
<div class="section" id="uninstall">
<h2><a class="toc-backref" href="#id19">卸载</a><a class="headerlink" href="#uninstall" title="永久链接至标题"></a></h2>
<ol class="arabic">
<li><p>如果按照上述指示使用 colcon 安装了工作空间，则“卸载”可能只是打开新终端而不加载工作空间的“setup”文件。这样，您的环境将表现得好像系统中没有安装 Humble。</p></li>
<li><p>如果您还想释放空间，可以使用以下命令删除整个工作空间目录：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf ~/ros2_humble
</pre></div>
</div>
</li>
</ol>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>