<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Installation/Alternatives/Ubuntu-Development-Setup</title>
</head>
<body>
  <div class="section" id="ubuntu-source">
<span id="linux-latest"></span><h1>Ubuntu（源代码）<a class="headerlink" href="#ubuntu-source" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#system-requirements" id="id1">系统要求</a></p></li>
<li><p><a class="reference internal" href="#system-setup" id="id2">系统设置</a></p>
<ul>
<li><p><a class="reference internal" href="#set-locale" id="id3">设置区域设置</a></p></li>
<li><p><a class="reference internal" href="#add-the-ros-2-apt-repository" id="id4">添加 ROS 2 apt 仓库</a></p></li>
<li><p><a class="reference internal" href="#install-development-tools-and-ros-tools" id="id5">安装开发工具和ROS工具</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#get-ros-2-code" id="id6">获取ROS 2代码</a></p></li>
<li><p><a class="reference internal" href="#install-dependencies-using-rosdep" id="id7">使用rosdep安装依赖项</a></p></li>
<li><p><a class="reference internal" href="#install-additional-dds-implementations-optional" id="id8">安装额外的DDS实现（可选）</a></p></li>
<li><p><a class="reference internal" href="#build-the-code-in-the-workspace" id="id9">在工作空间中构建代码</a></p></li>
<li><p><a class="reference internal" href="#environment-setup" id="id10">环境设置</a></p>
<ul>
<li><p><a class="reference internal" href="#source-the-setup-script" id="id11">执行设置脚本</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#try-some-examples" id="id12">尝试一些示例</a></p></li>
<li><p><a class="reference internal" href="#next-steps-after-installing" id="id13">安装后的下一步</a></p></li>
<li><p><a class="reference internal" href="#using-the-ros-1-bridge" id="id14">使用 ROS 1 桥接器</a></p></li>
<li><p><a class="reference internal" href="#additional-rmw-implementations-optional" id="id15">其他RMW实现（可选）</a></p></li>
<li><p><a class="reference internal" href="#alternate-compilers" id="id16">备选编译器</a></p>
<ul>
<li><p><a class="reference internal" href="#clang" id="id17">Clang</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#stay-up-to-date" id="id18">保持更新</a></p></li>
<li><p><a class="reference internal" href="#troubleshooting" id="id19">故障排除</a></p></li>
<li><p><a class="reference internal" href="#uninstall" id="id20">卸载</a></p></li>
</ul>
</div>
<div class="section" id="system-requirements">
<h2><a class="toc-backref" href="#id1">系统要求</a><a class="headerlink" href="#system-requirements" title="永久链接至标题"></a></h2>
<p>Humble Hawksbill的当前基于Debian的目标平台为:</p>
<ul class="simple">
<li><p>Tier 1: Ubuntu Linux - Jammy (22.04) 64位</p></li>
<li><p>Tier 3: Ubuntu Linux - Focal (20.04) 64位</p></li>
<li><p>Tier 3: Debian Linux - Bullseye (11) 64位</p></li>
</ul>
<p>其他具有不同支持级别的Linux平台包括:</p>
<ul class="simple">
<li><p>Arch Linux，请参阅`其他说明 &lt;<a class="reference external" href="https://wiki.archlinux.org/index.php/ROS#ROS_2">https://wiki.archlinux.org/index.php/ROS#ROS_2</a>&gt;`__</p></li>
<li><p>Fedora Linux，请参阅 <a class="reference internal" href="Fedora-Development-Setup.html"><span class="doc">替代说明</span></a></p></li>
<li><p>OpenEmbedded / webOS OSE，请参阅 <a class="reference external" href="https://github.com/ros/meta-ros/wiki/OpenEmbedded-Build-Instructions">替代说明</a></p></li>
</ul>
<p>如 <a class="reference external" href="https://www.ros.org/reps/rep-2000.html">REP 2000</a> 中所定义。</p>
</div>
<div class="section" id="system-setup">
<h2><a class="toc-backref" href="#id2">系统设置</a><a class="headerlink" href="#system-setup" title="永久链接至标题"></a></h2>
<div class="section" id="set-locale">
<h3><a class="toc-backref" href="#id3">设置区域设置</a><a class="headerlink" href="#set-locale" title="永久链接至标题"></a></h3>
<p>确保您的系统支持 <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code> 语言环境。如果您处于最小化环境（例如 Docker 容器），语言环境可能是最小化的，如 <code class="docutils literal notranslate"><span class="pre">POSIX</span></code>。我们使用以下设置进行测试。不过，如果您使用其他支持 UTF-8 的语言环境，应该也没问题。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>locale  <span class="c1"># check for UTF-8</span>

sudo apt update <span class="o">&amp;&amp;</span> sudo apt install locales
sudo locale-gen en_US en_US.UTF-8
sudo update-locale <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8

locale  <span class="c1"># verify settings</span>
</pre></div>
</div>
</div>
<div class="section" id="add-the-ros-2-apt-repository">
<h3><a class="toc-backref" href="#id4">添加 ROS 2 apt 仓库</a><a class="headerlink" href="#add-the-ros-2-apt-repository" title="永久链接至标题"></a></h3>
<p>您需要将 ROS 2 apt 仓库添加到您的系统中。</p>
<p>首先确保已启用 <a class="reference external" href="https://help.ubuntu.com/community/Repositories/Ubuntu">Ubuntu Universe 软件源</a>。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install software-properties-common
sudo add-apt-repository universe
</pre></div>
</div>
<p>然后使用 apt 添加 ROS 2 GPG 密钥。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update <span class="o">&amp;&amp;</span> sudo apt install curl -y
sudo curl -sSL https://raw.githubusercontent.com/ros/rosdistro/master/ros.key -o /usr/share/keyrings/ros-archive-keyring.gpg
</pre></div>
</div>
<p>接下来将软件源添加到您的源列表中。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;deb [arch=</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2"> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu </span><span class="k">$(</span>. /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="nv">$UBUNTU_CODENAME</span><span class="k">)</span><span class="s2"> main&quot;</span> <span class="p">|</span> sudo tee /etc/apt/sources.list.d/ros2.list &gt; /dev/null
</pre></div>
</div>
</div>
<div class="section" id="install-development-tools-and-ros-tools">
<h3><a class="toc-backref" href="#id5">安装开发工具和ROS工具</a><a class="headerlink" href="#install-development-tools-and-ros-tools" title="永久链接至标题"></a></h3>
<p>安装常用软件包。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update <span class="o">&amp;&amp;</span> sudo apt install -y <span class="se">\</span>
  python3-flake8-docstrings <span class="se">\</span>
  python3-pip <span class="se">\</span>
  python3-pytest-cov <span class="se">\</span>
  ros-dev-tools
</pre></div>
</div>
<p>根据您的 Ubuntu 版本安装软件包。</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-VWJ1bnR1IDIyLjA0IExUUyBhbmQgbGF0ZXI=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-VWJ1bnR1IDIyLjA0IExUUyBhbmQgbGF0ZXI=" name="VWJ1bnR1IDIyLjA0IExUUyBhbmQgbGF0ZXI=" role="tab" tabindex="0">Ubuntu 22.04 LTS and later</button><button aria-controls="panel-0-VWJ1bnR1IDIwLjA0IExUUw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-VWJ1bnR1IDIwLjA0IExUUw==" name="VWJ1bnR1IDIwLjA0IExUUw==" role="tab" tabindex="-1">Ubuntu 20.04 LTS</button></div><div aria-labelledby="tab-0-VWJ1bnR1IDIyLjA0IExUUyBhbmQgbGF0ZXI=" class="sphinx-tabs-panel group-tab" id="panel-0-VWJ1bnR1IDIyLjA0IExUUyBhbmQgbGF0ZXI=" name="VWJ1bnR1IDIyLjA0IExUUyBhbmQgbGF0ZXI=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install -y \</span>
<span class="go">   python3-flake8-blind-except \</span>
<span class="go">   python3-flake8-builtins \</span>
<span class="go">   python3-flake8-class-newline \</span>
<span class="go">   python3-flake8-comprehensions \</span>
<span class="go">   python3-flake8-deprecated \</span>
<span class="go">   python3-flake8-import-order \</span>
<span class="go">   python3-flake8-quotes \</span>
<span class="go">   python3-pytest-repeat \</span>
<span class="go">   python3-pytest-rerunfailures</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-VWJ1bnR1IDIwLjA0IExUUw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-VWJ1bnR1IDIwLjA0IExUUw==" name="VWJ1bnR1IDIwLjA0IExUUw==" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m pip install -U <span class="se">\</span>
   flake8-blind-except <span class="se">\</span>
   flake8-builtins <span class="se">\</span>
   flake8-class-newline <span class="se">\</span>
   flake8-comprehensions <span class="se">\</span>
   flake8-deprecated <span class="se">\</span>
   flake8-import-order <span class="se">\</span>
   flake8-quotes <span class="se">\</span>
   <span class="s2">&quot;pytest&gt;=5.3&quot;</span> <span class="se">\</span>
   pytest-repeat <span class="se">\</span>
   pytest-rerunfailures
</pre></div>
</div>
</div></div>
</div>
</div>
<div class="section" id="get-ros-2-code">
<span id="linux-dev-get-ros2-code"></span><h2><a class="toc-backref" href="#id6">获取ROS 2代码</a><a class="headerlink" href="#get-ros-2-code" title="永久链接至标题"></a></h2>
<p>创建一个工作空间并克隆所有仓库：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/ros2_humble/src
<span class="nb">cd</span> ~/ros2_humble
vcs import --input https://raw.githubusercontent.com/ros2/ros2/humble/ros2.repos src
</pre></div>
</div>
</div>
<div class="section" id="install-dependencies-using-rosdep">
<span id="linux-development-setup-install-dependencies-using-rosdep"></span><h2><a class="toc-backref" href="#id7">使用rosdep安装依赖项</a><a class="headerlink" href="#install-dependencies-using-rosdep" title="永久链接至标题"></a></h2>
<p>ROS 2 包是建立在频繁更新的 Ubuntu 系统上的。在安装新的包之前，始终建议确保您的系统是最新的。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt upgrade
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo rosdep init
rosdep update
rosdep install --from-paths src --ignore-src -y --skip-keys <span class="s2">&quot;fastcdr rti-connext-dds-6.0.1 urdfdom_headers&quot;</span>
</pre></div>
</div>
<p><strong>注意</strong>：如果您使用的是基于 Ubuntu 的发行版（如 Linux Mint），但它没有将自己标识为 Ubuntu，您将收到类似 <code class="docutils literal notranslate"><span class="pre">Unsupported</span> <span class="pre">OS</span> <span class="pre">[mint]</span></code> 的错误消息。在这种情况下，请在上述命令后面添加 <code class="docutils literal notranslate"><span class="pre">--os=ubuntu:jammy</span></code>。</p>
</div>
<div class="section" id="install-additional-dds-implementations-optional">
<h2><a class="toc-backref" href="#id8">安装额外的DDS实现（可选）</a><a class="headerlink" href="#install-additional-dds-implementations-optional" title="永久链接至标题"></a></h2>
<p>如果您想使用默认之外的其他DDS或RTPS供应商，您可以在这里找到说明：<a class="reference internal" href="../DDS-Implementations.html"><span class="doc">这里</span></a>。</p>
</div>
<div class="section" id="build-the-code-in-the-workspace">
<h2><a class="toc-backref" href="#id9">在工作空间中构建代码</a><a class="headerlink" href="#build-the-code-in-the-workspace" title="永久链接至标题"></a></h2>
<p>如果您已经以其他方式安装了 ROS 2（无论是通过 Debian 还是二进制发行版），请确保在没有这些其他安装源的新环境中运行以下命令。还要确保您的 <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> 文件中没有 <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">/opt/ros/${ROS_DISTRO}/setup.bash</span></code>。您可以使用命令 <code class="docutils literal notranslate"><span class="pre">printenv</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">-i</span> <span class="pre">ROS</span></code> 确认未加载 ROS 2。输出应为空。</p>
<p>有关在ROS工作空间中的操作的更多信息，请参阅：<a class="reference internal" href="../../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html"><span class="doc">本教程</span></a>。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/ros2_humble/
colcon build --symlink-install
</pre></div>
</div>
<p>注意：如果您在编译所有示例时遇到问题，这导致您无法成功构建，您可以像使用 <a class="reference external" href="https://github.com/ros-infrastructure/rep/blob/master/rep-0128.rst">CATKIN_IGNORE</a> 中的``COLCON_IGNORE``一样，忽略子树或从工作空间中删除该文件夹。例如，假设您希望避免安装庞大的OpenCV库。那么只需在``cam2image``演示目录中运行``touch COLCON_IGNORE``，即可将其排除在构建过程之外。</p>
</div>
<div class="section" id="environment-setup">
<h2><a class="toc-backref" href="#id10">环境设置</a><a class="headerlink" href="#environment-setup" title="永久链接至标题"></a></h2>
<div class="section" id="source-the-setup-script">
<h3><a class="toc-backref" href="#id11">执行设置脚本</a><a class="headerlink" href="#source-the-setup-script" title="永久链接至标题"></a></h3>
<p>通过源化以下文件来设置您的环境。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Replace &quot;.bash&quot; with your shell if you&#39;re not using bash</span>
<span class="c1"># Possible values are: setup.bash, setup.sh, setup.zsh</span>
. ~/ros2_humble/install/local_setup.bash
</pre></div>
</div>
</div>
</div>
<div class="section" id="try-some-examples">
<span id="talker-listener"></span><h2><a class="toc-backref" href="#id12">尝试一些示例</a><a class="headerlink" href="#try-some-examples" title="永久链接至标题"></a></h2>
<p>在一个终端中，先源化设置文件，然后运行C++的``talker``：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros2_humble/install/local_setup.bash
ros2 run demo_nodes_cpp talker
</pre></div>
</div>
<p>在另一个终端中，先源化设置文件，然后运行Python的``listener``：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. ~/ros2_humble/install/local_setup.bash
ros2 run demo_nodes_py listener
</pre></div>
</div>
<p>你应该看到“talker”说它正在“发布”消息，而“listener”说“我听到了”这些消息。这验证了C++和Python API都正常工作。太棒了！</p>
</div>
<div class="section" id="next-steps-after-installing">
<h2><a class="toc-backref" href="#id13">安装后的下一步</a><a class="headerlink" href="#next-steps-after-installing" title="永久链接至标题"></a></h2>
<p>继续进行:doc:<a class="reference internal" href="../../Tutorials.html"><span class="doc">教程和演示</span></a>，以配置你的环境，创建自己的工作空间和包，并学习ROS 2的核心概念。</p>
</div>
<div class="section" id="using-the-ros-1-bridge">
<h2><a class="toc-backref" href="#id14">使用 ROS 1 桥接器</a><a class="headerlink" href="#using-the-ros-1-bridge" title="永久链接至标题"></a></h2>
<p>ROS 1 桥接器可以连接 ROS 1 和 ROS 2 的主题。请参阅专门的 <a class="reference external" href="https://github.com/ros2/ros1_bridge/blob/master/README.md">文档</a> 以了解如何构建和使用 ROS 1 桥接器。</p>
</div>
<div class="section" id="additional-rmw-implementations-optional">
<h2><a class="toc-backref" href="#id15">其他RMW实现（可选）</a><a class="headerlink" href="#additional-rmw-implementations-optional" title="永久链接至标题"></a></h2>
<p>ROS 2使用的默认中间件是“Fast DDS”，但是中间件（RMW）可以在运行时替换。请参阅:doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>指南 &lt;../../How-To-Guides/Working-with-multiple-RMW-implementations&gt;`以了解如何使用多个RMW。</p>
</div>
<div class="section" id="alternate-compilers">
<h2><a class="toc-backref" href="#id16">备选编译器</a><a class="headerlink" href="#alternate-compilers" title="永久链接至标题"></a></h2>
<p>使用除gcc之外的其他编译器编译ROS 2很容易。如果你将环境变量``CC``和``CXX``分别设置为可执行的C和C++编译器，并重新触发CMake配置（通过使用``--force-cmake-config``或删除要受影响的软件包），CMake将重新配置并使用不同的编译器。</p>
<div class="section" id="clang">
<h3><a class="toc-backref" href="#id17">Clang</a><a class="headerlink" href="#clang" title="永久链接至标题"></a></h3>
<p>配置CMake以检测并使用Clang的方法：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install clang
<span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>clang
<span class="nb">export</span> <span class="nv">CXX</span><span class="o">=</span>clang++
colcon build --cmake-force-configure
</pre></div>
</div>
</div>
</div>
<div class="section" id="stay-up-to-date">
<h2><a class="toc-backref" href="#id18">保持更新</a><a class="headerlink" href="#stay-up-to-date" title="永久链接至标题"></a></h2>
<p>参见:doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>../Maintaining-a-Source-Checkout`以定期刷新你的源代码安装。</p>
</div>
<div class="section" id="troubleshooting">
<h2><a class="toc-backref" href="#id19">故障排除</a><a class="headerlink" href="#troubleshooting" title="永久链接至标题"></a></h2>
<p>故障排除技术可以在此处找到：<a class="reference internal" href="../../How-To-Guides/Installation-Troubleshooting.html#linux-troubleshooting"><span class="std std-ref">这里</span></a>。</p>
</div>
<div class="section" id="uninstall">
<h2><a class="toc-backref" href="#id20">卸载</a><a class="headerlink" href="#uninstall" title="永久链接至标题"></a></h2>
<ol class="arabic">
<li><p>如果按照上述指示使用 colcon 安装了工作空间，则“卸载”可能只是打开新终端而不加载工作空间的“setup”文件。这样，您的环境将表现得好像系统中没有安装 Humble。</p></li>
<li><p>如果您还想释放空间，可以使用以下命令删除整个工作空间目录：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm -rf ~/ros2_humble
</pre></div>
</div>
</li>
</ol>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>