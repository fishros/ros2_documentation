<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Beginner-Client-Libraries/Colcon-Tutorial</title>
</head>
<body>
  <div class="section" id="using-colcon-to-build-packages">
<span id="colcon"></span><h1>使用 <code class="docutils literal notranslate"><span class="pre">colcon</span></code> 构建软件包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4368">[4368]</a><a class="headerlink" href="#using-colcon-to-build-packages" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3070">[]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#background" id="id1">背景 [3072]</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id2">先决条件 [3124]</a></p>
<ul>
<li><p><a class="reference internal" href="#install-colcon" id="id3">安装 colcon [4373]</a></p></li>
<li><p><a class="reference internal" href="#install-ros-2" id="id4">安装 ROS 2 [4374]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#basics" id="id5">基础知识 []</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-workspace" id="id6">创建一个工作空间 [4385]</a></p></li>
<li><p><a class="reference internal" href="#add-some-sources" id="id7">添加一些源文件 [4388]</a></p></li>
<li><p><a class="reference internal" href="#source-an-underlay" id="id8">源目录 [4391]</a></p></li>
<li><p><a class="reference internal" href="#build-the-workspace" id="id9">构建工作空间 [4394]</a></p></li>
<li><p><a class="reference internal" href="#run-tests" id="id10">运行测试 [4399]</a></p></li>
<li><p><a class="reference internal" href="#source-the-environment" id="id11">加载环境变量 [4403]</a></p></li>
<li><p><a class="reference internal" href="#try-a-demo" id="id12">试用演示 [4406]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#create-your-own-package" id="id13">创建你自己的包 [4410]</a></p></li>
<li><p><a class="reference internal" href="#setup-colcon-cd" id="id14">设置 <code class="docutils literal notranslate"><span class="pre">colcon_cd</span></code> [4417]</a></p></li>
<li><p><a class="reference internal" href="#setup-colcon-tab-completion" id="id15">设置 <code class="docutils literal notranslate"><span class="pre">colcon</span></code> 的选项自动补全 [4421]</a></p></li>
<li><p><a class="reference internal" href="#tips" id="id16">提示 [4424]</a></p></li>
</ul>
</div>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>目标：<a href="#id3"><span class="problematic" id="id4">**</span></a>使用``colcon``构建一个ROS 2工作空间。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4369">[4369]</a></p>
<p><strong>教程级别:</strong> 初学者 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3951">[3951]</a></p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>时间：<a href="#id3"><span class="problematic" id="id4">**</span></a>20分钟 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3069">[3069]</a></p>
<p>这是一个简要教程，介绍如何使用``colcon``创建和构建ROS 2工作空间。它是一个实用教程，不旨在取代核心文档。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4370">[4370]</a></p>
<div class="section" id="background">
<h2>背景 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3072">[3072]</a><a class="headerlink" href="#background" title="永久链接至标题"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">colcon``是对ROS构建工具``catkin_make</span></code>、<code class="docutils literal notranslate"><span class="pre">catkin_make_isolated</span></code>、<a href="#id1"><span class="problematic" id="id2">``</span></a>catkin_tools``和``ament_tools``的改进。有关colcon设计的更多信息，请参阅`此文档 &lt;<a class="reference external" href="https://design.ros2.org/articles/build_tool.html">https://design.ros2.org/articles/build_tool.html</a>&gt;`__。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4371">[4371]</a></p>
<p>源代码可以在`colcon GitHub组织 &lt;<a class="reference external" href="https://github.com/colcon">https://github.com/colcon</a>&gt;`__中找到。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4372">[4372]</a></p>
</div>
<div class="section" id="prerequisites">
<h2>先决条件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3124">[3124]</a><a class="headerlink" href="#prerequisites" title="永久链接至标题"></a></h2>
<div class="section" id="install-colcon">
<h3>安装 colcon <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4373">[4373]</a><a class="headerlink" href="#install-colcon" title="永久链接至标题"></a></h3>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-0-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-0-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-0-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-0-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install python3-colcon-common-extensions
</pre></div>
</div>
</div><div aria-labelledby="tab-0-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m pip install colcon-common-extensions
</pre></div>
</div>
</div><div aria-labelledby="tab-0-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -U colcon-common-extensions
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="install-ros-2">
<h3>安装 ROS 2 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4374">[4374]</a><a class="headerlink" href="#install-ros-2" title="永久链接至标题"></a></h3>
<p>要构建示例，您需要安装 ROS 2。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4375">[4375]</a></p>
<p>请按照 <a class="reference internal" href="../../Installation.html"><span class="doc">安装说明</span></a> 进行操作。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4376">[4376]</a></p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>如果从Debian软件包安装，请参考 <a class="reference internal" href="../../Installation/Ubuntu-Install-Debians.html#linux-install-debians-install-ros-2-packages"><span class="std std-ref">桌面安装</span></a> 进行教程。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4377">[4377]</a></p>
</div>
</div>
</div>
<div class="section" id="basics">
<h2>基础知识 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4378">[]</a><a class="headerlink" href="#basics" title="永久链接至标题"></a></h2>
<p>ROS工作空间是一个具有特定结构的目录。通常有一个 <code class="docutils literal notranslate"><span class="pre">src</span></code> 子目录。在该子目录下是ROS软件包的源代码所在位置。通常该目录开始时为空。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4379">[4379]</a></p>
<p>colcon进行外部构建。默认情况下，它会创建以下目录作为 <code class="docutils literal notranslate"><span class="pre">src</span></code> 目录的同级目录： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4380">[4380]</a></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">build</span></code> 目录将用于存储中间文件。对于每个软件包，将在其中创建一个子文件夹，例如在该子文件夹中调用 CMake。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4381">[4381]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">install</span></code> 目录是每个软件包将要安装到的位置。默认情况下，每个软件包将被安装到单独的子目录中。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4382">[4382]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code> 目录包含有关每个 colcon 调用的各种日志信息。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4383">[4383]</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>与 catkin 相比，没有 <code class="docutils literal notranslate"><span class="pre">devel</span></code> 目录。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4384">[4384]</a></p>
</div>
<div class="section" id="create-a-workspace">
<h3>创建一个工作空间 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4385">[4385]</a><a class="headerlink" href="#create-a-workspace" title="永久链接至标题"></a></h3>
<p>首先，创建一个目录（<code class="docutils literal notranslate"><span class="pre">ros2_ws</span></code>）来容纳我们的工作空间： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4386">[4386]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-1-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-1-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-1-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-1-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/ros2_ws/src
<span class="nb">cd</span> ~/ros2_ws
</pre></div>
</div>
</div><div aria-labelledby="tab-1-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/ros2_ws/src
<span class="nb">cd</span> ~/ros2_ws
</pre></div>
</div>
</div><div aria-labelledby="tab-1-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>md <span class="se">\d</span>ev<span class="se">\r</span>os2_ws<span class="se">\s</span>rc
<span class="nb">cd</span> <span class="se">\d</span>ev<span class="se">\r</span>os2_ws
</pre></div>
</div>
</div></div>
<p>此时，工作空间中只包含一个空目录 <code class="docutils literal notranslate"><span class="pre">src</span></code>： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4387">[4387]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
└── src

<span class="m">1</span> directory, <span class="m">0</span> files
</pre></div>
</div>
</div>
<div class="section" id="add-some-sources">
<h3>添加一些源文件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4388">[4388]</a><a class="headerlink" href="#add-some-sources" title="永久链接至标题"></a></h3>
<p>将 <a class="reference external" href="https://github.com/ros2/examples">examples</a> 存储库克隆到工作区的 <code class="docutils literal notranslate"><span class="pre">src</span></code> 目录中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4389">[4389]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/ros2/examples src/examples -b humble
</pre></div>
</div>
<p>现在工作区应该有 ROS 2 示例的源代码： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4390">[4390]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
└── src
    └── examples
        ├── CONTRIBUTING.md
        ├── LICENSE
        ├── rclcpp
        ├── rclpy
        └── README.md

<span class="m">4</span> directories, <span class="m">3</span> files
</pre></div>
</div>
</div>
<div class="section" id="source-an-underlay">
<h3>源目录 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4391">[4391]</a><a class="headerlink" href="#source-an-underlay" title="永久链接至标题"></a></h3>
<p>很重要的是，我们已经为现有的 ROS 2 安装环境提供了所需的构建依赖项，以便为示例软件包提供支持。这可以通过对二进制安装或源码安装提供的设置脚本进行实现，即使用另一个 colcon 工作区提供的设置脚本（参见 <a class="reference internal" href="../../Installation.html"><span class="doc">Installation</span></a>）。我们称这个环境为 <strong>源目录</strong>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4392">[4392]</a></p>
<p>我们的工作空间``ros2_ws``将作为现有ROS 2安装的**覆盖层**。一般而言，建议在计划迭代少量软件包时使用覆盖层，而不是将所有软件包放入同一个工作空间中。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4393">[4393]</a></p>
</div>
<div class="section" id="build-the-workspace">
<h3>构建工作空间 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4394">[4394]</a><a class="headerlink" href="#build-the-workspace" title="永久链接至标题"></a></h3>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>要在Windows上构建软件包，您需要处于Visual Studio环境中，请参阅 <a class="reference internal" href="../../Installation/Alternatives/Windows-Development-Setup.html#windows-dev-build-ros2"><span class="std std-ref">构建ROS 2代码</span></a> 获取更多详细信息。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4395">[4395]</a></p>
</div>
<p>在工作空间的根目录下运行``colcon build``命令。由于``ament_cmake``等构建类型不支持``devel``空间的概念，而且需要安装软件包，因此colcon支持选项``--symlink-install``。这允许通过更改``source``空间中的文件（例如Python文件或其他非编译资源）来更改已安装文件，以便实现更快的迭代。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4396">[4396]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-2-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-2-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-2-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-2-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build --symlink-install</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build --symlink-install</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build --symlink-install --merge-install</span>
</pre></div>
</div>
<p>Windows 不允许使用过长的路径，所以 <code class="docutils literal notranslate"><span class="pre">merge-install</span></code> 将会把所有路径合并到 <code class="docutils literal notranslate"><span class="pre">install</span></code> 目录中。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4397">[4397]</a></p>
</div></div>
<p>在构建完成后，我们应该能够看到 <code class="docutils literal notranslate"><span class="pre">build</span></code>、<code class="docutils literal notranslate"><span class="pre">install</span></code> 和 <code class="docutils literal notranslate"><span class="pre">log</span></code> 目录： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4398">[4398]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>.
├── build
├── install
├── log
└── src

<span class="m">4</span> directories, <span class="m">0</span> files
</pre></div>
</div>
</div>
<div class="section" id="run-tests">
<span id="colcon-run-the-tests"></span><h3>运行测试 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4399">[4399]</a><a class="headerlink" href="#run-tests" title="永久链接至标题"></a></h3>
<p>为了对刚刚构建的软件包运行测试，请执行以下操作： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4400">[4400]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-3-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-3-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-3-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-3-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon test</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon test</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>请记得使用``x64 Native Tools Command Prompt for VS 2019``来执行下面的命令，因为我们要构建一个工作空间。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4401">[4401]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon test --merge-install</span>
</pre></div>
</div>
<p>在这里还需要指定``--merge-install``，因为我们在上面使用了它来进行构建。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4402">[4402]</a></p>
</div></div>
</div>
<div class="section" id="source-the-environment">
<span id="colcon-tutorial-source-the-environment"></span><h3>加载环境变量 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4403">[4403]</a><a class="headerlink" href="#source-the-environment" title="永久链接至标题"></a></h3>
<p>当colcon成功构建完成后，输出将位于``install``目录中。在您可以使用任何已安装的可执行文件或库之前，您需要将它们添加到您的路径和库路径中。colcon会在``install``目录中生成bash/bat文件来帮助设置环境。这些文件将会将所有所需的元素添加到您的路径和库路径中，并提供由软件包导出的任何bash或shell命令。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4404">[4404]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-4-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-4-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-4-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-4-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> install/setup.bash
</pre></div>
</div>
</div><div aria-labelledby="tab-4-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. install/setup.bash
</pre></div>
</div>
</div><div aria-labelledby="tab-4-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>call install<span class="se">\s</span>etup.bat
</pre></div>
</div>
<p>使用Powershell： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4405">[4405]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>install<span class="se">\s</span>etup.ps1
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="try-a-demo">
<h3>试用演示 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4406">[4406]</a><a class="headerlink" href="#try-a-demo" title="永久链接至标题"></a></h3>
<p>在环境配置完成后，我们可以运行由colcon构建的可执行文件。让我们从示例中运行一个订阅者节点： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4407">[4407]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run examples_rclcpp_minimal_subscriber subscriber_member_function
</pre></div>
</div>
<p>在另一个终端中，让我们运行一个发布者节点（不要忘记配置脚本）： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4408">[4408]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run examples_rclcpp_minimal_publisher publisher_member_function
</pre></div>
</div>
<p>你应该能够看到发布者和订阅者的消息，并且消息编号会递增。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4409">[4409]</a></p>
</div>
</div>
<div class="section" id="create-your-own-package">
<h2>创建你自己的包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4410">[4410]</a><a class="headerlink" href="#create-your-own-package" title="永久链接至标题"></a></h2>
<p>colcon使用在`REP 149 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-0149.html">https://www.ros.org/reps/rep-0149.html</a>&gt;`__中定义的``package.xml``规范（也支持`format 2 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-0140.html">https://www.ros.org/reps/rep-0140.html</a>&gt;`__）。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4411">[4411]</a></p>
<p>colcon支持多种构建类型。推荐的构建类型是``ament_cmake``和``ament_python``。还支持纯``cmake``包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4412">[4412]</a></p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>ament_python``构建的一个示例是`ament_index_python包 &lt;<a class="reference external" href="https://github.com/ament/ament_index/tree/humble/ament_index_python">https://github.com/ament/ament_index/tree/humble/ament_index_python</a>&gt;`__，其中setup.py是构建的主要入口点。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4413">[4413]</a></p>
<p>诸如`demo_nodes_cpp &lt;<a class="reference external" href="https://github.com/ros2/demos/tree/humble/demo_nodes_cpp">https://github.com/ros2/demos/tree/humble/demo_nodes_cpp</a>&gt;`__的包使用``ament_cmake``构建类型，并使用CMake作为构建工具。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4414">[4414]</a></p>
<p>为了方便起见，您可以使用``ros2 pkg create``工具基于模板创建一个新的包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4415">[4415]</a></p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>对于``catkin``用户来说，这相当于``catkin_create_package``。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4416">[4416]</a></p>
</div>
</div>
<div class="section" id="setup-colcon-cd">
<h2>设置 <code class="docutils literal notranslate"><span class="pre">colcon_cd</span></code> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4417">[4417]</a><a class="headerlink" href="#setup-colcon-cd" title="永久链接至标题"></a></h2>
<p>命令 <code class="docutils literal notranslate"><span class="pre">colcon_cd</span></code> 允许您快速将当前工作目录更改为包的目录。例如，<code class="docutils literal notranslate"><span class="pre">colcon_cd</span> <span class="pre">some_ros_package</span></code> 可快速将您导航到目录 <code class="docutils literal notranslate"><span class="pre">~/ros2_ws/src/some_ros_package</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4418">[4418]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-5-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-5-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-5-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-5-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;source /usr/share/colcon_cd/function/colcon_cd.sh&quot; &gt;&gt; ~/.bashrc</span>
<span class="go">echo &quot;export _colcon_cd_root=/opt/ros/humble/&quot; &gt;&gt; ~/.bashrc</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;source /usr/local/share/colcon_cd/function/colcon_cd.sh&quot; &gt;&gt; ~/.bashrc</span>
<span class="go">echo &quot;export _colcon_cd_root=~/ros2_install&quot; &gt;&gt; ~/.bashrc</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>尚未可用 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4419">[4419]</a></p>
</div></div>
<p>根据您安装 <code class="docutils literal notranslate"><span class="pre">colcon_cd</span></code> 的方式和工作空间的位置，上述说明可能有所不同，请参考 <a class="reference external" href="https://colcon.readthedocs.io/en/released/user/installation.html#quick-directory-changes">文档</a> 以获取更多详细信息。要在Linux和macOS上撤消此操作，请找到系统的shell启动脚本并删除附加的source和export命令。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4420">[4420]</a></p>
</div>
<div class="section" id="setup-colcon-tab-completion">
<h2>设置 <code class="docutils literal notranslate"><span class="pre">colcon</span></code> 的选项自动补全 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4421">[4421]</a><a class="headerlink" href="#setup-colcon-tab-completion" title="永久链接至标题"></a></h2>
<p>如果已安装 <code class="docutils literal notranslate"><span class="pre">colcon-argcomplete</span></code> 包，则命令 <code class="docutils literal notranslate"><span class="pre">colcon</span></code> <a class="reference external" href="https://colcon.readthedocs.io/en/released/user/installation.html#enable-completion">支持命令补全</a>，适用于 bash 和类似 bash 的 shell。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4422">[4422]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-6-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-6-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-6-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-6-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-6-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;source /usr/share/colcon_argcomplete/hook/colcon-argcomplete.bash&quot; &gt;&gt; ~/.bashrc</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;source $HOME/.local/share/colcon_argcomplete/hook/colcon-argcomplete.bash&quot; &gt;&gt; ~/.bash_profile</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>尚未可用 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4419">[4419]</a></p>
</div></div>
<p>根据您安装 <code class="docutils literal notranslate"><span class="pre">colcon</span></code> 的方式和工作空间的位置，上述说明可能会有所不同，请参考 <a class="reference external" href="https://colcon.readthedocs.io/en/released/user/installation.html">文档</a> 获取更多详细信息。要在 Linux 和 macOS 上撤消此操作，请找到您系统的 shell 启动脚本并删除附加的源命令。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4423">[4423]</a></p>
</div>
<div class="section" id="tips">
<h2>提示 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4424">[4424]</a><a class="headerlink" href="#tips" title="永久链接至标题"></a></h2>
<ul>
<li><p>如果您不想构建特定的软件包，请在目录中放置一个名为“COLCON_IGNORE”的空文件，它将不会被索引。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4425">[4425]</a></p></li>
<li><p>如果您想避免在CMake软件包中配置和构建测试，您可以传递参数：<code class="docutils literal notranslate"><span class="pre">--cmake-args</span> <span class="pre">-DBUILD_TESTING=0</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4426">[4426]</a></p></li>
<li><p>如果您想从软件包中运行单个特定测试： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4427">[4427]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon <span class="nb">test</span> --packages-select YOUR_PKG_NAME --ctest-args -R YOUR_TEST_IN_PKG
</pre></div>
</div>
</li>
</ul>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>