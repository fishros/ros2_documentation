<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment</title>
</head>
<body>
  <div class="section" id="configuring-environment">
<span id="configros2"></span><h1>配置环境<a class="headerlink" href="#configuring-environment" title="永久链接至标题"></a></h1>
<p><strong>目标:</strong> 本教程将向您展示如何准备您的ROS 2环境。</p>
<p><strong>教程级别:</strong> 初学者</p>
<p><strong>时间：</strong> 5分钟</p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容</p>
<ul class="simple">
<li><p><a class="reference internal" href="#background" id="id1">背景</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id2">先决条件</a></p></li>
<li><p><a class="reference internal" href="#tasks" id="id3">任务</a></p>
<ul>
<li><p><a class="reference internal" href="#source-the-setup-files" id="id4">1 导入设置文件</a></p></li>
<li><p><a class="reference internal" href="#add-sourcing-to-your-shell-startup-script" id="id5">2 将源命令添加到您的shell启动脚本</a></p></li>
<li><p><a class="reference internal" href="#check-environment-variables" id="id6">3 检查环境变量</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#summary" id="id7">总结</a></p></li>
<li><p><a class="reference internal" href="#next-steps" id="id8">下一步</a></p></li>
</ul>
</div>
<div class="section" id="background">
<h2><a class="toc-backref" href="#id1">背景</a><a class="headerlink" href="#background" title="永久链接至标题"></a></h2>
<p>ROS 2依赖于使用Shell环境组合工作空间的概念。&quot;工作空间&quot;是ROS中用于开发ROS 2的位置。核心ROS 2工作空间称为underlay。随后的本地工作空间称为overlays。在使用ROS 2进行开发时，通常会同时激活多个工作空间。</p>
<p>合并工作空间使得针对不同版本的ROS 2或不同包集进行开发更加容易。它还允许在同一台计算机上安装多个ROS 2发行版（或“distros”，如Dashing和Eloquent），并在它们之间进行切换。</p>
<p>这可以通过在每次打开新的Shell时源化设置文件，或者将source命令添加到Shell启动脚本中来实现。如果不源化设置文件，您将无法访问ROS 2命令，也无法找到或使用ROS 2包。换句话说，您将无法使用ROS 2。</p>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#id2">先决条件</a><a class="headerlink" href="#prerequisites" title="永久链接至标题"></a></h2>
<p>在开始这些教程之前，请按照ROS 2 :doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>../../Installation`页面上的说明安装ROS 2。</p>
<p>本教程中使用的命令假设您按照操作系统的二进制包安装指南进行操作（Linux的Debian包）。如果您从源代码构建，仍然可以按照本教程进行操作，但是您的设置文件路径可能会不同。如果您从源代码安装，您还将无法使用“sudo apt install ros-&lt;distro&gt;-&lt;package&gt;”命令（在初学者级别教程中经常使用）。</p>
<p>如果您正在使用Linux或macOS，但尚未熟悉Shell，则`此教程 &lt;<a class="reference external" href="http://www.ee.surrey.ac.uk/Teaching/Unix/">http://www.ee.surrey.ac.uk/Teaching/Unix/</a>&gt;`__将有所帮助。</p>
</div>
<div class="section" id="tasks">
<h2><a class="toc-backref" href="#id3">任务</a><a class="headerlink" href="#tasks" title="永久链接至标题"></a></h2>
<div class="section" id="source-the-setup-files">
<h3><a class="toc-backref" href="#id4">1 导入设置文件</a><a class="headerlink" href="#source-the-setup-files" title="永久链接至标题"></a></h3>
<p>您需要在每次打开新的Shell时运行此命令以便访问ROS 2命令，如下所示：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-0-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-0-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-0-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-0-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Replace &quot;.bash&quot; with your shell if you&#39;re not using bash</span>
<span class="c1"># Possible values are: setup.bash, setup.sh, setup.zsh</span>
<span class="nb">source</span> /opt/ros/humble/setup.bash
</pre></div>
</div>
</div><div aria-labelledby="tab-0-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">. ~/ros2_install/ros2-osx/setup.bash</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">call C:\dev\ros2\local_setup.bat</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>确切的命令取决于您安装ROS 2的位置。如果遇到问题，请确保文件路径指向您的安装位置。</p>
</div>
</div>
<div class="section" id="add-sourcing-to-your-shell-startup-script">
<h3><a class="toc-backref" href="#id5">2 将源命令添加到您的shell启动脚本</a><a class="headerlink" href="#add-sourcing-to-your-shell-startup-script" title="永久链接至标题"></a></h3>
<p>如果您不想每次打开新的shell时都要进行源命令设置（跳过任务1），您可以将该命令添加到您的shell启动脚本中：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-1-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-1-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-1-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-1-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;source /opt/ros/humble/setup.bash&quot; &gt;&gt; ~/.bashrc</span>
</pre></div>
</div>
</div></blockquote>
<p>要撤销此操作，请找到您系统的shell启动脚本，并删除附加的源命令。</p>
</div><div aria-labelledby="tab-1-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;source ~/ros2_install/ros2-osx/setup.bash&quot; &gt;&gt; ~/.bash_profile</span>
</pre></div>
</div>
<p>要撤销此操作，请找到您系统的shell启动脚本，并删除附加的源命令。</p>
</div><div aria-labelledby="tab-1-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><p>仅适用于PowerShell用户，在'My Documents'中创建一个名为'WindowsPowerShell'的文件夹。在'WindowsPowerShell'文件夹中，创建名为'Microsoft.PowerShell_profile.ps1'的文件。在文件中粘贴以下内容：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">C:\dev\ros2_humble\local_setup.ps1</span>
</pre></div>
</div>
<p>每次打开新的shell时，PowerShell都会请求运行此脚本的权限。为了避免这个问题，您可以运行：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Unblock-File C:\dev\ros2_humble\local_setup.ps1</span>
</pre></div>
</div>
<p>要撤销此操作，请删除新的'Microsoft.PowerShell_profile.ps1'文件。</p>
</div></div>
</div>
<div class="section" id="check-environment-variables">
<h3><a class="toc-backref" href="#id6">3 检查环境变量</a><a class="headerlink" href="#check-environment-variables" title="永久链接至标题"></a></h3>
<p>使用ROS 2设置文件会设置几个操作ROS 2所必需的环境变量。如果您在查找或使用ROS 2软件包时遇到问题，请确保您的环境已经正确设置，可以使用以下命令：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-2-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-2-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-2-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-2-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">printenv | grep -i ROS</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">printenv | grep -i ROS</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">set | findstr -i ROS</span>
</pre></div>
</div>
</div></div>
<p>检查变量，如 <code class="docutils literal notranslate"><span class="pre">ROS_DISTRO</span></code> 和 <code class="docutils literal notranslate"><span class="pre">ROS_VERSION</span></code> 是否设置正确。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ROS_VERSION</span><span class="o">=</span><span class="mi">2</span>
<span class="n">ROS_PYTHON_VERSION</span><span class="o">=</span><span class="mi">3</span>
<span class="n">ROS_DISTRO</span><span class="o">=</span><span class="n">humble</span>
</pre></div>
</div>
<p>如果环境变量设置不正确，请返回到您所遵循的安装指南的 ROS 2 包安装部分。如果您需要更具体的帮助（因为环境设置文件可能来自不同的位置），您可以从社区 <a class="reference external" href="https://answers.ros.org">获取答案</a>。</p>
<div class="section" id="the-ros-domain-id-variable">
<h4>3.1 <code class="docutils literal notranslate"><span class="pre">ROS_DOMAIN_ID</span></code> 变量<a class="headerlink" href="#the-ros-domain-id-variable" title="永久链接至标题"></a></h4>
<p>有关 ROS 域 ID 的详细信息，请参阅 <a class="reference internal" href="../../Concepts/About-Domain-ID.html"><span class="doc">域 ID</span></a> 文章。</p>
<p>确定了ROS 2节点组的唯一整数后，可以使用以下命令设置环境变量：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-3-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-3-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-3-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-3-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ROS_DOMAIN_ID=&lt;your_domain_id&gt;</span>
</pre></div>
</div>
<p>为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;export ROS_DOMAIN_ID=&lt;your_domain_id&gt;&quot; &gt;&gt; ~/.bashrc</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ROS_DOMAIN_ID=&lt;your_domain_id&gt;</span>
</pre></div>
</div>
<p>为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;export ROS_DOMAIN_ID=&lt;your_domain_id&gt;&quot; &gt;&gt; ~/.bash_profile</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">set ROS_DOMAIN_ID=&lt;your_domain_id&gt;</span>
</pre></div>
</div>
<p>如果想要在不同的shell会话之间永久生效，还需要运行以下命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">setx ROS_DOMAIN_ID &lt;your_domain_id&gt;</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="the-ros-localhost-only-variable">
<h4>3.2 <code class="docutils literal notranslate"><span class="pre">ROS_LOCALHOST_ONLY</span></code> 变量<a class="headerlink" href="#the-ros-localhost-only-variable" title="永久链接至标题"></a></h4>
<p>默认情况下，ROS 2通信不限于本地主机。<a href="#id1"><span class="problematic" id="id2">``</span></a>ROS_LOCALHOST_ONLY``环境变量允许您将ROS 2通信限制为仅限本地主机。这意味着您的ROS 2系统及其主题、服务和操作将对本地网络上的其他计算机不可见。在某些情况下，使用``ROS_LOCALHOST_ONLY``非常有帮助，比如在教室中，多个机器人可能会向同一主题发布，从而导致奇怪的行为。您可以使用以下命令设置环境变量：</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-4-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-4-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-4-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-4-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ROS_LOCALHOST_ONLY=1</span>
</pre></div>
</div>
<p>为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;export ROS_LOCALHOST_ONLY=1&quot; &gt;&gt; ~/.bashrc</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ROS_LOCALHOST_ONLY=1</span>
</pre></div>
</div>
<p>为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;export ROS_LOCALHOST_ONLY=1&quot; &gt;&gt; ~/.bash_profile</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">set ROS_LOCALHOST_ONLY=1</span>
</pre></div>
</div>
<p>如果想要在不同的shell会话之间永久生效，还需要运行以下命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">setx ROS_LOCALHOST_ONLY 1</span>
</pre></div>
</div>
</div></div>
</div>
</div>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id7">总结</a><a class="headerlink" href="#summary" title="永久链接至标题"></a></h2>
<p>在使用之前，需要正确配置ROS 2开发环境。可以通过两种方式实现：要么在每次打开新的shell时使用源文件，要么将源命令添加到启动脚本中。</p>
<p>如果您在使用ROS 2时遇到任何定位或使用软件包的问题，首先应该检查您的环境变量，并确保其设置为您预期的版本和发行版。</p>
</div>
<div class="section" id="next-steps">
<h2><a class="toc-backref" href="#id8">下一步</a><a class="headerlink" href="#next-steps" title="永久链接至标题"></a></h2>
<p>现在您已经安装了可用的ROS 2，并且知道如何获取其设置文件，可以开始使用 <a class="reference internal" href="Introducing-Turtlesim/Introducing-Turtlesim.html"><span class="doc">turtlesim 工具</span></a> 来深入了解ROS 2的内部工作原理。</p>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>