<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes</title>
</head>
<body>
  <div class="section" id="launching-nodes">
<span id="ros2launch"></span><h1>启动节点 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4043">[4043]</a><a class="headerlink" href="#launching-nodes" title="永久链接至标题"></a></h1>
<p><strong>目标:</strong> 使用命令行工具一次启动多个节点。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4044">[4044]</a></p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>教程级别：<a href="#id3"><span class="problematic" id="id4">**</span></a>初学者 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4045">[4045]</a></p>
<p><strong>时间：</strong> 5分钟 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3557">[3557]</a></p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3277">[3277]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#background" id="id1">背景 [3072]</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id2">先决条件 [3124]</a></p></li>
<li><p><a class="reference internal" href="#tasks" id="id3">任务 [3282]</a></p>
<ul>
<li><p><a class="reference internal" href="#running-a-launch-file" id="id4">运行 Launch 文件 [4051]</a></p></li>
<li><p><a class="reference internal" href="#optional-control-the-turtlesim-nodes" id="id5">(可选) 控制Turtlesim节点 [4056]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#summary" id="id6">总结 [3353]</a></p></li>
<li><p><a class="reference internal" href="#next-steps" id="id7">下一步 [3797]</a></p></li>
</ul>
</div>
<div class="section" id="background">
<h2>背景 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3072">[3072]</a><a class="headerlink" href="#background" title="永久链接至标题"></a></h2>
<p>在大多数入门教程中，您每次运行新节点都需要打开新的终端。随着您创建更复杂的系统，并同时运行越来越多的节点，打开终端并重新输入配置详细信息变得繁琐。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4046">[4046]</a></p>
<p>启动文件允许您同时启动和配置包含 ROS 2 节点的多个可执行文件。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4047">[4047]</a></p>
<p>使用``ros2 launch``命令运行单个启动文件将一次性启动整个系统 - 所有节点及其配置。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4048">[4048]</a></p>
</div>
<div class="section" id="prerequisites">
<h2>先决条件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3124">[3124]</a><a class="headerlink" href="#prerequisites" title="永久链接至标题"></a></h2>
<p>在开始这些教程之前，请按照 ROS 2 <a class="reference internal" href="../../../Installation.html"><span class="doc">安装 []</span></a> 页面上的说明安装 ROS 2。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4049">[4049]</a></p>
<p>本教程中使用的命令假设您按照操作系统的二进制包安装指南进行操作（Linux的Debian包）。如果您从源代码构建，仍然可以按照本教程进行操作，但是您的设置文件路径可能会不同。如果您从源代码安装，您还将无法使用“sudo apt install ros-&lt;distro&gt;-&lt;package&gt;”命令（在初学者级别教程中经常使用）。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3956">[3956]</a></p>
<p>如果你正在使用 Linux，并且对 shell 不熟悉，<a class="reference external" href="http://www.ee.surrey.ac.uk/Teaching/Unix/">这个教程</a> 会有所帮助。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4050">[4050]</a></p>
</div>
<div class="section" id="tasks">
<h2>任务 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3282">[3282]</a><a class="headerlink" href="#tasks" title="永久链接至标题"></a></h2>
<div class="section" id="running-a-launch-file">
<h3>运行 Launch 文件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4051">[4051]</a><a class="headerlink" href="#running-a-launch-file" title="永久链接至标题"></a></h3>
<p>打开一个新的终端并运行： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3132">[3132]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 launch turtlesim multisim.launch.py</span>
</pre></div>
</div>
<p>以下命令将运行下面的 Launch 文件： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4052">[4052]</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># turtlesim/launch/multisim.launch.py</span>

<span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">import</span> <span class="nn">launch_ros.actions</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">launch_ros</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span>
            <span class="n">namespace</span><span class="o">=</span> <span class="s2">&quot;turtlesim1&quot;</span><span class="p">,</span> <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">),</span>
        <span class="n">launch_ros</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span>
            <span class="n">namespace</span><span class="o">=</span> <span class="s2">&quot;turtlesim2&quot;</span><span class="p">,</span> <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span> <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">),</span>
    <span class="p">])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>上面的启动文件是用Python编写的，但你也可以使用XML和YAML来创建启动文件。你可以在 <a class="reference internal" href="../../../How-To-Guides/Launch-file-different-formats.html"><span class="doc">使用 Python、XML 和 YAML 编写 ROS 2 启动文件 [464]</span></a> 中查看这些不同的ROS 2启动文件格式的比较。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4053">[4053]</a></p>
</div>
<p>这将运行两个turtlesim节点： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4054">[4054]</a></p>
<img alt="../../../_images/turtlesim_multisim.png" src="../../../_images/turtlesim_multisim.png" />
<p>暂时不用担心启动文件的内容。你可以在 <a class="reference internal" href="../../Intermediate/Launch/Launch-Main.html"><span class="doc">ROS 2启动教程</span></a> 中找到更多关于ROS 2启动的信息。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4055">[4055]</a></p>
</div>
<div class="section" id="optional-control-the-turtlesim-nodes">
<h3>(可选) 控制Turtlesim节点 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4056">[4056]</a><a class="headerlink" href="#optional-control-the-turtlesim-nodes" title="永久链接至标题"></a></h3>
<p>现在这些节点正在运行，您可以像其他ROS 2节点一样对它们进行控制。例如，您可以通过打开两个额外的终端并运行以下命令使乌龟朝相反的方向行驶： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4057">[4057]</a></p>
<p>在第二个终端中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4058">[4058]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 topic pub  /turtlesim1/turtle1/cmd_vel geometry_msgs/msg/Twist &quot;{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}&quot;</span>
</pre></div>
</div>
<p>在第三个终端中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4059">[4059]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 topic pub  /turtlesim2/turtle1/cmd_vel geometry_msgs/msg/Twist &quot;{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: -1.8}}&quot;</span>
</pre></div>
</div>
<p>运行这些命令后，您应该会看到类似以下内容的输出： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4060">[4060]</a></p>
<img alt="../../../_images/turtlesim_multisim_spin.png" src="../../../_images/turtlesim_multisim_spin.png" />
</div>
</div>
<div class="section" id="summary">
<h2>总结 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3353">[3353]</a><a class="headerlink" href="#summary" title="永久链接至标题"></a></h2>
<p>迄今为止，您所做的事情的重要性在于您使用一个命令运行了两个turtlesim节点。一旦您学会编写自己的launch文件，您就能够以类似的方式使用``ros2 launch``命令运行多个节点，并设置它们的配置。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4061">[4061]</a></p>
<p>有关ROS 2 launch文件的更多教程，请参阅：<a class="reference internal" href="../../Intermediate/Launch/Launch-Main.html"><span class="doc">主要的launch文件教程页面</span></a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4062">[4062]</a></p>
</div>
<div class="section" id="next-steps">
<h2>下一步 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3797">[3797]</a><a class="headerlink" href="#next-steps" title="永久链接至标题"></a></h2>
<p>在下一个教程中，<a class="reference internal" href="../Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html"><span class="doc">录制和回放数据 [4064]</span></a>，您将了解另一个有用的工具，<code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">bag</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4063">[4063]</a></p>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>