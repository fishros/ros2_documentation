<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Demos/dummy-robot-demo</title>
</head>
<body>
  <div class="section" id="experimenting-with-a-dummy-robot">
<h1>尝试使用虚拟机器人进行实验 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5265">[5265]</a><a class="headerlink" href="#experimenting-with-a-dummy-robot" title="永久链接至标题"></a></h1>
<p>在此演示中，我们使用一个简单的演示机器人，其中包括从发布关节状态到发布虚假激光数据，再到在RViz中可视化机器人模型的所有组件。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5266">[5266]</a></p>
<div class="section" id="launching-the-demo">
<h2>启动演示 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5267">[5267]</a><a class="headerlink" href="#launching-the-demo" title="永久链接至标题"></a></h2>
<p>我们假设您的ROS 2安装目录为``~/ros2_ws``。请根据您的平台更改目录。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5268">[5268]</a></p>
<p>要启动演示，我们执行演示启动文件，我们将在下一部分中对其进行详细解释。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5269">[5269]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ~/ros2_ws/install/setup.bash
ros2 launch dummy_robot_bringup dummy_robot_bringup.launch.py
</pre></div>
</div>
<p>你应该在终端中看到一些打印输出，类似以下内容: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5270">[5270]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>launch<span class="o">]</span>: process<span class="o">[</span>dummy_map_server-1<span class="o">]</span>: started with pid <span class="o">[</span><span class="m">25812</span><span class="o">]</span>
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>launch<span class="o">]</span>: process<span class="o">[</span>robot_state_publisher-2<span class="o">]</span>: started with pid <span class="o">[</span><span class="m">25813</span><span class="o">]</span>
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>launch<span class="o">]</span>: process<span class="o">[</span>dummy_joint_states-3<span class="o">]</span>: started with pid <span class="o">[</span><span class="m">25814</span><span class="o">]</span>
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>launch<span class="o">]</span>: process<span class="o">[</span>dummy_laser-4<span class="o">]</span>: started with pid <span class="o">[</span><span class="m">25815</span><span class="o">]</span>
Initialize urdf model from file: /home/mikael/work/ros2/bouncy_ws/install_debug_isolated/dummy_robot_bringup/share/dummy_robot_bringup/launch/single_rrbot.urdf
Parsing robot urdf xml string.
Link single_rrbot_link1 had <span class="m">1</span> children
Link single_rrbot_link2 had <span class="m">1</span> children
Link single_rrbot_link3 had <span class="m">2</span> children
Link single_rrbot_camera_link had <span class="m">0</span> children
Link single_rrbot_hokuyo_link had <span class="m">0</span> children
got segment single_rrbot_camera_link
got segment single_rrbot_hokuyo_link
got segment single_rrbot_link1
got segment single_rrbot_link2
got segment single_rrbot_link3
got segment world
Adding fixed segment from world to single_rrbot_link1
Adding moving segment from single_rrbot_link1 to single_rrbot_link2
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>dummy_laser<span class="o">]</span>: angle inc:    <span class="m">0</span>.004363
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>dummy_laser<span class="o">]</span>: scan size:    <span class="m">1081</span>
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>dummy_laser<span class="o">]</span>: scan <span class="nb">time</span> increment:  <span class="m">0</span>.000028
Adding moving segment from single_rrbot_link2 to single_rrbot_link3
Adding fixed segment from single_rrbot_link3 to single_rrbot_camera_link
Adding fixed segment from single_rrbot_link3 to single_rrbot_hokuyo_link
</pre></div>
</div>
<p>如果你现在在另一个终端中打开RViz，你会看到你的机器人。🎉 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5271">[5271]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">source</span> &lt;ROS2_INSTALL_FOLDER&gt;/setup.bash
$ rviz2
</pre></div>
</div>
<p>这将打开RViz2。假设你已经启动了dummy_robot_bringup，现在你可以添加TF显示插件并将全局坐标系配置为``world``。完成后，你应该看到类似的画面: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5272">[5272]</a></p>
<img alt="../../_images/rviz-dummy-robot.png" src="../../_images/rviz-dummy-robot.png" />
<div class="section" id="what-s-happening">
<h3>发生了什么事？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5273">[5273]</a><a class="headerlink" href="#what-s-happening" title="永久链接至标题"></a></h3>
<p>如果你仔细查看启动文件，你会发现我们同时启动了一些节点。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5274">[5274]</a></p>
<ul class="simple">
<li><p>dummy_map_server <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5275">[5275]</a></p></li>
<li><p>dummy_laser（虚拟激光） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5276">[5276]</a></p></li>
<li><p>dummy_joint_states（虚拟关节状态） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5277">[5277]</a></p></li>
<li><p>robot_state_publisher <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5278">[5278]</a></p></li>
</ul>
<p>前两个软件包比较简单。<a href="#id1"><span class="problematic" id="id2">``</span></a>dummy_map_server``（虚拟地图服务器）会定期发布一个空地图。<a href="#id3"><span class="problematic" id="id4">``</span></a>dummy_laser``（虚拟激光）基本上也是一样的，会发布虚拟的激光扫描数据。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5279">[5279]</a></p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>dummy_joint_states``（虚拟关节状态）节点会发布虚拟的关节状态数据。由于我们只有一个简单的RRbot机器人，这个节点会发布这两个关节的关节状态值。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5280">[5280]</a></p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>robot_state_publisher``（机器人状态发布器）才是真正有趣的部分。它会解析给定的URDF文件，提取机器人模型并监听传入的关节状态。根据这些信息，它会发布我们机器人的TF（变换）值，我们可以在RViz中进行可视化。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5281">[5281]</a></p>
<p>好耶！ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5282">[5282]</a></p>
</div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>