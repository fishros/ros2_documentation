<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF</title>
</head>
<body>
  <div class="section" id="building-a-movable-robot-model">
<span id="moveableurdf"></span><h1>构建一个可移动的机器人模型。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6160">[6160]</a><a class="headerlink" href="#building-a-movable-robot-model" title="永久链接至标题"></a></h1>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>目标：<a href="#id3"><span class="problematic" id="id4">**</span></a>学习如何在URDF中定义可移动关节。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6161">[6161]</a></p>
<p><strong>教程级别：</strong> 中级 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5286">[5286]</a></p>
<p><strong>时间:</strong> 10分钟 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3663">[3663]</a></p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3277">[3277]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#the-head" id="id1">头部 [6169]</a></p></li>
<li><p><a class="reference internal" href="#the-gripper" id="id2">夹爪 [6172]</a></p></li>
<li><p><a class="reference internal" href="#the-gripper-arm" id="id3">夹爪臂 [6174]</a></p></li>
<li><p><a class="reference internal" href="#other-types-of-joints" id="id4">其他类型的关节 [6177]</a></p></li>
<li><p><a class="reference internal" href="#specifying-the-pose" id="id5">指定姿态 [6179]</a></p></li>
<li><p><a class="reference internal" href="#next-steps" id="id6">下一步 [3797]</a></p></li>
</ul>
</div>
<p>在本教程中，我们将对在 <a class="reference internal" href="Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html"><span class="doc">上一个教程</span></a> 中创建的R2D2模型进行修改，使其具有可移动关节。在之前的模型中，所有的关节都是固定的。现在我们将探索其他三种重要的关节类型：连续关节、旋转关节和平移关节。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6162">[6162]</a></p>
<p>在继续之前，请确保您已安装了所有先决条件。有关所需内容，请参阅 <a class="reference internal" href="Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html"><span class="doc">上一个教程</span></a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6163">[6163]</a></p>
<p>同样，本教程中提到的所有机器人模型都可以在 <a class="reference external" href="https://index.ros.org/p/urdf_tutorial">urdf_tutorial</a> 包中找到。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6164">[6164]</a></p>
<p>这里是带有灵活关节的新URDF文件，您可以将其与先前版本进行比较，看看发生了哪些变化，但我们将只关注三个示例关节。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6165">[6165]</a></p>
<p>要可视化和控制此模型，请运行与上一个教程相同的命令： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6166">[6166]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 launch urdf_tutorial display.launch.py model:=urdf/06-flexible.urdf</span>
</pre></div>
</div>
<p>然而，现在这将会弹出一个GUI界面，允许您控制所有非固定关节的值。试着动一下模型，看看它如何移动。然后，我们可以看看我们是如何实现这一点的。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6167">[6167]</a></p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/ros/urdf_tutorial/ros2/images/flexible.png"><img alt="灵活模型的截图 `[6168] &lt;http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6168&gt;`_ " src="https://raw.githubusercontent.com/ros/urdf_tutorial/ros2/images/flexible.png" style="width: 800px;" /></a>
<div class="section" id="the-head">
<h2>头部 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6169">[6169]</a><a class="headerlink" href="#the-head" title="永久链接至标题"></a></h2>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">&quot;head_swivel&quot;</span> <span class="na">type=</span><span class="s">&quot;continuous&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">&quot;head&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;origin</span> <span class="na">xyz=</span><span class="s">&quot;0 0 0.3&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/joint&gt;</span>
</pre></div>
</div>
<p>身体和头部之间的连接是一个连续关节，意味着它可以取负无穷到正无穷的任意角度。车轮也是这样建模的，因此它们可以永远向两个方向滚动。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6170">[6170]</a></p>
<p>我们要补充的唯一附加信息是旋转轴，这里用一个xyz三元组来指定，它指定了头部将绕其旋转的矢量。由于我们希望它绕z轴旋转，我们指定矢量&quot;0 0 1&quot;。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6171">[6171]</a></p>
</div>
<div class="section" id="the-gripper">
<h2>夹爪 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6172">[6172]</a><a class="headerlink" href="#the-gripper" title="永久链接至标题"></a></h2>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">&quot;left_gripper_joint&quot;</span> <span class="na">type=</span><span class="s">&quot;revolute&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">xyz=</span><span class="s">&quot;0 0 1&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">&quot;1000.0&quot;</span> <span class="na">lower=</span><span class="s">&quot;0.0&quot;</span> <span class="na">upper=</span><span class="s">&quot;0.548&quot;</span> <span class="na">velocity=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;origin</span> <span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span> <span class="na">xyz=</span><span class="s">&quot;0.2 0.01 0&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">&quot;gripper_pole&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">&quot;left_gripper&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/joint&gt;</span>
</pre></div>
</div>
<p>右夹爪和左夹爪关节都被建模为旋转关节。这意味着它们以与连续关节相同的方式旋转，但它们有严格的限制。因此，我们必须包含限制标签，指定关节的上限和下限（以弧度为单位）。我们还必须为该关节指定最大速度和力量，但实际值对我们这里的目的不重要。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6173">[6173]</a></p>
</div>
<div class="section" id="the-gripper-arm">
<h2>夹爪臂 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6174">[6174]</a><a class="headerlink" href="#the-gripper-arm" title="永久链接至标题"></a></h2>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;joint</span> <span class="na">name=</span><span class="s">&quot;gripper_extension&quot;</span> <span class="na">type=</span><span class="s">&quot;prismatic&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;parent</span> <span class="na">link=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;child</span> <span class="na">link=</span><span class="s">&quot;gripper_pole&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;limit</span> <span class="na">effort=</span><span class="s">&quot;1000.0&quot;</span> <span class="na">lower=</span><span class="s">&quot;-0.38&quot;</span> <span class="na">upper=</span><span class="s">&quot;0&quot;</span> <span class="na">velocity=</span><span class="s">&quot;0.5&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;origin</span> <span class="na">rpy=</span><span class="s">&quot;0 0 0&quot;</span> <span class="na">xyz=</span><span class="s">&quot;0.19 0 0.2&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/joint&gt;</span>
</pre></div>
</div>
<p>夹爪臂是一种不同类型的关节，即移动关节。这意味着它沿一个轴线移动，而不是围绕轴旋转。这种平移运动使我们的机器人模型能够伸展和收缩夹爪臂。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6175">[6175]</a></p>
<p>与旋转关节相同，平移臂的限制也是以相同的方式指定，只是单位是米，而不是弧度。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6176">[6176]</a></p>
</div>
<div class="section" id="other-types-of-joints">
<h2>其他类型的关节 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6177">[6177]</a><a class="headerlink" href="#other-types-of-joints" title="永久链接至标题"></a></h2>
<p>还有另外两种可以在空间中移动的关节。与棱柱关节只能沿一个维度移动不同，平面关节可以在平面内或两个维度上移动。此外，浮动关节没有限制，可以在三个维度中移动。这些关节不能仅通过一个数值来指定，因此在本教程中不包括它们。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6178">[6178]</a></p>
</div>
<div class="section" id="specifying-the-pose">
<h2>指定姿态 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6179">[6179]</a><a class="headerlink" href="#specifying-the-pose" title="永久链接至标题"></a></h2>
<p>当您在GUI中移动滑块时，模型会在Rviz中移动。这是如何实现的？首先，<a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6180">GUI &lt;https://index.ros.org/p/joint_state_publisher_gui&gt;`_解析URDF并找到所有非固定关节及其限制。然后，它使用滑块的值发布`sensor_msgs/msg/JointState &lt;https://github.com/ros2/common_interfaces/blob/eloquent/sensor_msgs/msg/JointState.msg&gt;`_消息。然后，`robot_state_publisher &lt;https://index.ros.org/p/robot_state_publisher&gt;`_使用这些消息计算不同部分之间的所有变换。生成的变换树然后用于在Rviz中显示所有形状。 `[6180]</a></p>
</div>
<div class="section" id="next-steps">
<h2>下一步 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3797">[3797]</a><a class="headerlink" href="#next-steps" title="永久链接至标题"></a></h2>
<p>现在您已经拥有一个可见的功能模型，您可以:doc:<a class="reference internal" href="Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html"><span class="doc">添加一些物理属性</span></a>，或者:doc:<a class="reference internal" href="Using-Xacro-to-Clean-Up-a-URDF-File.html"><span class="doc">开始使用xacro来简化您的代码</span></a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6181">[6181]</a></p>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>