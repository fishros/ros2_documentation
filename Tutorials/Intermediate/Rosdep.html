<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Intermediate/Rosdep</title>
</head>
<body>
  <div class="section" id="managing-dependencies-with-rosdep">
<span id="rosdep"></span><h1>使用rosdep管理依赖关系 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5627">[5627]</a><a class="headerlink" href="#managing-dependencies-with-rosdep" title="永久链接至标题"></a></h1>
<p><strong>目标：</strong> 使用``rosdep``管理外部依赖项。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5628">[5628]</a></p>
<p><strong>教程级别：</strong> 中级 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5286">[5286]</a></p>
<p><strong>时间：</strong> 5分钟 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3557">[3557]</a></p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3277">[3277]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#what-is-rosdep" id="id1">什么是rosdep？ [5631]</a></p></li>
<li><p><a class="reference internal" href="#a-little-about-package-xml-files" id="id2">关于 package.xml 文件的一点说明 [5637]</a></p></li>
<li><p><a class="reference internal" href="#how-does-rosdep-work" id="id3">``rosdep``是如何工作的？ [5645]</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-know-what-keys-to-put-in-my-package-xml" id="id4">我怎么知道要在我的``package.xml``文件中放入哪些键呢？ [5648]</a></p></li>
<li><p><a class="reference internal" href="#what-if-my-library-isn-t-in-rosdistro" id="id5">如果我的库不在rosdistro中怎么办？ [5655]</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-use-the-rosdep-tool" id="id6">如何使用rosdep工具？ [5658]</a></p></li>
</ul>
</div>
<p>作者：Steve Macenski <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5629">[5629]</a></p>
<p>本教程将解释如何使用``rosdep``管理外部依赖项。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5630">[5630]</a></p>
<div class="section" id="what-is-rosdep">
<h2>什么是rosdep？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5631">[5631]</a><a class="headerlink" href="#what-is-rosdep" title="永久链接至标题"></a></h2>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>rosdep``是ROS的依赖项管理工具，可与ROS软件包和外部库一起使用。<a href="#id3"><span class="problematic" id="id4">``</span></a>rosdep``是一个命令行实用程序，用于识别和安装构建或安装软件包所需的依赖项。在以下情况下可以调用它： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5632">[5632]</a></p>
<ul class="simple">
<li><p>构建工作空间并需要适当的依赖项来构建其中的软件包时 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5633">[5633]</a></p></li>
<li><p>安装软件包（例如``sudo apt install ros-humble-demo-nodes-cpp``）以检查执行所需的依赖项 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5634">[5634]</a></p></li>
<li><p>及更多！ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5635">[5635]</a></p></li>
</ul>
<p>它具有在单个软件包或软件包目录（例如工作空间）上工作的能力。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5636">[5636]</a></p>
</div>
<div class="section" id="a-little-about-package-xml-files">
<h2>关于 package.xml 文件的一点说明 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5637">[5637]</a><a class="headerlink" href="#a-little-about-package-xml-files" title="永久链接至标题"></a></h2>
<p>软件包的 <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> 文件包含一组依赖项。该文件中的依赖项通常被称为“rosdep键”。它们在标签 <code class="docutils literal notranslate"><span class="pre">&lt;depend&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;test_depend&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;exec_depend&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;build_depend&gt;</span></code> 和 <code class="docutils literal notranslate"><span class="pre">&lt;build_export_depend&gt;</span></code> 中表示。它们指定了每个依赖项在什么情况下是必需的。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5638">[5638]</a></p>
<ul class="simple">
<li><p>对于仅在代码测试中使用的依赖项（例如 <code class="docutils literal notranslate"><span class="pre">gtest</span></code>），请使用 <code class="docutils literal notranslate"><span class="pre">test_depend</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5639">[5639]</a></p></li>
<li><p>对于仅在代码构建中使用的依赖项，请使用 <code class="docutils literal notranslate"><span class="pre">build_depend</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5640">[5640]</a></p></li>
<li><p>对于代码导出所需的头文件依赖项，请使用``build_export_depend``。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5641">[5641]</a></p></li>
<li><p>对于仅在运行代码时使用的依赖项，请使用``exec_depend``。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5642">[5642]</a></p></li>
<li><p>对于混合用途，请使用``depend``，它包括构建、导出和执行时的依赖项。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5643">[5643]</a></p></li>
</ul>
<p>这些依赖项由软件包的创建者在``package.xml``文件中手动填充，应该是所需的任何非内置库和软件包的详尽列表。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5644">[5644]</a></p>
</div>
<div class="section" id="how-does-rosdep-work">
<h2><a href="#id1"><span class="problematic" id="id2">``</span></a>rosdep``是如何工作的？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5645">[5645]</a><a class="headerlink" href="#how-does-rosdep-work" title="永久链接至标题"></a></h2>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>rosdep``将在其路径或特定软件包中检查``package.xml``文件，并查找其中存储的rosdep键。然后，这些键将与中央索引进行交叉引用，以在各种软件包管理器中找到适当的ROS软件包或软件库。最后，一旦找到这些软件包，它们将被安装并准备就绪！ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5646">[5646]</a></p>
<p>中心索引被称为``rosdistro``，可以在此处找到：&lt;<a class="reference external" href="https://github.com/ros/rosdistro">https://github.com/ros/rosdistro</a>&gt;。我们将在下一节中更详细地探讨这个问题。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5647">[5647]</a></p>
</div>
<div class="section" id="how-do-i-know-what-keys-to-put-in-my-package-xml">
<h2>我怎么知道要在我的``package.xml``文件中放入哪些键呢？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5648">[5648]</a><a class="headerlink" href="#how-do-i-know-what-keys-to-put-in-my-package-xml" title="永久链接至标题"></a></h2>
<p>很好的问题，我很高兴你问了！ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5649">[5649]</a></p>
<p>对于ROS包（例如``nav2_bt_navigator``），你可以直接放置包的名称。你可以在给定的ROS发行版的``rosdistro``中的``&lt;distro&gt;/distribution.yaml``中找到所有已发布的ROS包的列表。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5650">[5650]</a></p>
<p>对于非ROS包系统依赖，我们需要找到特定库的键。一般来说，有两个感兴趣的文件：<code class="docutils literal notranslate"><span class="pre">rosdep/base.yaml``和``rosdep/python.yaml</span></code>。<a href="#id1"><span class="problematic" id="id2">``</span></a>base.yaml``通常包含``apt``系统依赖项。<a href="#id3"><span class="problematic" id="id4">``</span></a>python.yaml``通常包含``pip``的Python依赖项。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5651">[5651]</a></p>
<p>要找到一个键，在文件中搜索你的库，并找到包含它的``yaml``中的名称。这就是要放在``package.xml``文件中的键。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5652">[5652]</a></p>
<p>例如，假设一个软件包依赖于``doxygen``，因为它是一款关注文档质量的优秀软件（暗示暗示）。我们会在``base.yaml``中搜索``doxygen``，然后找到如下内容： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5653">[5653]</a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">doxygen</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">arch</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">debian</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">fedora</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">freebsd</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">gentoo</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">app-doc/doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">macports</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">nixos</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">openembedded</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen@meta-oe</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">opensuse</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">rhel</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">  </span><span class="nt">ubuntu</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">doxygen</span><span class="p p-Indicator">]</span><span class="w"></span>
</pre></div>
</div>
<p>这意味着我们的rosdep键是``doxygen``，在不同操作系统的软件包管理器中，它会解析为不同的名称进行安装。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5654">[5654]</a></p>
</div>
<div class="section" id="what-if-my-library-isn-t-in-rosdistro">
<h2>如果我的库不在rosdistro中怎么办？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5655">[5655]</a><a class="headerlink" href="#what-if-my-library-isn-t-in-rosdistro" title="永久链接至标题"></a></h2>
<p>如果你的库不在``rosdistro``中，你可以体验开源软件开发的伟大之处：你可以自己添加！通常，针对rosdistro的拉取请求在一周内就会合并。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5656">[5656]</a></p>
<p>关于如何贡献新的rosdep键，可以在此处找到详细说明：&lt;<a class="reference external" href="https://github.com/ros/rosdistro/blob/master/CONTRIBUTING.md#rosdep-rules-contributions">https://github.com/ros/rosdistro/blob/master/CONTRIBUTING.md#rosdep-rules-contributions</a>&gt;。如果由于某些原因无法公开贡献，也可以fork rosdistro并维护一个备用索引供使用。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5657">[5657]</a></p>
</div>
<div class="section" id="how-do-i-use-the-rosdep-tool">
<h2>如何使用rosdep工具？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5658">[5658]</a><a class="headerlink" href="#how-do-i-use-the-rosdep-tool" title="永久链接至标题"></a></h2>
<p>现在我们对``rosdep``、<code class="docutils literal notranslate"><span class="pre">package.xml``和``rosdistro``有了一些了解，我们准备好使用这个工具了！首先，如果这是第一次使用``rosdep</span></code>，必须通过以下命令进行初始化： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5659">[5659]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo rosdep init
rosdep update
</pre></div>
</div>
<p>这将初始化``rosdep``，<a href="#id1"><span class="problematic" id="id2">``</span></a>update``将更新本地缓存的``rosdistro``索引。定期执行``update``命令以获取最新的索引是一个好主意。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5660">[5660]</a></p>
<p>最后，我们可以运行``rosdep install``来安装依赖项。通常，我们会在一个工作空间上运行此命令，通过单个调用安装所有依赖项。如果在包含源代码的``src``目录下的工作空间根目录运行该命令，命令如下所示： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5661">[5661]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosdep install --from-paths src -y --ignore-src
</pre></div>
</div>
<p>对此进行解释： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5662">[5662]</a></p>
<ul class="simple">
<li><p><a href="#id1"><span class="problematic" id="id2">``</span></a>--from-paths src``指定要检查以解析键的``package.xml``文件的路径 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5663">[5663]</a></p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">``</span></a>-y``表示在包管理器的提示中默认全部回答为“是”，无需提示即可安装 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5664">[5664]</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--ignore-src</span></code> 表示忽略安装依赖项，即使存在 rosdep 键，也会忽略，如果包本身也在工作空间中。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5665">[5665]</a></p></li>
</ul>
<p>还有其他可用的参数和选项。使用 <code class="docutils literal notranslate"><span class="pre">rosdep</span> <span class="pre">-h</span></code> 查看它们。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5666">[5666]</a></p>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>