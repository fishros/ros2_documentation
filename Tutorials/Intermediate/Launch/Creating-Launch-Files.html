<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Intermediate/Launch/Creating-Launch-Files</title>
</head>
<body>
  <div class="section" id="creating-a-launch-file">
<h1>创建一个启动文件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5388">[5388]</a><a class="headerlink" href="#creating-a-launch-file" title="永久链接至标题"></a></h1>
<p><strong>目标：</strong> 创建一个用于运行复杂ROS 2系统的启动文件。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5389">[5389]</a></p>
<p><strong>教程级别：</strong> 中级 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5286">[5286]</a></p>
<p><strong>时间:</strong> 10分钟 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3663">[3663]</a></p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3277">[3277]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#prerequisites" id="id1">先决条件 [3124]</a></p></li>
<li><p><a class="reference internal" href="#background" id="id2">背景 [3072]</a></p></li>
<li><p><a class="reference internal" href="#tasks" id="id3">任务 [3282]</a></p>
<ul>
<li><p><a class="reference internal" href="#setup" id="id4">1 设置 [4071]</a></p></li>
<li><p><a class="reference internal" href="#write-the-launch-file" id="id5">2 编写启动文件 [5397]</a></p></li>
<li><p><a class="reference internal" href="#ros2-launch" id="id6">3 ros2 launch [5413]</a></p></li>
<li><p><a class="reference internal" href="#introspect-the-system-with-rqt-graph" id="id7">4 使用rqt_graph对系统进行内省 [5422]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#summary" id="id8">总结 [3353]</a></p></li>
</ul>
</div>
<div class="section" id="prerequisites">
<h2>先决条件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3124">[3124]</a><a class="headerlink" href="#prerequisites" title="永久链接至标题"></a></h2>
<p>本教程使用 <a class="reference internal" href="../../Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html"><span class="doc">rqt_graph 和 turtlesim</span></a> 包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5390">[5390]</a></p>
<p>您还需要使用您喜欢的文本编辑器。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5391">[5391]</a></p>
<p>如往常一样，在每次打开新的终端时不要忘记在 :doc`每个新终端中启用ROS 2环境 &lt;../../Beginner-CLI-Tools/Configuring-ROS2-Environment&gt;`。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5392">[5392]</a></p>
</div>
<div class="section" id="background">
<h2>背景 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3072">[3072]</a><a class="headerlink" href="#background" title="永久链接至标题"></a></h2>
<p>ROS 2中的启动系统负责帮助用户描述其系统的配置，然后按照描述的方式执行它。系统的配置包括要运行的程序，运行它们的位置，要传递给它们的参数以及ROS特定的约定，使得通过为每个组件提供不同的配置，可以在整个系统中轻松地重用组件。它还负责监视启动的进程的状态，并报告和/或响应这些进程状态的变化。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5393">[5393]</a></p>
<p>使用Python、XML或YAML编写的启动文件可以启动和停止不同的节点，并触发和执行各种事件。有关不同格式的描述，请参阅 <a class="reference internal" href="../../../How-To-Guides/Launch-file-different-formats.html"><span class="doc">使用 Python、XML 和 YAML 编写 ROS 2 启动文件 [464]</span></a>。提供该框架的包是 <code class="docutils literal notranslate"><span class="pre">launch_ros</span></code>，它在ROS特定的``launch``框架下运行。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5394">[5394]</a></p>
<p>ROS 2的启动系统的 <a class="reference external" href="https://design.ros2.org/articles/roslaunch.html">设计文档</a> 详细介绍了其设计目标（目前未提供所有功能）。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5395">[5395]</a></p>
</div>
<div class="section" id="tasks">
<h2>任务 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3282">[3282]</a><a class="headerlink" href="#tasks" title="永久链接至标题"></a></h2>
<div class="section" id="setup">
<h3>1 设置 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4071">[4071]</a><a class="headerlink" href="#setup" title="永久链接至标题"></a></h3>
<p>创建一个新目录来存储你的启动文件： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5396">[5396]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir launch</span>
</pre></div>
</div>
</div>
<div class="section" id="write-the-launch-file">
<h3>2 编写启动文件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5397">[5397]</a><a class="headerlink" href="#write-the-launch-file" title="永久链接至标题"></a></h3>
<p>让我们使用``turtlesim``包及其可执行文件来编写一个ROS 2启动文件。如上所述，这可以是Python、XML或YAML格式。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5398">[5398]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-0-WE1M" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-WE1M" name="WE1M" role="tab" tabindex="-1">XML</button><button aria-controls="panel-0-WUFNTA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-WUFNTA==" name="WUFNTA==" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-0-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-0-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><p>将完整的代码复制并粘贴到``launch/turtlesim_mimic_launch.py``文件中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5399">[5399]</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>

<span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>
        <span class="n">Node</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
            <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;turtlesim1&#39;</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span>
        <span class="p">),</span>
        <span class="n">Node</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
            <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;turtlesim2&#39;</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span>
        <span class="p">),</span>
        <span class="n">Node</span><span class="p">(</span>
            <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
            <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;mimic&#39;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mimic&#39;</span><span class="p">,</span>
            <span class="n">remappings</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="s1">&#39;/input/pose&#39;</span><span class="p">,</span> <span class="s1">&#39;/turtlesim1/turtle1/pose&#39;</span><span class="p">),</span>
                <span class="p">(</span><span class="s1">&#39;/output/cmd_vel&#39;</span><span class="p">,</span> <span class="s1">&#39;/turtlesim2/turtle1/cmd_vel&#39;</span><span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">])</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-WE1M" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-WE1M" name="WE1M" role="tabpanel" tabindex="0"><p>将完整的代码复制并粘贴到``launch/turtlesim_mimic_launch.xml``文件中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5401">[5401]</a></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;launch&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span> <span class="na">exec=</span><span class="s">&quot;turtlesim_node&quot;</span> <span class="na">name=</span><span class="s">&quot;sim&quot;</span> <span class="na">namespace=</span><span class="s">&quot;turtlesim1&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span> <span class="na">exec=</span><span class="s">&quot;turtlesim_node&quot;</span> <span class="na">name=</span><span class="s">&quot;sim&quot;</span> <span class="na">namespace=</span><span class="s">&quot;turtlesim2&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span> <span class="na">exec=</span><span class="s">&quot;mimic&quot;</span> <span class="na">name=</span><span class="s">&quot;mimic&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;/input/pose&quot;</span> <span class="na">to=</span><span class="s">&quot;/turtlesim1/turtle1/pose&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;/output/cmd_vel&quot;</span> <span class="na">to=</span><span class="s">&quot;/turtlesim2/turtle1/cmd_vel&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-WUFNTA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-WUFNTA==" name="WUFNTA==" role="tabpanel" tabindex="0"><p>将完整代码复制粘贴到``launch/turtlesim_mimic_launch.yaml``文件中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5403">[5403]</a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">launch</span><span class="p">:</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim_node&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim1&quot;</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim_node&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim2&quot;</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mimic&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mimic&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">remap</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"></span>
<span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/input/pose&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/turtlesim1/turtle1/pose&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"></span>
<span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/output/cmd_vel&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/turtlesim2/turtle1/cmd_vel&quot;</span><span class="w"></span>
</pre></div>
</div>
</div></div>
<div class="section" id="examine-the-launch-file">
<h4>2.1 检查启动文件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5404">[5404]</a><a class="headerlink" href="#examine-the-launch-file" title="永久链接至标题"></a></h4>
<p>上述所有启动文件都是从``turtlesim``软件包中启动的三个节点系统。该系统的目标是启动两个turtlesim窗口，并使一个turtle模仿另一个turtle的移动。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5405">[5405]</a></p>
<p>在启动这两个turtlesim节点时，它们之间唯一的区别是它们的命名空间值。唯一的命名空间允许系统在没有节点名称或主题名称冲突的情况下启动两个节点。该系统中的两个turtle都通过相同的主题接收命令并发布它们的位姿。通过唯一的命名空间，可以区分发送给不同turtle的消息。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5406">[5406]</a></p>
<p>最后一个节点也来自于“turtlesim”软件包，但是是另一个可执行文件：“mimic”。该节点通过重新映射添加了配置详细信息。<code class="docutils literal notranslate"><span class="pre">mimic``的</span></code>/input/pose``话题被重新映射到``/turtlesim1/turtle1/pose``，<code class="docutils literal notranslate"><span class="pre">/output/cmd_vel``话题被重新映射到</span></code>/turtlesim2/turtle1/cmd_vel``。这意味着``mimic``将订阅``/turtlesim1/sim``的姿态话题，并将其重新发布到``/turtlesim2/sim``的速度命令话题中进行订阅。换句话说，<a href="#id1"><span class="problematic" id="id2">``</span></a>turtlesim2``将模仿``turtlesim1``的运动。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5407">[5407]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-1-WE1M" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-WE1M" name="WE1M" role="tab" tabindex="-1">XML</button><button aria-controls="panel-1-WUFNTA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-WUFNTA==" name="WUFNTA==" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><p>这些导入语句引入了一些Python <a href="#id1"><span class="problematic" id="id2">``</span></a>launch``模块。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5408">[5408]</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">launch</span> <span class="kn">import</span> <span class="n">LaunchDescription</span>
<span class="kn">from</span> <span class="nn">launch_ros.actions</span> <span class="kn">import</span> <span class="n">Node</span>
</pre></div>
</div>
<p>接下来，启动描述本身开始： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5409">[5409]</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate_launch_description</span><span class="p">():</span>
   <span class="k">return</span> <span class="n">LaunchDescription</span><span class="p">([</span>

   <span class="p">])</span>
</pre></div>
</div>
<p>启动描述中的前两个操作启动了两个turtlesim窗口： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5410">[5410]</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;turtlesim1&#39;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span>
<span class="p">),</span>
<span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
    <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;turtlesim2&#39;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;turtlesim_node&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sim&#39;</span>
<span class="p">),</span>
</pre></div>
</div>
<p>最后一个操作使用了重新映射来启动mimic节点： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5411">[5411]</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Node</span><span class="p">(</span>
    <span class="n">package</span><span class="o">=</span><span class="s1">&#39;turtlesim&#39;</span><span class="p">,</span>
    <span class="n">executable</span><span class="o">=</span><span class="s1">&#39;mimic&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mimic&#39;</span><span class="p">,</span>
    <span class="n">remappings</span><span class="o">=</span><span class="p">[</span>
      <span class="p">(</span><span class="s1">&#39;/input/pose&#39;</span><span class="p">,</span> <span class="s1">&#39;/turtlesim1/turtle1/pose&#39;</span><span class="p">),</span>
      <span class="p">(</span><span class="s1">&#39;/output/cmd_vel&#39;</span><span class="p">,</span> <span class="s1">&#39;/turtlesim2/turtle1/cmd_vel&#39;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-WE1M" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-WE1M" name="WE1M" role="tabpanel" tabindex="0"><p>启动描述中的前两个操作启动了两个turtlesim窗口： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5412">[5412]</a></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span> <span class="na">exec=</span><span class="s">&quot;turtlesim_node&quot;</span> <span class="na">name=</span><span class="s">&quot;sim&quot;</span> <span class="na">namespace=</span><span class="s">&quot;turtlesim1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span> <span class="na">exec=</span><span class="s">&quot;turtlesim_node&quot;</span> <span class="na">name=</span><span class="s">&quot;sim&quot;</span> <span class="na">namespace=</span><span class="s">&quot;turtlesim2&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>最后一个操作使用了重新映射来启动mimic节点： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5411">[5411]</a></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlesim&quot;</span> <span class="na">exec=</span><span class="s">&quot;mimic&quot;</span> <span class="na">name=</span><span class="s">&quot;mimic&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;/input/pose&quot;</span> <span class="na">to=</span><span class="s">&quot;/turtlesim1/turtle1/pose&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;/output/cmd_vel&quot;</span> <span class="na">to=</span><span class="s">&quot;/turtlesim2/turtle1/cmd_vel&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/node&gt;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-WUFNTA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-WUFNTA==" name="WUFNTA==" role="tabpanel" tabindex="0"><p>启动描述中的前两个操作启动了两个turtlesim窗口： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5412">[5412]</a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim_node&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim1&quot;</span><span class="w"></span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim_node&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim2&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>最后一个操作使用了重新映射来启动mimic节点： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5411">[5411]</a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">node</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">pkg</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;turtlesim&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">exec</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mimic&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;mimic&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">remap</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"></span>
<span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/input/pose&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/turtlesim1/turtle1/pose&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"></span>
<span class="w">        </span><span class="nt">from</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/output/cmd_vel&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/turtlesim2/turtle1/cmd_vel&quot;</span><span class="w"></span>
</pre></div>
</div>
</div></div>
</div>
</div>
<div class="section" id="ros2-launch">
<h3>3 ros2 launch <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5413">[5413]</a><a class="headerlink" href="#ros2-launch" title="永久链接至标题"></a></h3>
<p>要运行上面创建的启动文件，请进入您之前创建的目录并运行以下命令： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5414">[5414]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-2-WE1M" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-WE1M" name="WE1M" role="tab" tabindex="-1">XML</button><button aria-controls="panel-2-WUFNTA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-WUFNTA==" name="WUFNTA==" role="tab" tabindex="-1">YAML</button></div><div aria-labelledby="tab-2-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-2-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd launch</span>
<span class="go">ros2 launch turtlesim_mimic_launch.py</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-WE1M" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-WE1M" name="WE1M" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd launch</span>
<span class="go">ros2 launch turtlesim_mimic_launch.xml</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-WUFNTA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-WUFNTA==" name="WUFNTA==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd launch</span>
<span class="go">ros2 launch turtlesim_mimic_launch.yaml</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>可以直接启动一个启动文件（如上所示），也可以由软件包提供。当由软件包提供时，语法如下： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5415">[5415]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 launch &lt;package_name&gt; &lt;launch_file_name&gt;</span>
</pre></div>
</div>
<p>您已经学习了如何在 <a class="reference internal" href="../../Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html"><span class="doc">创建软件包 [4496]</span></a> 中创建软件包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5416">[5416]</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>对于具有启动文件的软件包，最好在您的软件包的 <code class="docutils literal notranslate"><span class="pre">package.xml</span></code> 中添加一个 <code class="docutils literal notranslate"><span class="pre">exec_depend</span></code> 依赖项，依赖于 <code class="docutils literal notranslate"><span class="pre">ros2launch</span></code> 软件包： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5417">[5417]</a></p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;exec_depend&gt;</span>ros2launch<span class="nt">&lt;/exec_depend&gt;</span>
</pre></div>
</div>
<p>这有助于确保在构建软件包后可以使用 <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">launch</span></code> 命令。它还确保所有 <a class="reference internal" href="../../../How-To-Guides/Launch-file-different-formats.html"><span class="doc">启动文件格式</span></a> 能被识别。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5418">[5418]</a></p>
</div>
<p>将会打开两个turtlesim窗口，并且您将看到以下``[INFO]``消息，告诉您启动了哪些节点的launch文件： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5419">[5419]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[INFO] [launch]: Default logging verbosity is set to INFO</span>
<span class="go">[INFO] [turtlesim_node-1]: process started with pid [11714]</span>
<span class="go">[INFO] [turtlesim_node-2]: process started with pid [11715]</span>
<span class="go">[INFO] [mimic-3]: process started with pid [11716]</span>
</pre></div>
</div>
<p>为了看到系统的运行情况，打开一个新的终端并在``/turtlesim1/turtle1/cmd_vel``主题上运行``ros2 topic pub``命令，使第一个乌龟开始移动： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5420">[5420]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 topic pub -r 1 /turtlesim1/turtle1/cmd_vel geometry_msgs/msg/Twist &quot;{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: -1.8}}&quot;</span>
</pre></div>
</div>
<p>您将看到两只乌龟都按照相同的路径移动。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5421">[5421]</a></p>
<img alt="../../../_images/mimic.png" src="../../../_images/mimic.png" />
</div>
<div class="section" id="introspect-the-system-with-rqt-graph">
<h3>4 使用rqt_graph对系统进行内省 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5422">[5422]</a><a class="headerlink" href="#introspect-the-system-with-rqt-graph" title="永久链接至标题"></a></h3>
<p>当系统仍在运行时，打开一个新的终端并运行``rqt_graph``，以更好地了解launch文件中节点之间的关系。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5423">[5423]</a></p>
<p>运行以下命令： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=4084">[4084]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rqt_graph</span>
</pre></div>
</div>
<img alt="../../../_images/mimic_graph.png" src="../../../_images/mimic_graph.png" />
<p>一个隐藏节点（您运行的``ros2 topic pub``命令）在左侧发布数据到``/turtlesim1/turtle1/cmd_vel``主题，而``/turtlesim1/sim``节点订阅该主题。图中的其余部分展示了之前描述的内容：<code class="docutils literal notranslate"><span class="pre">mimic``订阅</span></code>/turtlesim1/sim``的姿态主题，并发布到``/turtlesim2/sim``的速度命令主题。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5424">[5424]</a></p>
</div>
</div>
<div class="section" id="summary">
<h2>总结 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3353">[3353]</a><a class="headerlink" href="#summary" title="永久链接至标题"></a></h2>
<p>启动文件可以简化运行具有许多节点和特定配置细节的复杂系统。您可以使用Python、XML或YAML创建启动文件，并使用``ros2 launch``命令运行它们。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=5425">[5425]</a></p>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>