<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Advanced/Simulators/Webots/Installation-Ubuntu</title>
</head>
<body>
  <div class="section" id="installation-ubuntu">
<h1>安装（Ubuntu） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3716">[3716]</a><a class="headerlink" href="#installation-ubuntu" title="永久链接至标题"></a></h1>
<p><strong>目标：</strong> 在Ubuntu上安装``webots_ros2``软件包并运行仿真示例。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3717">[3717]</a></p>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>教程级别：<a href="#id3"><span class="problematic" id="id4">**</span></a>高级 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3068">[3068]</a></p>
<p><strong>时间:</strong> 10分钟 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3663">[3663]</a></p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3277">[3277]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#background" id="id1">背景 [3072]</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id2">先决条件 [3124]</a></p>
<ul>
<li><p><a class="reference internal" href="#multiple-installations-of-webots" id="id3">Webots的多个安装 [3721]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tasks" id="id4">任务 [3282]</a></p>
<ul>
<li><p><a class="reference internal" href="#install-webots-ros2" id="id5">1 安装``webots_ros2`` [3727]</a></p></li>
<li><p><a class="reference internal" href="#launch-the-webots-ros2-universal-robot-example" id="id6">2. 启动 <code class="docutils literal notranslate"><span class="pre">webots_ros2_universal_robot</span></code> 示例 [3730]</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="background">
<h2>背景 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3072">[3072]</a><a class="headerlink" href="#background" title="永久链接至标题"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">webots_ros2``软件包提供了ROS</span> <span class="pre">2和Webots之间的接口。它包括多个子软件包，包括``webots_ros2_driver</span></code>，它允许您启动Webots并与其通信。此接口在以下大多数教程中都会使用，因此在此之前需要先安装它。其他子软件包主要是使用接口展示多个可能的实现示例。在本教程中，您将安装该软件包并学习如何运行其中一个示例。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3718">[3718]</a></p>
</div>
<div class="section" id="prerequisites">
<h2>先决条件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3124">[3124]</a><a class="headerlink" href="#prerequisites" title="永久链接至标题"></a></h2>
<p>建议您先了解入门级ROS原理，详情请参阅初学者 <a class="reference internal" href="../../../../Tutorials.html"><span class="doc">教程 [3059]</span></a>。特别是 <a class="reference internal" href="../../../Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html"><span class="doc">创建一个工作空间 [4428]</span></a> 和 <a class="reference internal" href="../../../Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html"><span class="doc">创建软件包 [4496]</span></a> 是有用的先决条件。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3665">[3665]</a></p>
<p>为了使用``webots_ros2``接口，必须安装Webots软件。您可以按照`安装过程 &lt;<a class="reference external" href="https://cyberbotics.com/doc/guide/installation-procedure">https://cyberbotics.com/doc/guide/installation-procedure</a>&gt;`_ 或者从源代码构建它 &lt;<a class="reference external" href="https://github.com/cyberbotics/webots/wiki/Linux-installation/">https://github.com/cyberbotics/webots/wiki/Linux-installation/</a>&gt;`_。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3719">[3719]</a></p>
<p>或者，您还可以让``webots_ros2``自动下载并安装Webots。当您启动该软件包的示例并且没有找到Webots安装时，将会出现此选项。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3720">[3720]</a></p>
<div class="section" id="multiple-installations-of-webots">
<h3>Webots的多个安装 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3721">[3721]</a><a class="headerlink" href="#multiple-installations-of-webots" title="永久链接至标题"></a></h3>
<p>如果您在计算机上安装了不同版本的Webots，<a href="#id1"><span class="problematic" id="id2">``</span></a>webots_ros2``将按照以下顺序查找Webots： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3722">[3722]</a></p>
<ol class="arabic simple">
<li><p>如果设置了``ROS2_WEBOTS_HOME``环境变量，ROS 2将使用此文件夹中的Webots，而不考虑其版本。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3723">[3723]</a></p></li>
<li><p>如果设置了``WEBOTS_HOME``环境变量，ROS 2将使用该文件夹中的Webots，而不管其版本如何。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3724">[3724]</a></p></li>
<li><p>如果没有设置这些变量中的任何一个，<code class="docutils literal notranslate"><span class="pre">webots_ros2``将在兼容版本的默认安装路径中查找Webots：</span></code>/usr/local/webots``和``/snap/webots/current/usr/share/webots``。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3725">[3725]</a></p></li>
<li><p>如果找不到Webots，<a href="#id1"><span class="problematic" id="id2">``</span></a>webots_ros2``将显示一个窗口，提供自动安装最新兼容版本的Webots。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3726">[3726]</a></p></li>
</ol>
</div>
</div>
<div class="section" id="tasks">
<h2>任务 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3282">[3282]</a><a class="headerlink" href="#tasks" title="永久链接至标题"></a></h2>
<div class="section" id="install-webots-ros2">
<h3>1 安装``webots_ros2`` <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3727">[3727]</a><a class="headerlink" href="#install-webots-ros2" title="永久链接至标题"></a></h3>
<p>您可以选择安装官方发布的软件包，或者从最新的更新源中安装，源地址为 <a class="reference external" href="https://github.com/cyberbotics/webots_ros2">Github</a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3728">[3728]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZGlzdHJpYnV0ZWQgcGFja2FnZQ==" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZGlzdHJpYnV0ZWQgcGFja2FnZQ==" name="SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZGlzdHJpYnV0ZWQgcGFja2FnZQ==" role="tab" tabindex="0">Install <code class="docutils literal notranslate"><span class="pre">webots_ros2</span></code> distributed package</button><button aria-controls="panel-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZnJvbSBzb3VyY2Vz" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZnJvbSBzb3VyY2Vz" name="SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZnJvbSBzb3VyY2Vz" role="tab" tabindex="-1">Install <code class="docutils literal notranslate"><span class="pre">webots_ros2</span></code> from sources</button></div><div aria-labelledby="tab-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZGlzdHJpYnV0ZWQgcGFja2FnZQ==" class="sphinx-tabs-panel group-tab" id="panel-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZGlzdHJpYnV0ZWQgcGFja2FnZQ==" name="SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZGlzdHJpYnV0ZWQgcGFja2FnZQ==" role="tabpanel" tabindex="0"><p>在终端中运行以下命令。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3729">[3729]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get install ros-humble-webots-ros2</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZnJvbSBzb3VyY2Vz" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZnJvbSBzb3VyY2Vz" name="SW5zdGFsbCBgYHdlYm90c19yb3MyYGAgZnJvbSBzb3VyY2Vz" role="tabpanel" tabindex="0"><p>创建一个带有``src``目录的ROS 2工作空间。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3696">[3696]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir -p ~/ros2_ws/src</span>
</pre></div>
</div>
<p>源化ROS 2环境。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3697">[3697]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">source /opt/ros/humble/setup.bash</span>
</pre></div>
</div>
<p>从Github获取源代码。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3698">[3698]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/ros2_ws</span>
<span class="go">git clone --recurse-submodules https://github.com/cyberbotics/webots_ros2.git src/webots_ros2</span>
</pre></div>
</div>
<p>安装软件包依赖项。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3699">[3699]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install python3-pip python3-rosdep python3-colcon-common-extensions</span>
<span class="go">sudo rosdep init &amp;&amp; rosdep update</span>
<span class="go">rosdep install --from-paths src --ignore-src --rosdistro humble</span>
</pre></div>
</div>
<p>使用``colcon``构建软件包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3700">[3700]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">colcon build</span>
</pre></div>
</div>
<p>在此工作空间中进行源代码配置。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3701">[3701]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">source install/local_setup.bash</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="launch-the-webots-ros2-universal-robot-example">
<h3>2. 启动 <code class="docutils literal notranslate"><span class="pre">webots_ros2_universal_robot</span></code> 示例 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3730">[3730]</a><a class="headerlink" href="#launch-the-webots-ros2-universal-robot-example" title="永久链接至标题"></a></h3>
<p>以下说明介绍了如何启动提供的示例。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3731">[3731]</a></p>
<p>如果尚未完成，请先启动ROS 2环境。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3706">[3706]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">source /opt/ros/humble/setup.bash</span>
</pre></div>
</div>
<p>设置``WEBOTS_HOME``环境变量允许您启动特定的Webots安装。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3732">[3732]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export WEBOTS_HOME=/usr/local/webots</span>
</pre></div>
</div>
<p>如果是从源代码安装的，请先启动ROS 2工作区。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3707">[3707]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/ros2_ws</span>
<span class="go">source install/local_setup.bash</span>
</pre></div>
</div>
<p>使用ROS 2启动命令来启动演示包（例如``webots_ros2_universal_robot``）。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3709">[3709]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 launch webots_ros2_universal_robot multirobot_launch.py</span>
</pre></div>
</div>
</div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>