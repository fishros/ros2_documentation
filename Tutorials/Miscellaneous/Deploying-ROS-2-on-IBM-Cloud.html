<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud</title>
</head>
<body>
  <div class="section" id="deploying-on-ibm-cloud-kubernetes-community-contributed">
<h1>在 IBM Cloud Kubernetes 上部署 [社区贡献] <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6488">[6488]</a><a class="headerlink" href="#deploying-on-ibm-cloud-kubernetes-community-contributed" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=3070">[]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#about" id="id1">关于 [6489]</a></p></li>
<li><p><a class="reference internal" href="#ros2-on-ibm-cloud" id="id2">在IBM Cloud上运行ROS2 [6491]</a></p></li>
<li><p><a class="reference internal" href="#step-1-setting-up-your-system" id="id3">步骤1：设置您的系统 [6495]</a></p>
<ul>
<li><p><a class="reference internal" href="#a-docker-files" id="id4">a) Docker文件？ [6497]</a></p></li>
<li><p><a class="reference internal" href="#b-ros2-image" id="id5">b) ROS2 Image [6501]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#step-2-running-the-image-on-ibm-cloud" id="id6">步骤2：在 IBM Cloud 上运行图像 [6514]</a></p></li>
<li><p><a class="reference internal" href="#step-3-using-custom-ros2-packages" id="id7">步骤3：使用自定义的ROS2软件包 [6524]</a></p>
<ul>
<li><p><a class="reference internal" href="#extra-deleting-docker-images" id="id8">附加信息：删除Docker镜像 [6537]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#step-4-kubernetes" id="id9">第四步：Kubernetes [6541]</a></p>
<ul>
<li><p><a class="reference internal" href="#a-creating-the-cluster" id="id10">a) 创建集群 [6542]</a></p></li>
<li><p><a class="reference internal" href="#b-deploying-your-docker-image-finally" id="id11">b) 部署您的Docker镜像 <em>最后！</em> [6561]</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#step-5-using-cli-for-your-docker-image" id="id12">步骤 5：使用 CLI 操作你的 Docker 镜像 [6566]</a></p></li>
<li><p><a class="reference internal" href="#final-remarks" id="id13">最后的备注 [6573]</a></p></li>
</ul>
</div>
<div class="section" id="about">
<h2>关于 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6489">[6489]</a><a class="headerlink" href="#about" title="永久链接至标题"></a></h2>
<p>本文介绍如何使用Docker文件在IBM Cloud上运行ROS2。首先简要概述了Docker镜像及其在本地环境中的工作原理，然后探讨了IBM Cloud以及用户如何在其中部署其容器。之后，提供了有关用户如何在IBM Cloud上使用其自定义的ROS2软件包（来自GitHub）的简短描述。提供了有关如何创建集群并在IBM Cloud上利用Kubernetes的步骤，最后将Docker镜像部署到该集群上。本文最初发布于`这里 &lt;<a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud">https://github.com/mm-nasr/ros2_ibmcloud</a>&gt;`__ 和 <a class="reference external" href="https://medium.com/&#64;mahmoud-nasr/running-ros2-on-ibm-cloud-1b1284cbd487">这里</a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6490">[6490]</a></p>
</div>
<div class="section" id="ros2-on-ibm-cloud">
<h2>在IBM Cloud上运行ROS2 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6491">[6491]</a><a class="headerlink" href="#ros2-on-ibm-cloud" title="永久链接至标题"></a></h2>
<p>在本教程中，我们将展示如何轻松地将ROS2与自定义软件包集成并在IBM Cloud上运行。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6492">[6492]</a></p>
<p>ROS2是ROS的新一代版本，它在多机器人形成方面提供了更多控制能力。随着云计算的发展，云机器人在当今时代变得越来越重要。在本教程中，我们将简要介绍如何在IBM Cloud上运行ROS2。通过本教程的学习，您将能够在ROS2中创建自己的软件包，并使用Docker文件将其部署到云端。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6493">[6493]</a></p>
<p>以下说明假定您使用的是Linux系统，并已经在Ubuntu 18.04（Bionic Beaver）上进行了测试。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6494">[6494]</a></p>
</div>
<div class="section" id="step-1-setting-up-your-system">
<h2>步骤1：设置您的系统 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6495">[6495]</a><a class="headerlink" href="#step-1-setting-up-your-system" title="永久链接至标题"></a></h2>
<p>在我们详细介绍具体过程之前，让我们先确保所有所需软件已正确安装。我们将指引您到适当的来源以设置您的系统，并仅强调与我们使用场景相关的细节。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6496">[6496]</a></p>
<div class="section" id="a-docker-files">
<h3>a) Docker文件？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6497">[6497]</a><a class="headerlink" href="#a-docker-files" title="永久链接至标题"></a></h3>
<p>Docker文件是一种容器形式，可以独立于您的系统运行。这样，您可以设置可能有数百个不同项目而彼此不受影响。您甚至可以在一台机器上设置不同版本的Linux，而无需使用虚拟机。Docker文件具有节省空间和仅在运行时利用您的系统资源的优势。此外，Docker具有灵活和可转移的特性。它们包含所有运行所需的预设条件，这意味着您可以轻松地为特定的系统或服务使用Docker文件，而无需进行任何复杂的步骤！ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6498">[6498]</a></p>
<p>感到兴奋了吗？让我们从按照以下 <a class="reference external" href="https://docs.docker.com/get-docker/">链接</a> 安装docker到您的系统开始吧。根据教程，您应该进行一些健全性检查以确保docker已正确设置。然而，为了保险起见，让我们再次运行以下命令，使用hello-world docker映像： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6499">[6499]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo docker run hello-world
</pre></div>
</div>
<p>您应该得到以下输出： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6500">[6500]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 <span class="m">1</span>. The Docker client contacted the Docker daemon.
 <span class="m">2</span>. The Docker daemon pulled the <span class="s2">&quot;hello-world&quot;</span> image from the Docker Hub.
    <span class="o">(</span>amd64<span class="o">)</span>
 <span class="m">3</span>. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 <span class="m">4</span>. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
</pre></div>
</div>
</div>
<div class="section" id="b-ros2-image">
<h3>b) ROS2 Image <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6501">[6501]</a><a class="headerlink" href="#b-ros2-image" title="永久链接至标题"></a></h3>
<p>ROS <a class="reference external" href="https://discourse.ros.org/t/announcing-official-docker-images-for-ros2/7381/2">宣布</a> 2019年1月发布了几个ROS发行版的官方Docker镜像容器。有关使用ROS2 Docker镜像的详细说明，请参阅 <a class="reference external" href="https://hub.docker.com/_/ros/">此处</a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6502">[6502]</a></p>
<p>让我们直接跳过这些，立即开始创建本地ROS2 Docker。由于我们需要将其部署到IBM Cloud上，我们将创建自己的Dockerfile（而不是使用现成的镜像）。首先，创建一个新目录，用于保存我们的Dockerfile和稍后需要的任何其他文件，并进入该目录。使用您喜欢的$EDITOR，打开一个名为*Dockerfile*的新文件（确保文件名正确）： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6503">[6503]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir ~/ros2_docker

$ <span class="nb">cd</span> ~/ros2_docker

$ <span class="nv">$EDITOR</span> Dockerfile
</pre></div>
</div>
<p>将以下内容插入*Dockerfile*中，并保存它（也可以在 <a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/blob/main/dockers/ros2_basic/Dockerfile">此处</a> 找到）： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6504">[6504]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>FROM ros:foxy

<span class="c1"># install ros package</span>
RUN apt-get update <span class="o">&amp;&amp;</span> apt-get install -y <span class="se">\</span>
      ros-<span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span>-demo-nodes-cpp <span class="se">\</span>
      ros-<span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span>-demo-nodes-py <span class="o">&amp;&amp;</span> <span class="se">\</span>
    rm -rf /var/lib/apt/lists/* <span class="o">&amp;&amp;</span> mkdir /ros2_home

WORKDIR /ros2_home

<span class="c1"># launch ros package</span>
CMD <span class="o">[</span><span class="s2">&quot;ros2&quot;</span>, <span class="s2">&quot;launch&quot;</span>, <span class="s2">&quot;demo_nodes_cpp&quot;</span>, <span class="s2">&quot;talker_listener.launch.py&quot;</span><span class="o">]</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>FROM</strong>：使用ros:foxy Docker镜像创建一个层 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6505">[6505]</a></p></li>
<li><p><strong>RUN</strong>：通过将vim安装到容器中并创建一个名为/ros2_home的目录来构建您的容器 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6506">[6506]</a></p></li>
<li><p><strong>WORKDIR</strong>：指定容器中的工作目录。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6507">[6507]</a></p></li>
</ul>
<p>当然，您可以自由更改ROS版本（这里使用的是*foxy*），或更改目录名称。上述Docker文件设置了ROS-foxy并安装了C++和Python的演示节点。然后，它启动一个文件，其中运行一个talker和一个listener节点。我们很快就会看到它的效果，但它们与在`ROS wiki &lt;<a class="reference external" href="https://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29">https://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29</a>&gt;`__中找到的发布者-订阅者示例非常相似。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6508">[6508]</a></p>
<p>现在，我们准备构建用于在其中运行ROS2的Docker镜像（是的，就是这么简单！）。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6509">[6509]</a></p>
<p><strong>注意</strong>：如果出现权限不足或*权限被拒绝*的错误，请尝试使用*sudo*权限运行命令： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6510">[6510]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker build .

<span class="c1"># You will see a bunch of lines that execute the docker file instructions followed by:</span>
Successfully built 0dc6ce7cb487
</pre></div>
</div>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>0dc6ce7cb487*对您来说可能是不同的，所以请记下来并将其复制到某个地方以供参考。您始终可以返回并使用以下命令检查系统上的Docker镜像： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6511">[6511]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo docker ps -as
</pre></div>
</div>
<p>现在，使用以下命令运行Docker文件： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6512">[6512]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -it 0dc6ce7cb487
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>launch<span class="o">]</span>: All log files can be found below /root/.ros/log/2020-10-28-02-41-45-177546-0b5d9ed123be-1
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>launch<span class="o">]</span>: Default logging verbosity is <span class="nb">set</span> to INFO
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>talker-1<span class="o">]</span>: process started with pid <span class="o">[</span><span class="m">28</span><span class="o">]</span>
<span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span>listener-2<span class="o">]</span>: process started with pid <span class="o">[</span><span class="m">30</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852907</span>.249886590<span class="o">]</span> <span class="o">[</span>talker<span class="o">]</span>: Publishing: <span class="s1">&#39;Hello World: 1&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852907</span>.250964490<span class="o">]</span> <span class="o">[</span>listener<span class="o">]</span>: I heard: <span class="o">[</span>Hello World: <span class="m">1</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852908</span>.249786312<span class="o">]</span> <span class="o">[</span>talker<span class="o">]</span>: Publishing: <span class="s1">&#39;Hello World: 2&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852908</span>.250453386<span class="o">]</span> <span class="o">[</span>listener<span class="o">]</span>: I heard: <span class="o">[</span>Hello World: <span class="m">2</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852909</span>.249882257<span class="o">]</span> <span class="o">[</span>talker<span class="o">]</span>: Publishing: <span class="s1">&#39;Hello World: 3&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852909</span>.250536089<span class="o">]</span> <span class="o">[</span>listener<span class="o">]</span>: I heard: <span class="o">[</span>Hello World: <span class="m">3</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852910</span>.249845718<span class="o">]</span> <span class="o">[</span>talker<span class="o">]</span>: Publishing: <span class="s1">&#39;Hello World: 4&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852910</span>.250509355<span class="o">]</span> <span class="o">[</span>listener<span class="o">]</span>: I heard: <span class="o">[</span>Hello World: <span class="m">4</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852911</span>.249506058<span class="o">]</span> <span class="o">[</span>talker<span class="o">]</span>: Publishing: <span class="s1">&#39;Hello World: 5&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852911</span>.250152324<span class="o">]</span> <span class="o">[</span>listener<span class="o">]</span>: I heard: <span class="o">[</span>Hello World: <span class="m">5</span><span class="o">]</span>
<span class="o">[</span>talker-1<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852912</span>.249556670<span class="o">]</span> <span class="o">[</span>talker<span class="o">]</span>: Publishing: <span class="s1">&#39;Hello World: 6&#39;</span>
<span class="o">[</span>listener-2<span class="o">]</span> <span class="o">[</span>INFO<span class="o">]</span> <span class="o">[</span><span class="m">1603852912</span>.250212678<span class="o">]</span> <span class="o">[</span>listener<span class="o">]</span>: I heard: <span class="o">[</span>Hello World: <span class="m">6</span><span class="o">]</span>
</pre></div>
</div>
<p>如果它正常工作，你应该看到类似于上面显示的内容。如图所示，有两个 ROS 节点（一个发布者和一个订阅者）正在运行，并且它们的输出通过 ROS INFO 提供给我们。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6513">[6513]</a></p>
</div>
</div>
<div class="section" id="step-2-running-the-image-on-ibm-cloud">
<h2>步骤2：在 IBM Cloud 上运行图像 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6514">[6514]</a><a class="headerlink" href="#step-2-running-the-image-on-ibm-cloud" title="永久链接至标题"></a></h2>
<p>以下步骤假设您拥有 IBM Cloud 帐户并已安装 ibmcloud CLI。如果没有，请首先查看此 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6515">链接 &lt;https://cloud.ib `[6515]</a></p>
<p>我们还需要确保通过运行以下命令安装了 IBM Cloud Container Registry 的 CLI 插件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6516">[6516]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud plugin install container-registry
</pre></div>
</div>
<p>随后，通过终端登录到您的 ibmcloud 帐户: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6517">[6517]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud login --sso
</pre></div>
</div>
<p>从这里开始，让我们创建一个容器注册表命名空间。确保使用一个既独特又能描述其用途的名称。在这里，我使用了 <em>ros2nasr</em>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6518">[6518]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud cr namespace-add ros2nasr
</pre></div>
</div>
<p>IBM Cloud 提供了许多快捷方式，可以帮助我们立即将容器部署到云端。下面的命令会构建容器，并将其标记为名称为 <strong>ros2foxy</strong>、版本为 <strong>1</strong>。确保使用您创建的正确注册表名称，并且可以根据需要自由更改容器名称。末尾的 <strong>.</strong> 表示 <em>Dockerfile</em> 在当前目录中（这一点很重要），如果不是，请将其更改为指向包含 Dockerfile 的目录。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6519">[6519]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud cr build --tag registry.bluemix.net/ros2nasr/ros2foxy:1 .
</pre></div>
</div>
<p>您现在可以通过运行以下命令确保容器已推送到您创建的注册表中 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6520">[6520]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud cr image-list
Listing images...

REPOSITORY               TAG   DIGEST         NAMESPACE   CREATED         SIZE     SECURITY STATUS
us.icr.io/ros2nasr/ros2foxy   <span class="m">1</span>     031be29301e6   ros2nasr    <span class="m">36</span> seconds ago   <span class="m">120</span> MB   No Issues

OK
</pre></div>
</div>
<p>接下来，重要的是登录到您的注册表以运行 Docker 镜像。同样，如果遇到 <em>permission denied</em> 错误，请使用 sudo 权限执行该命令。然后按照下面的示例运行您的 Dockerfile。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6521">[6521]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud cr login
Logging <span class="k">in</span> to <span class="s1">&#39;registry.ng.bluemix.net&#39;</span>...
Logged <span class="k">in</span> to <span class="s1">&#39;registry.ng.bluemix.net&#39;</span>.
Logging <span class="k">in</span> to <span class="s1">&#39;us.icr.io&#39;</span>...
Logged <span class="k">in</span> to <span class="s1">&#39;us.icr.io&#39;</span>.

OK

$ docker run -v -it registry.ng.bluemix.net/ros2nasr/ros2foxy:1
</pre></div>
</div>
<p>其中*ros2nasr*是您创建的注册表的名称，而*ros2foxy:1*是Docker容器的标签和版本，如之前所述。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6522">[6522]</a></p>
<p>现在，您应该看到Docker文件正在运行，并提供与在本地计算机上运行时所看到的类似的输出。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6523">[6523]</a></p>
</div>
<div class="section" id="step-3-using-custom-ros2-packages">
<h2>步骤3：使用自定义的ROS2软件包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6524">[6524]</a><a class="headerlink" href="#step-3-using-custom-ros2-packages" title="永久链接至标题"></a></h2>
<p>所以现在我们已经有了完整的流程，从创建Dockerfile，一直到部署它并在IBM Cloud上运行。但是，如果我们想要使用我们自己（或其他人）创建的自定义软件包，怎么办呢？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6525">[6525]</a></p>
<p>那么这完全取决于您如何设置Dockerfile。让我们使用ROS2 <a class="reference external" href="https://hub.docker.com/_/ros/">这里提供的示例</a>。创建一个新目录，其中包含一个新的Dockerfile（或覆盖现有的Dockerfile），然后在其中添加以下内容（或从`这里下载文件 &lt;<a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/blob/main/dockers/git_pkgs_docker/Dockerfile">https://github.com/mm-nasr/ros2_ibmcloud/blob/main/dockers/git_pkgs_docker/Dockerfile</a>&gt;`__） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6526">[6526]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ARG <span class="nv">FROM_IMAGE</span><span class="o">=</span>ros:foxy
ARG <span class="nv">OVERLAY_WS</span><span class="o">=</span>/opt/ros/overlay_ws

<span class="c1"># multi-stage for caching</span>
FROM <span class="nv">$FROM_IMAGE</span> AS cacher

<span class="c1"># clone overlay source</span>
ARG OVERLAY_WS
WORKDIR <span class="nv">$OVERLAY_WS</span>/src
RUN <span class="nb">echo</span> <span class="s2">&quot;\</span>
<span class="s2">repositories: \n\</span>
<span class="s2">  ros2/demos: \n\</span>
<span class="s2">    type: git \n\</span>
<span class="s2">    url: https://github.com/ros2/demos.git \n\</span>
<span class="s2">    version: </span><span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span><span class="s2"> \n\</span>
<span class="s2">&quot;</span> &gt; ../overlay.repos
RUN vcs import ./ &lt; ../overlay.repos

<span class="c1"># copy manifests for caching</span>
WORKDIR /opt
RUN mkdir -p /tmp/opt <span class="o">&amp;&amp;</span> <span class="se">\</span>
    find ./ -name <span class="s2">&quot;package.xml&quot;</span> <span class="p">|</span> <span class="se">\</span>
      xargs cp --parents -t /tmp/opt <span class="o">&amp;&amp;</span> <span class="se">\</span>
    find ./ -name <span class="s2">&quot;COLCON_IGNORE&quot;</span> <span class="p">|</span> <span class="se">\</span>
      xargs cp --parents -t /tmp/opt <span class="o">||</span> <span class="nb">true</span>

<span class="c1"># multi-stage for building</span>
FROM <span class="nv">$FROM_IMAGE</span> AS builder

<span class="c1"># install overlay dependencies</span>
ARG OVERLAY_WS
WORKDIR <span class="nv">$OVERLAY_WS</span>
COPY --from<span class="o">=</span>cacher /tmp/<span class="nv">$OVERLAY_WS</span>/src ./src
RUN . /opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh <span class="o">&amp;&amp;</span> <span class="se">\</span>
    apt-get update <span class="o">&amp;&amp;</span> rosdep install -y <span class="se">\</span>
      --from-paths <span class="se">\</span>
        src/ros2/demos/demo_nodes_cpp <span class="se">\</span>
        src/ros2/demos/demo_nodes_py <span class="se">\</span>
      --ignore-src <span class="se">\</span>
    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*

<span class="c1"># build overlay source</span>
COPY --from<span class="o">=</span>cacher <span class="nv">$OVERLAY_WS</span>/src ./src
ARG <span class="nv">OVERLAY_MIXINS</span><span class="o">=</span><span class="s2">&quot;release&quot;</span>
RUN . /opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh <span class="o">&amp;&amp;</span> <span class="se">\</span>
    colcon build <span class="se">\</span>
      --packages-select <span class="se">\</span>
        demo_nodes_cpp <span class="se">\</span>
        demo_nodes_py <span class="se">\</span>
      --mixin <span class="nv">$OVERLAY_MIXINS</span>

<span class="c1"># source entrypoint setup</span>
ENV OVERLAY_WS <span class="nv">$OVERLAY_WS</span>
RUN sed --in-place --expression <span class="se">\</span>
      <span class="s1">&#39;$isource &quot;$OVERLAY_WS/install/setup.bash&quot;&#39;</span> <span class="se">\</span>
      /ros_entrypoint.sh

<span class="c1"># run launch file</span>
CMD <span class="o">[</span><span class="s2">&quot;ros2&quot;</span>, <span class="s2">&quot;launch&quot;</span>, <span class="s2">&quot;demo_nodes_cpp&quot;</span>, <span class="s2">&quot;talker_listener.launch.py&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>通过查看所示的行，我们可以了解到如何通过4个步骤从GitHub添加自定义软件包： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6527">[6527]</a></p>
<ol class="arabic simple">
<li><p>创建一个包含从 Github 克隆的自定义软件包的叠加层: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6528">[6528]</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ARG OVERLAY_WS
WORKDIR <span class="nv">$OVERLAY_WS</span>/src
RUN <span class="nb">echo</span> <span class="s2">&quot;\</span>
<span class="s2">repositories: \n\</span>
<span class="s2">  ros2/demos: \n\</span>
<span class="s2">    type: git \n\</span>
<span class="s2">    url: https://github.com/ros2/demos.git \n\</span>
<span class="s2">    version: </span><span class="si">${</span><span class="nv">ROS_DISTRO</span><span class="si">}</span><span class="s2"> \n\</span>
<span class="s2">&quot;</span> &gt; ../overlay.repos
RUN vcs import ./ &lt; ../overlay.repos
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>使用 rosdep 安装软件包依赖项 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6529">[6529]</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># install overlay dependencies</span>
ARG OVERLAY_WS
WORKDIR <span class="nv">$OVERLAY_WS</span>
COPY --from<span class="o">=</span>cacher /tmp/<span class="nv">$OVERLAY_WS</span>/src ./src
RUN . /opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh <span class="o">&amp;&amp;</span> <span class="se">\</span>
    apt-get update <span class="o">&amp;&amp;</span> rosdep install -y <span class="se">\</span>
      --from-paths <span class="se">\</span>
        src/ros2/demos/demo_nodes_cpp <span class="se">\</span>
        src/ros2/demos/demo_nodes_py <span class="se">\</span>
      --ignore-src <span class="se">\</span>
    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>构建您需要的软件包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6530">[6530]</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># build overlay source</span>
COPY --from<span class="o">=</span>cacher <span class="nv">$OVERLAY_WS</span>/src ./src
ARG <span class="nv">OVERLAY_MIXINS</span><span class="o">=</span><span class="s2">&quot;release&quot;</span>
RUN . /opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.sh <span class="o">&amp;&amp;</span> <span class="se">\</span>
    colcon build <span class="se">\</span>
      --packages-select <span class="se">\</span>
        demo_nodes_cpp <span class="se">\</span>
        demo_nodes_py <span class="se">\</span>
      --mixin <span class="nv">$OVERLAY_MIXINS</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>运行启动文件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6531">[6531]</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run launch file</span>
CMD <span class="o">[</span><span class="s2">&quot;ros2&quot;</span>, <span class="s2">&quot;launch&quot;</span>, <span class="s2">&quot;demo_nodes_cpp&quot;</span>, <span class="s2">&quot;talker_listener.launch.py&quot;</span><span class="o">]</span>
</pre></div>
</div>
<p>同样地，我们可以更改所使用的软件包，安装它们的依赖项，然后运行它们。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6532">[6532]</a></p>
<p><strong>返回 IBM Cloud</strong> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6533">[6533]</a></p>
<p>使用这个Dockerfile，我们可以按照之前的步骤在IBM Cloud上部署它。由于我们已经创建了注册表，并且我们已经登录到IBM Cloud，因此我们直接构建我们的新Dockerfile。请注意，我保持了标签不变，但更改了版本，这样我可以更新先前创建的Docker镜像。（如果您愿意，您可以完全创建一个新的） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6534">[6534]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud cr build --tag registry.bluemix.net/ros2nasr/ros2foxy:2 .
</pre></div>
</div>
<p>然后，确保您已登录到注册表，并运行新的Docker镜像： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6535">[6535]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ibmcloud cr login
Logging <span class="k">in</span> to <span class="s1">&#39;registry.ng.bluemix.net&#39;</span>...
Logged <span class="k">in</span> to <span class="s1">&#39;registry.ng.bluemix.net&#39;</span>.
Logging <span class="k">in</span> to <span class="s1">&#39;us.icr.io&#39;</span>...
Logged <span class="k">in</span> to <span class="s1">&#39;us.icr.io&#39;</span>.

OK

$ docker run -v -it registry.ng.bluemix.net/ros2nasr/ros2foxy:2
</pre></div>
</div>
<p>您应该再次看到相同的输出。然而，这次我们是通过来自GitHub的自定义包来完成的，这使我们能够在IBM Cloud上利用我们个人创建的ROS2包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6536">[6536]</a></p>
<div class="section" id="extra-deleting-docker-images">
<h3>附加信息：删除Docker镜像 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6537">[6537]</a><a class="headerlink" href="#extra-deleting-docker-images" title="永久链接至标题"></a></h3>
<p>如果您发现自己需要从IBM Cloud中删除特定的Docker镜像，以下是您应该执行的步骤！ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6538">[6538]</a></p>
<ol class="arabic simple">
<li><p>列出您拥有的所有镜像，并找到所有与*registry.ng.bluemix.net/ros2nasr/ros2foxy:2*（在我的情况下）相对应的*IMAGE*名称的镜像。然后使用它们的*NAMES*进行删除。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6539">[6539]</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker rm your_docker_NAMES
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>使用其*IMAGE*名称从IBM Cloud中删除Docker镜像 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6540">[6540]</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker rmi registry.ng.bluemix.net/ros2nasr/ros2foxy:2
</pre></div>
</div>
</div>
</div>
<div class="section" id="step-4-kubernetes">
<h2>第四步：Kubernetes <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6541">[6541]</a><a class="headerlink" href="#step-4-kubernetes" title="永久链接至标题"></a></h2>
<div class="section" id="a-creating-the-cluster">
<h3>a) 创建集群 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6542">[6542]</a><a class="headerlink" href="#a-creating-the-cluster" title="永久链接至标题"></a></h3>
<p>使用控制台创建集群。指令可以在`此处 &lt;<a class="reference external" href="https://cloud.ibm.com/docs/containers?topic=containers-clusters#clusters_ui">https://cloud.ibm.com/docs/containers?topic=containers-clusters#clusters_ui</a>&gt;`__找到。下面详细介绍了使用的设置。这些仅为建议，如果需要，可以进行更改。然而，请确保您理解所做选择的影响： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6543">[6543]</a></p>
<ol class="arabic simple">
<li><p>计划：<em>标准</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6544">[6544]</a></p></li>
<li><p>编排服务：<em>Kubernetes v1.18.10</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6545">[6545]</a></p></li>
<li><p>基础设施: <em>经典</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6546">[6546]</a></p></li>
<li><p>位置: <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6547">[6547]</a></p></li>
</ol>
<ul class="simple">
<li><p>资源组: <em>默认</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6548">[6548]</a></p></li>
<li><p>地理位置: <a href="#id1"><span class="problematic" id="id2">*</span></a>北美*（您可以更改此选项） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6549">[6549]</a></p></li>
<li><p>可用性: <a href="#id1"><span class="problematic" id="id2">*</span></a>单一区域*（您可以更改此选项，但请确保通过查阅IBM Cloud文档了解您选择的影响。） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6550">[6550]</a></p></li>
<li><p>工作区: <a href="#id1"><span class="problematic" id="id2">*</span></a>多伦多 01*（选择与您物理位置最近的位置） <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6551">[6551]</a></p></li>
</ul>
<ol class="arabic simple" start="5">
<li><p>工作池:  <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6552">[6552]</a></p></li>
</ol>
<ul class="simple">
<li><p>虚拟 - 共享，Ubuntu 18 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6553">[6553]</a></p></li>
<li><p>内存: 16 GB <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6554">[6554]</a></p></li>
<li><p>每个区域的工作节点: <em>1</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6555">[6555]</a></p></li>
</ul>
<ol class="arabic simple" start="6">
<li><p>主服务端点: <em>私有和公共端点都可用</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6556">[6556]</a></p></li>
<li><p>资源详情（完全灵活）： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6557">[6557]</a></p></li>
</ol>
<ul class="simple">
<li><p>集群名称: <em>mycluster-tor01-rosibm</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6558">[6558]</a></p></li>
<li><p>标签: <em>version:1</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6559">[6559]</a></p></li>
</ul>
<p>创建集群后，您将被重定向到一个页面，该页面详细介绍了如何设置CLI工具和访问您的集群。请按照这些说明操作（或者在这里查看说明：&lt;<a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/blob/main/Kubernetes-Cluster-Set-up.md">https://github.com/mm-nasr/ros2_ibmcloud/blob/main/Kubernetes-Cluster-Set-up.md</a>&gt;），并等待进度条显示创建的工作节点已经准备就绪，集群名称旁边显示*Normal*。您也可以从IBM Cloud控制台内部的Kubernetes界面访问此屏幕。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6560">[6560]</a></p>
</div>
<div class="section" id="b-deploying-your-docker-image-finally">
<h3>b) 部署您的Docker镜像 <em>最后！</em> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6561">[6561]</a><a class="headerlink" href="#b-deploying-your-docker-image-finally" title="永久链接至标题"></a></h3>
<ol class="arabic simple">
<li><p>使用您喜欢的$EDITOR创建一个名为*ros2-deployment.yaml*的部署配置yaml文件，并在其中插入以下内容： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6562">[6562]</a></p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apiVersion: apps/v1
kind: Deployment
metadata:
  name: &lt;deployment&gt;
spec:
  replicas: &lt;number_of_replicas&gt;
  selector:
    matchLabels:
      app: &lt;app_name&gt;
  template:
    metadata:
      labels:
        app: &lt;app_name&gt;
    spec:
      containers:
      - name: &lt;app_name&gt;
        image: &lt;region&gt;.icr.io/&lt;namespace&gt;/&lt;image&gt;:&lt;tag&gt;
</pre></div>
</div>
<p>您应该根据此处描述的方式替换*&quot;&lt;&quot; &quot;&gt;&quot;<a href="#id1"><span class="problematic" id="id2">*</span></a>之间显示的标签。在我的情况下，文件的内容将类似于以下内容： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6563">[6563]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apiVersion: apps/v1
kind: Deployment
metadata:
  name: ros2-deployment
spec:
  replicas: <span class="m">1</span>
  selector:
    matchLabels:
      app: ros2-ibmcloud
  template:
    metadata:
      labels:
        app: ros2-ibmcloud
    spec:
      containers:
      - name: ros2-ibmcloud
        image: us.icr.io/ros2nasr/ros2foxy:2
</pre></div>
</div>
<p>使用以下命令部署文件 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6564">[6564]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ kubectl apply -f ros2-deployment.yaml
deployment.apps/ros2-deployment created
</pre></div>
</div>
<p>现在你的 Docker 镜像已完全部署在你的集群上！ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6565">[6565]</a></p>
</div>
</div>
<div class="section" id="step-5-using-cli-for-your-docker-image">
<h2>步骤 5：使用 CLI 操作你的 Docker 镜像 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6566">[6566]</a><a class="headerlink" href="#step-5-using-cli-for-your-docker-image" title="永久链接至标题"></a></h2>
<ol class="arabic simple">
<li><p>通过 IBM Cloud 控制台 Kubernetes 导航到你的集群。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6567">[6567]</a></p></li>
<li><p>点击页面右上角的 <em>Kubernetes 仪表盘</em>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6568">[6568]</a></p></li>
</ol>
<p>现在你应该能够看到你的集群的所有不同参数以及其 CPU 和内存使用情况的完整列表。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6569">[6569]</a></p>
<ol class="arabic simple" start="3">
<li><p>转到 <em>Pods</em>，然后点击您的部署。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6570">[6570]</a></p></li>
<li><p>在右上角，点击 <em>Exec into pod</em>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6571">[6571]</a></p></li>
</ol>
<p>现在您已经进入了您的 Docker 镜像！您可以为您的工作区设置环境变量（如果需要），然后运行 ROS2！例如： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6572">[6572]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@ros2-deployment-xxxxxxxx:/opt/ros/overlay_ws# . install/setup.sh
root@ros2-deployment-xxxxxxxx:/opt/ros/overlay_ws# ros2 launch demo_nodes_cpp talker_listener.launch.py
</pre></div>
</div>
</div>
<div class="section" id="final-remarks">
<h2>最后的备注 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6573">[6573]</a><a class="headerlink" href="#final-remarks" title="永久链接至标题"></a></h2>
<p>在此时，您可以使用来自 GitHub 上的 ROS2 软件包创建自己的 Docker 镜像。也可以进行少量修改，以利用本地的 ROS2 软件包。这可能是另一篇文章的主题。不过，建议您查看以下 <a class="reference external" href="https://github.com/mm-nasr/ros2_ibmcloud/tree/main/dockers/local_pkgs_docker">Dockerfile</a>，该文件使用了演示存储库的本地副本。同样地，您也可以使用您自己的本地软件包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=6574">[6574]</a></p>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>