<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Releases/Release-Eloquent-Elusor</title>
</head>
<body>
  <div class="section" id="eloquent-elusor-eloquent">
<h1>Eloquent Elusor（<code class="docutils literal notranslate"><span class="pre">eloquent</span></code>）<a class="headerlink" href="#eloquent-elusor-eloquent" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#supported-platforms" id="id1">支持的平台</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id2">安装</a></p></li>
<li><p><a class="reference internal" href="#new-features-in-this-ros-2-release" id="id3">这个ROS 2版本的新功能有：</a></p></li>
<li><p><a class="reference internal" href="#changes-since-the-dashing-release" id="id4">自 Dashing 发布以来的变化</a></p>
<ul>
<li><p><a class="reference internal" href="#geometry-msgs" id="id5">geometry_msgs</a></p></li>
<li><p><a class="reference internal" href="#rclcpp" id="id6">rclcpp</a></p></li>
<li><p><a class="reference internal" href="#rmw" id="id7">rmw</a></p></li>
<li><p><a class="reference internal" href="#ros2cli" id="id8">ros2cli</a></p></li>
<li><p><a class="reference internal" href="#rviz" id="id9">rviz</a></p></li>
<li><p><a class="reference internal" href="#tf2-buffer" id="id10">TF2 缓冲区</a></p></li>
<li><p><a class="reference internal" href="#rcl" id="id11">rcl</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#known-issues" id="id12">已知问题</a></p></li>
<li><p><a class="reference internal" href="#timeline-before-the-release" id="id13">发布前的时间线</a></p></li>
</ul>
</div>
<p><a href="#id1"><span class="problematic" id="id2">*</span></a>Eloquent Elusor*是ROS 2的第五个版本。</p>
<div class="section" id="supported-platforms">
<h2><a class="toc-backref" href="#id1">支持的平台</a><a class="headerlink" href="#supported-platforms" title="永久链接至标题"></a></h2>
<p>Eloquent Elusor 主要支持以下平台：</p>
<p>一级平台：</p>
<ul class="simple">
<li><p>Ubuntu 18.04（Bionic）：<code class="docutils literal notranslate"><span class="pre">amd64``和``arm64</span></code></p></li>
<li><p>Mac macOS 10.14 (Mojave)</p></li>
<li><p>Windows 10（Visual Studio 2019）</p></li>
</ul>
<p>二级平台：</p>
<ul class="simple">
<li><p>Ubuntu 18.04（Bionic）：<code class="docutils literal notranslate"><span class="pre">arm32</span></code></p></li>
</ul>
<p>Tier 3 平台：</p>
<ul class="simple">
<li><p>Debian Stretch（9）：<code class="docutils literal notranslate"><span class="pre">amd64</span></code>、<code class="docutils literal notranslate"><span class="pre">arm64</span></code> 和 <code class="docutils literal notranslate"><span class="pre">arm32</span></code></p></li>
<li><p>OpenEmbedded Thud（2.6）/ webOS OSE：<code class="docutils literal notranslate"><span class="pre">arm32</span></code> 和 <code class="docutils literal notranslate"><span class="pre">x86</span></code></p></li>
</ul>
<p>有关 RMW 实现、编译器/解释器版本和系统依赖版本的更多信息，请参阅 <a class="reference external" href="https://www.ros.org/reps/rep-2000.html">REP 2000</a>。</p>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id2">安装</a><a class="headerlink" href="#installation" title="永久链接至标题"></a></h2>
<p><a class="reference external" href="../../eloquent/Installation.html">安装 Eloquent Elusor</a></p>
</div>
<div class="section" id="new-features-in-this-ros-2-release">
<h2><a class="toc-backref" href="#id3">这个ROS 2版本的新功能有：</a><a class="headerlink" href="#new-features-in-this-ros-2-release" title="永久链接至标题"></a></h2>
<p>我们想要强调一些功能和改进：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/launch/pull/226">支持基于标记的启动文件 (XML/YAML)</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/ros2/issues/739#issuecomment-555743540">改进的基于启动的测试</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/design/pull/245">通过命令行传递键值参数</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/pull/926">支持流日志宏</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/ros2/issues/789">每个节点的日志记录</a> - 所有节点的标准输出/错误输出都记录在 ~/.ros</p></li>
<li><p><a class="reference external" href="https://index.ros.org/doc/ros2/Tutorials/Getting-Started-With-Ros2doctor/">ros2doctor</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/ros2/issues/764">改进了设置文件的性能</a></p></li>
<li><p>rviz: <a class="reference external" href="https://github.com/ros2/rviz/pull/457">交互标记</a>, <a class="reference external" href="https://github.com/ros2/rviz/pull/396">力矩环</a>, <a class="reference external" href="https://github.com/ros2/rviz/pull/375">tf 消息过滤器</a></p></li>
<li><p>rqt: <a class="reference external" href="https://github.com/ros-visualization/rqt_reconfigure/pull/31">参数插件</a>、<a class="reference external" href="https://github.com/ros-visualization/rqt_tf_tree/pull/13">tf树插件</a>、<a href="#id1"><span class="problematic" id="id2">`</span></a>机器人转向插件 &lt;<a class="reference external" href="https://github.com/ros-visualization/rqt_robot_steering/pull/7">https://github.com/ros-visualization/rqt_robot_steering/pull/7</a>&gt;`__（也已回溯到Dashing版本）</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">`</span></a>turtlesim &lt;<a class="reference external" href="https://github.com/ros/ros_tutorials/pull/53">https://github.com/ros/ros_tutorials/pull/53</a>&gt;`__（也已回溯到Dashing版本）</p></li>
<li><p>RMW实现：</p>
<ul>
<li><p><a class="reference external" href="https://github.com/ros2/design/pull/256">零拷贝消息借用API</a>，被 <a class="reference external" href="https://github.com/ros2/rmw_iceoryx">rmw_iceoryx</a> 使用</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/ros2/issues/734#issuecomment-518018479">Fast RTPS 1.9.3</a></p></li>
<li><p>新的Tier-2实现：<a href="#id1"><span class="problematic" id="id2">`</span></a>rmw_cyclonedds &lt;<a class="reference external" href="https://github.com/ros2/rmw_cyclonedds">https://github.com/ros2/rmw_cyclonedds</a>&gt;`__（也已回溯到Dashing版本）</p></li>
</ul>
</li>
<li><p>环境变量 <a class="reference external" href="https://github.com/ros2/ros2/issues/798">ROS_LOCALHOST_ONLY</a> 用于限制通信仅在本地主机进行</p></li>
<li><p>MacOS Mojave 支持</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/ros2/pull/748">Tracing instrumentation</a> 用于 rcl 和 rclcpp</p></li>
</ul>
<p>在开发过程中，GitHub 上的 <a class="reference external" href="https://github.com/ros2/ros2/issues/734">Eloquent meta ticket</a> 包含进行中的高级任务的最新状态，以及涉及更多细节的特定票据的引用。</p>
</div>
<div class="section" id="changes-since-the-dashing-release">
<h2><a class="toc-backref" href="#id4">自 Dashing 发布以来的变化</a><a class="headerlink" href="#changes-since-the-dashing-release" title="永久链接至标题"></a></h2>
<div class="section" id="geometry-msgs">
<h3><a class="toc-backref" href="#id5">geometry_msgs</a><a class="headerlink" href="#geometry-msgs" title="永久链接至标题"></a></h3>
<p>现在``geometry_msgs/msg/Quaternion.msg``接口的默认初始化为一个有效的四元数，具有以下值：</p>
<div class="math notranslate nohighlight">
\[\begin{split}x = 0 \\
y = 0 \\
z = 0 \\
w = 1\end{split}\]</div>
<p>这是有关更多细节的拉取请求: <a class="reference external" href="https://github.com/ros2/common_interfaces/pull/74">https://github.com/ros2/common_interfaces/pull/74</a></p>
<p>静态变换广播器和监听器现在在``/tf_static``话题上使用QoS持久性``transient_local``。类似于ROS 1中的latched设置，静态变换只需要发布一次。新的监听器将从所有存活且在之前发布的静态广播器接收变换。所有发布者必须更新使用此持久性设置，否则它们的消息将不会被变换监听器接收。有关更多细节，请参阅此拉取请求: <a class="reference external" href="https://github.com/ros2/geometry2/pull/160">https://github.com/ros2/geometry2/pull/160</a></p>
</div>
<div class="section" id="rclcpp">
<h3><a class="toc-backref" href="#id6">rclcpp</a><a class="headerlink" href="#rclcpp" title="永久链接至标题"></a></h3>
<div class="section" id="api-break-with-get-actual-qos">
<h4>与``get_actual_qos()``的API中断<a class="headerlink" href="#api-break-with-get-actual-qos" title="永久链接至标题"></a></h4>
<p>在Dashing中引入的``get_actual_qos()``方法在``PublisherBase``和``SubscriptionBase``上以前返回了一个rmw类型``rmw_qos_profile_t``，但这使得在创建其他实体时难以重用。因此，它已更新为返回一个``rclcpp::QoS``。</p>
<p>现有的代码如果仍需要rmw配置文件，则需要使用``rclcpp::QoS::get_rmw_qos_profile()``方法。例如：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">my_func</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">rmw_qos_profile_t</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">rmw_qos</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* Previously: */</span><span class="w"></span>
<span class="c1">// my_func(some_pub-&gt;get_actual_qos());</span>
<span class="cm">/* Now: */</span><span class="w"></span>
<span class="n">my_func</span><span class="p">(</span><span class="n">some_pub</span><span class="o">-&gt;</span><span class="n">get_actual_qos</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">get_rmw_qos_profile</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
<p>这种直接进行更改而不是进行逐步迁移的原因是，这是一个新的函数，预计用户很少使用。此外，由于只有返回类型发生变化，添加一个具有不同返回类型的新函数是进行废弃周期和``get_actual_qos()``是最合适的名称的唯一方法，因此我们将被迫选择一个不太明显的方法名称。</p>
</div>
<div class="section" id="api-break-with-publisher-and-subscription-classes">
<h4>与发布者和订阅者类的API变更<a class="headerlink" href="#api-break-with-publisher-and-subscription-classes" title="永久链接至标题"></a></h4>
<p>为了简化发布者和订阅者的构建过程，构造函数的API已进行了更改。</p>
<p>不可能支持废弃周期，因为旧的签名接受rcl类型，而新的签名接受``NodeBaseInterface``类型，以便获得现在所需的附加信息，并且无法仅通过rcl类型获取所需的附加信息。如果这有助于贡献者，新的签名可能会被回溯，但由于发布者和订阅者几乎总是使用工厂函数或其他更高级别的API创建，我们不认为这对大多数用户会构成问题。</p>
<p>请查看原始的PR了解更多详细信息，并在那里进行评论，如果这引起了问题：</p>
<p>[<a class="reference external" href="https://github.com/ros2/rclcpp/pull/867](https://github.com/ros2/rclcpp/pull/867">https://github.com/ros2/rclcpp/pull/867](https://github.com/ros2/rclcpp/pull/867</a>)</p>
</div>
<div class="section" id="compiler-warning-about-unused-result-of-add-on-set-parameters-callback">
<h4>编译器警告，关于未使用``add_on_set_parameters_callback``的结果<a class="headerlink" href="#compiler-warning-about-unused-result-of-add-on-set-parameters-callback" title="永久链接至标题"></a></h4>
<p><em>自Eloquent Patch Release 2（2020-12-04）开始</em></p>
<p>用户应该保留 <code class="docutils literal notranslate"><span class="pre">rclcpp::Node::add_on_set_parameters_callback</span></code> 返回的句柄，否则他们的回调可能会被取消注册。已添加警告以帮助识别未使用返回句柄的错误。</p>
<p><a class="reference external" href="https://github.com/ros2/rclcpp/pull/1243">https://github.com/ros2/rclcpp/pull/1243</a></p>
</div>
</div>
<div class="section" id="rmw">
<h3><a class="toc-backref" href="#id7">rmw</a><a class="headerlink" href="#rmw" title="永久链接至标题"></a></h3>
<div class="section" id="api-break-due-to-addition-of-publisher-and-subscription-options">
<h4>由于新增发布者和订阅者选项而导致的API变更。<a class="headerlink" href="#api-break-due-to-addition-of-publisher-and-subscription-options" title="永久链接至标题"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">rmw_create_publisher()</span></code> 方法新增了一个类型为 <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">rmw_publisher_options_t</span> <span class="pre">*</span></code> 的参数。这个新结构包含了用于新发布者的选项（除了类型支持、主题名称和QoS之外）。</p>
<p>方法``rmw_create_subscription()``的一个参数被删除，即``bool ignore_local_publications``，并被新的类型为``const rmw_subscription_options_t <a href="#id1"><span class="problematic" id="id2">*</span></a><a href="#id3"><span class="problematic" id="id4">``</span></a>的选项所取代。<a href="#id5"><span class="problematic" id="id6">``</span></a>ignore_local_publications``选项被移入新的``rmw_subscription_options_t``类型中。</p>
<p>在这两种情况下，这些新的参数（指针类型）不能为null，因此rmw实现应该检查选项是否为null。另外，应将选项复制到相应的rmw结构中。</p>
<p>请参阅此pull request和相关的pull requests获取更多详细信息：</p>
<p><a class="reference external" href="https://github.com/ros2/rmw/pull/187">https://github.com/ros2/rmw/pull/187</a></p>
</div>
</div>
<div class="section" id="ros2cli">
<h3><a class="toc-backref" href="#id8">ros2cli</a><a class="headerlink" href="#ros2cli" title="永久链接至标题"></a></h3>
<div class="section" id="ros2msg-and-ros2srv-deprecated">
<h4>ros2msg和ros2srv已弃用<a class="headerlink" href="#ros2msg-and-ros2srv-deprecated" title="永久链接至标题"></a></h4>
<p>CLI工具``ros2msg``和``ros2srv``已被弃用。它们已被工具``ros2interface``替代，该工具还支持action和IDL接口。您可以运行``ros2 interface --help``获取用法信息。</p>
</div>
<div class="section" id="ros2node">
<h4>ros2node<a class="headerlink" href="#ros2node" title="永久链接至标题"></a></h4>
<p>Service客户端已添加到ros2node info。作为该更改的一部分，Python函数``ros2node.api.get_service_info``已更名为``ros2node.api.get_service_server_info``。</p>
</div>
</div>
<div class="section" id="rviz">
<h3><a class="toc-backref" href="#id9">rviz</a><a class="headerlink" href="#rviz" title="永久链接至标题"></a></h3>
<div class="section" id="renamed-2d-nav-goal-tool">
<h4>重命名为'2D Nav Goal'工具<a class="headerlink" href="#renamed-2d-nav-goal-tool" title="永久链接至标题"></a></h4>
<p>该工具已更名为'2D Goal Pose'，默认话题从``/move_base_simple/goal``更改为``/goal_pose``。</p>
<p>这是相关的pull请求：</p>
<p><a class="reference external" href="https://github.com/ros2/rviz/pull/455">https://github.com/ros2/rviz/pull/455</a></p>
</div>
</div>
<div class="section" id="tf2-buffer">
<h3><a class="toc-backref" href="#id10">TF2 缓冲区</a><a class="headerlink" href="#tf2-buffer" title="永久链接至标题"></a></h3>
<p>现在必须为 TF2 缓冲区提供定时器接口。</p>
<p>如果未提供定时器接口，将抛出异常。</p>
<p>例如：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">tf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">tf2_ros</span><span class="o">::</span><span class="n">Buffer</span><span class="o">&gt;</span><span class="p">(</span><span class="n">get_clock</span><span class="p">());</span><span class="w"></span>
<span class="c1">// The next two lines are new in Eloquent</span>
<span class="k">auto</span><span class="w"> </span><span class="n">timer_interface</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">tf2_ros</span><span class="o">::</span><span class="n">CreateTimerROS</span><span class="o">&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_node_base_interface</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">get_node_timers_interface</span><span class="p">());</span><span class="w"></span>
<span class="n">tf</span><span class="o">-&gt;</span><span class="n">setCreateTimerInterface</span><span class="p">(</span><span class="n">timer_interface</span><span class="p">);</span><span class="w"></span>
<span class="c1">// Pass the Buffer to the TransformListener as before</span>
<span class="n">transform_listener</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">tf2_ros</span><span class="o">::</span><span class="n">TransformListener</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">tf</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="rcl">
<h3><a class="toc-backref" href="#id11">rcl</a><a class="headerlink" href="#rcl" title="永久链接至标题"></a></h3>
<div class="section" id="ros-command-line-argument-changes">
<h4>ROS命令行参数更改<a class="headerlink" href="#ros-command-line-argument-changes" title="永久链接至标题"></a></h4>
<p>为了应对日益复杂的接口，现在扩展了一组配置选项，ROS CLI的语法已经发生了变化。例如，使用Dashing语法的命令行如下：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 run some_package some_node foo:=bar __params:=/path/to/params.yaml __log_level:=WARN --user-flag</span>
</pre></div>
</div>
<p>使用Eloquent（及更高版本）的语法编写如下：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ros2 run some_package some_node --ros-args --remap foo:=bar --params-file /path/to/params.yaml --log-level WARN -- --user-flag</span>
</pre></div>
</div>
<p>这种显式的语法提供了新功能，例如单参数赋值 <code class="docutils literal notranslate"><span class="pre">--param</span> <span class="pre">name:=value</span></code>。如需更多参考和解释，请查看 <a class="reference external" href="https://design.ros2.org/articles/ros_command_line_arguments.html">ROS命令行参数设计文档</a>。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>旧的语法已被弃用，并将在下一个版本中移除。</p>
</div>
</div>
</div>
</div>
<div class="section" id="known-issues">
<h2><a class="toc-backref" href="#id12">已知问题</a><a class="headerlink" href="#known-issues" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rosidl/issues/402">[ros2/rosidl#402]</a> <code class="docutils literal notranslate"><span class="pre">find_package(PCL)</span></code> 干扰了ROS接口生成。解决方法：在 <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces()</span></code> 之后调用 <code class="docutils literal notranslate"><span class="pre">find_package(PCL)</span></code>。</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/issues/893">[ros2/rclcpp#893]</a> <code class="docutils literal notranslate"><span class="pre">rclcpp::Context</span></code> 由于与 <code class="docutils literal notranslate"><span class="pre">rclcpp::GraphListener</span></code> 存在引用循环而无法销毁。这导致内存泄漏。由于破坏ABI的风险，修复尚未进行回溯。</p></li>
</ul>
</div>
<div class="section" id="timeline-before-the-release">
<h2><a class="toc-backref" href="#id13">发布前的时间线</a><a class="headerlink" href="#timeline-before-the-release" title="永久链接至标题"></a></h2>
<p>发布前的一些关键节点：</p>
<blockquote>
<div><dl class="simple">
<dt>周一，9月30日（α版）</dt><dd><p>核心软件包的首次发布可用。从现在开始可以进行测试（某些功能可能尚未完全实现）。</p>
</dd>
<dt>周五，10月18日</dt><dd><p>核心包API和功能冻结，此后只能进行错误修复发布。新包可以独立发布。</p>
</dd>
<dt>周四，10月24日（β版）</dt><dd><p>可用的核心包更新版本。对最新功能进行额外测试。</p>
</dd>
<dt>周三，11月13日（正式版本候选人）</dt><dd><p>可用的核心软件包更新版本。</p>
</dd>
<dt>周二，11月19日</dt><dd><p>冻结 rosdistro。<a class="reference external" href="http://docs.ros.org/en/independent/api/rosdistro/html/rosdistro.html#module-rosdistro" title="(在 rosdistro)"><code class="xref any docutils literal notranslate"><span class="pre">rosdistro</span></code></a> 仓库上关于 Eloquent 的 PR 不会被合并（发布公告后重新开放）。</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>