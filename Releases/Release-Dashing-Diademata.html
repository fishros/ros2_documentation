<!DOCTYPE html>
<html class="writer-html5" lang="zh" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashing Diademata（dashing） &mdash; ROS 2 Documentation: Humble  文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://docs.ros.org/en/humble/Releases/Release-Dashing-Diademata.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Crystal Clemmys (crystal)" href="Release-Crystal-Clemmys.html" />
    <link rel="prev" title="Eloquent Elusor (eloquent)" href="Release-Eloquent-Elusor.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> ROS 2 Documentation: Humble
            <img src="../_static/humble-small.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Installation.html">安装</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Ubuntu-Install-Debians.html">Ubuntu（Debian）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Windows-Install-Binary.html">Windows (二进制)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/RHEL-Install-RPMs.html">RHEL（RPM）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Alternatives.html">替代方案</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Ubuntu-Development-Setup.html">Ubuntu（源代码）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Ubuntu-Install-Binary.html">Ubuntu（二进制）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Windows-Development-Setup.html">Windows（源代码）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/RHEL-Development-Setup.html">RHEL（源代码）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/RHEL-Install-Binary.html">RHEL（二进制）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/macOS-Development-Setup.html">macOS（源码）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Fedora-Development-Setup.html">Fedora（源代码）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/Alternatives/Latest-Development-Setup.html">最新的开发版本（源码）</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Maintaining-a-Source-Checkout.html">维护源代码检出。</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/Testing.html">使用预发布二进制文件进行测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Installation/DDS-Implementations.html">DDS 实现</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Install-Connext-Security-Plugins.html">Connext安全插件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Install-Connext-University-Eval.html">RTI Connext DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Working-with-Eclipse-CycloneDDS.html">Eclipse Cyclone DDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Working-with-GurumNetworks-GurumDDS.html">GurumNetworks GurumDDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Installation/DDS-Implementations/Working-with-eProsima-Fast-DDS.html">eProsima Fast DDS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../Releases.html">分发版本</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Release-Iron-Irwini.html">Iron Irwini (<code class="docutils literal notranslate"><span class="pre">iron</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Iron-Irwini-Complete-Changelog.html">Iron Irwini 更新日志</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Release-Humble-Hawksbill.html">Humble Hawksbill (<code class="docutils literal notranslate"><span class="pre">humble</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Humble-Hawksbill-Complete-Changelog.html">Humble Hawksbill 变更日志</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Release-Foxy-Fitzroy.html">Foxy Fitzroy (<code class="docutils literal notranslate"><span class="pre">foxy</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Release-Rolling-Ridley.html">Rolling Ridley (<code class="docutils literal notranslate"><span class="pre">rolling</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="Development.html">开发分发版</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Release-Jazzy-Jalisco.html">Jazzy Jalisco (codename 'jazzy'; May, 2024)</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="End-of-Life.html">终止生命周期的发行版</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Release-Galactic-Geochelone.html">Galactic Geochelone (<code class="docutils literal notranslate"><span class="pre">galactic</span></code>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="Galactic-Geochelone-Complete-Changelog.html">Galactic Geochelone更改日志</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Release-Eloquent-Elusor.html">Eloquent Elusor (<code class="docutils literal notranslate"><span class="pre">eloquent</span></code>)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Dashing Diademata（<code class="docutils literal notranslate"><span class="pre">dashing</span></code>）</a></li>
<li class="toctree-l3"><a class="reference internal" href="Release-Crystal-Clemmys.html">Crystal Clemmys (<code class="docutils literal notranslate"><span class="pre">crystal</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Release-Bouncy-Bolson.html">Bouncy Bolson（<code class="docutils literal notranslate"><span class="pre">bouncy</span></code>）</a></li>
<li class="toctree-l3"><a class="reference internal" href="Release-Ardent-Apalone.html">Ardent Apalone (<code class="docutils literal notranslate"><span class="pre">ardent</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Beta3-Overview.html">Beta 3 (<code class="docutils literal notranslate"><span class="pre">r2b3</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Beta2-Overview.html">Beta 2（<code class="docutils literal notranslate"><span class="pre">r2b2</span></code>）</a></li>
<li class="toctree-l3"><a class="reference internal" href="Beta1-Overview.html">Beta 1（<code class="docutils literal notranslate"><span class="pre">Asphalt</span></code>）</a></li>
<li class="toctree-l3"><a class="reference internal" href="Alpha-Overview.html">阿尔法版本</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Release-Process.html">Development process for a release</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorials.html">教程</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools.html">初学者：CLI 工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html">配置环境</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Introducing-Turtlesim/Introducing-Turtlesim.html">使用``turtlesim``、<code class="docutils literal notranslate"><span class="pre">ros2``和``rqt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Nodes/Understanding-ROS2-Nodes.html">理解节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Topics/Understanding-ROS2-Topics.html">理解话题</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Services/Understanding-ROS2-Services.html">了解服务</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Parameters/Understanding-ROS2-Parameters.html">理解参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Understanding-ROS2-Actions/Understanding-ROS2-Actions.html">理解行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Using-Rqt-Console/Using-Rqt-Console.html">使用 <code class="docutils literal notranslate"><span class="pre">rqt_console</span></code> 查看日志</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Launching-Multiple-Nodes/Launching-Multiple-Nodes.html">启动节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-CLI-Tools/Recording-And-Playing-Back-Data/Recording-And-Playing-Back-Data.html">录制和回放数据</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries.html">初学者：客户端库</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Colcon-Tutorial.html">使用 <code class="docutils literal notranslate"><span class="pre">colcon</span></code> 构建软件包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html">创建一个工作空间</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Creating-Your-First-ROS2-Package.html">创建软件包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Publisher-And-Subscriber.html">编写一个简单的发布者和订阅者（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html">编写一个简单的发布者和订阅者（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Cpp-Service-And-Client.html">编写一个简单的服务和客户端（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Service-And-Client.html">编写一个简单的服务和客户端（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html">创建自定义的 msg 和 srv 文件。</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Single-Package-Define-And-Use-Interface.html">实现自定义接口</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-CPP.html">在类中使用参数（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Using-Parameters-In-A-Class-Python.html">在类中使用参数（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Getting-Started-With-Ros2doctor.html">使用``ros2doctor``来识别问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Beginner-Client-Libraries/Pluginlib.html">创建和使用插件（C++）</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Intermediate.html">中级</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Rosdep.html">使用rosdep管理依赖关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Creating-an-Action.html">创建一个动作</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Writing-an-Action-Server-Client/Cpp.html">编写一个动作服务器和客户端（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Writing-an-Action-Server-Client/Py.html">编写一个动作服务器和客户端（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Composition.html">在单个进程中组合多个节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Monitoring-For-Parameter-Changes-CPP.html">监视参数变化（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Launch-Main.html">启动</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Creating-Launch-Files.html">创建一个启动文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Launch-system.html">将启动文件集成到ROS 2包中</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Using-Substitutions.html">使用替代项</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Using-Event-Handlers.html">使用事件处理程序</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Launch/Using-ROS2-Launch-For-Large-Projects.html">管理大型项目</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Tf2-Main.html"><code class="docutils literal notranslate"><span class="pre">tf2</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Introduction-To-Tf2.html">介绍``tf2``</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Py.html">编写静态广播器（Python）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Static-Broadcaster-Cpp.html">编写静态广播器（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Py.html">编写广播器（Python）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Broadcaster-Cpp.html">编写广播器（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Py.html">编写监听器（Python）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Writing-A-Tf2-Listener-Cpp.html">编写监听器（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Adding-A-Frame-Py.html">添加一个帧（Python）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Adding-A-Frame-Cpp.html">添加一个框架（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Py.html">使用时间（Python）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Learning-About-Tf2-And-Time-Cpp.html">使用时间（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Py.html">时间旅行（Python）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Time-Travel-With-Tf2-Cpp.html">时间旅行（C++）</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Debugging-Tf2-Problems.html">调试</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Quaternion-Fundamentals.html">四元数基础知识</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Tf2/Using-Stamped-Datatypes-With-Tf2-Ros-MessageFilter.html">使用带时间戳的数据类型与``tf2_ros::MessageFilter``</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/Testing/Testing-Main.html">测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Testing/CLI.html">从命令行中运行 ROS 2 中的测试</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Testing/Cpp.html">使用 GTest 编写基本的 C++ 测试</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/Testing/Python.html">使用Python编写基本测试</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Intermediate/URDF/URDF-Main.html">URDF</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Building-a-Visual-Robot-Model-with-URDF-from-Scratch.html">从头开始构建一个可视化的机器人模型</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Building-a-Movable-Robot-Model-with-URDF.html">构建一个可移动的机器人模型。</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Adding-Physical-and-Collision-Properties-to-a-URDF-Model.html">添加物理和碰撞属性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Using-Xacro-to-Clean-Up-a-URDF-File.html">使用 Xacro 清理您的代码</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Intermediate/URDF/Using-URDF-with-Robot-State-Publisher.html">使用URDF和``robot_state_publisher``</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Advanced.html">高级</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Topic-Statistics-Tutorial/Topic-Statistics-Tutorial.html">启用主题统计信息（C++）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Discovery-Server/Discovery-Server.html">使用Fast DDS Discovery Server作为发现协议[社区贡献]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Allocator-Template-Tutorial.html">实现自定义内存分配器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/FastDDS-Configuration.html">发挥Fast DDS中间件的潜力 [社区贡献]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-CPP.html">从节点（C++）录制一个包</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Recording-A-Bag-From-Your-Own-Node-Py.html">从节点录制包（Python）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Simulation-Main.html">模拟器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Webots/Simulation-Webots.html">Webots</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Webots/Installation-Ubuntu.html">安装（Ubuntu）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Webots/Installation-Windows.html">安装（Windows）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Webots/Installation-MacOS.html">安装（macOS）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Basic.html">设置机器人仿真（基础）</a></li>
<li class="toctree-l5"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Webots/Setting-Up-Simulation-Webots-Advanced.html">设置机器人模拟（高级）</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Gazebo/Simulation-Gazebo.html">Gazebo</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../Tutorials/Advanced/Simulators/Gazebo/Gazebo.html">设置机器人仿真（Gazebo）。</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Advanced/Security/Security-Main.html">安全性</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Introducing-ros2-security.html">设置安全性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/The-Keystore.html">理解安全密钥库</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Security-on-Two.html">确保跨机器的安全性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Examine-Traffic.html">检查网络流量</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Access-Controls.html">设置访问控制</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Tutorials/Advanced/Security/Deployment-Guidelines.html">部署指南</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Demos.html">演示</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Quality-of-Service.html">在不稳定网络中使用服务质量设置</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Managed-Nodes.html">使用受控生命周期管理节点</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Intra-Process-Communication.html">设置高效的进程内通信</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Rosbag-with-ROS1-Bridge.html">使用ROS 1桥接在`rosbag`中记录和回放数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Real-Time-Programming.html">理解实时编程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/dummy-robot-demo.html">尝试使用虚拟机器人进行实验</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Logging-and-logger-configuration.html">记录日志</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Demos/Content-Filtering-Subscription.html">创建内容过滤订阅</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorials/Miscellaneous.html">杂项</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Deploying-ROS-2-on-IBM-Cloud.html">在 IBM Cloud Kubernetes 上部署 [社区贡献]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Eclipse-Oxygen-with-ROS-2-and-rviz2.html">使用 <code class="docutils literal notranslate"><span class="pre">rviz2</span></code> 的 Eclipse Oxygen [社区贡献]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Building-Realtime-rt_preempt-kernel-for-ROS-2.html">构建实时Linux内核[社区贡献]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Tutorials/Miscellaneous/Building-ROS2-Package-with-eclipse-2021-06.html">使用Eclipse 2021-06构建软件包</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../How-To-Guides.html">如何指南</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Installation-Troubleshooting.html">安装故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Developing-a-ROS-2-Package.html">开发ROS 2软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Ament-CMake-Documentation.html">ament_cmake 用户文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Ament-CMake-Python-Documentation.html">ament_cmake_python 用户文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Launch-files-migration-guide.html">将启动文件从ROS 1迁移到ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Launch-file-different-formats.html">使用 Python、XML 和 YAML 编写 ROS 2 启动文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Launching-composable-nodes.html">使用ROS 2 launch启动可组合节点</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Parameters-YAML-files-migration-guide.html">将YAML参数文件从ROS 1迁移到ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Node-arguments.html">通过命令行向节点传递ROS参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Sync-Vs-Async.html">同步与异步服务客户端</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/DDS-tuning.html">DDS调优信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Overriding-QoS-Policies-For-Recording-And-Playback.html">rosbag2：覆盖 QoS 策略</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Working-with-multiple-RMW-implementations.html">使用多个ROS 2中间件实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Cross-compilation.html">交叉编译</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Releasing/Releasing-a-Package.html">发布软件包</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../How-To-Guides/Releasing/First-Time-Release.html">首次发布</a></li>
<li class="toctree-l3"><a class="reference internal" href="../How-To-Guides/Releasing/Subsequent-Releases.html">后续发布</a></li>
<li class="toctree-l3"><a class="reference internal" href="../How-To-Guides/Releasing/Release-Team-Repository.html">发布团队/仓库</a></li>
<li class="toctree-l3"><a class="reference internal" href="../How-To-Guides/Releasing/Release-Track.html">发布跟踪</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Using-Python-Packages.html">在ROS 2中使用Python包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/RQt-Port-Plugin-Windows.html">将RQt插件移植到Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers.html">在 Docker 中运行 ROS 2 节点[社区贡献]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Visualizing-ROS-2-Data-With-Foxglove-Studio.html">使用Foxglove Studio可视化ROS 2数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Package-maintainer-guide.html">ROS 2软件包维护人员指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Building-a-Custom-Debian-Package.html">构建自定义的Debian软件包</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Building-ROS-2-with-Tracing-Instrumentation.html">使用跟踪工具构建ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Topics-Services-Actions.html">主题 vs 服务 vs 动作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Using-Variants.html">使用变体</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Using-ros2-param.html">使用``ros2 param``命令行工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Using-ros1_bridge-Jammy-upstream.html">在Ubuntu 22.04上使用``ros1_bridge``和上游ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Disabling-ZeroCopy-loaned-messages.html">禁用零拷贝借用消息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Installing-on-Raspberry-Pi.html">在 Raspberry Pi 上的 ROS 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Using-callback-groups.html">使用回调组</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/Setup-ROS-2-with-VSCode-and-Docker-Container.html">使用VSCode和Docker设置ROS 2 [社区贡献]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../How-To-Guides/RQt-Source-Install.html">从源代码构建 RQt</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../How-To-Guides/RQt-Source-Install-MacOS.html">在 macOS 上从源代码构建 RQt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../How-To-Guides/RQt-Source-Install-Windows10.html">在 Windows 10 上从源代码构建 RQt</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Concepts.html">概念</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Domain-ID.html">ROS_DOMAIN_ID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Different-Middleware-Vendors.html">关于不同的ROS 2 DDS/RTPS供应商</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Logging.html">关于日志记录和日志记录器配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Quality-of-Service-Settings.html">关于服务质量设置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Client-Libraries.html">关于ROS 2客户端库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-Interfaces.html">关于 ROS 2 接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Parameters.html">关于 ROS 2 中的参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Executors.html">执行器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Topic-Statistics.html">关于主题统计</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Command-Line-Tools.html">使用命令行工具进行内省</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-RQt.html">RQt 的概述和使用方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Composition.html">关于组合</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Catment.html">关于 ament 和 catkin 的混合 (catment)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Cross-Compilation.html">关于交叉编译</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Security.html">关于ROS 2安全性</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Tf2.html">关于tf2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Build-System.html">关于构建系统</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Internal-Interfaces.html">关于内部ROS 2接口&quot;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-Middleware-Implementations.html">关于ROS 2中间件实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Concepts/About-ROS-2-Client-Libraries.html">关于ROS 2客户端库</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Contact.html">联系</a></li>
<li class="toctree-l1"><a class="reference internal" href="../The-ROS2-Project.html">ROS 2 项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Contributing.html">贡献</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Developer-Guide.html">ROS 2开发者指南</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Code-Style-Language-Versions.html">代码风格和语言版本</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Quality-Guide.html">质量指南：确保代码质量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Migration-Guide.html">从ROS 1迁移指南</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../The-ROS2-Project/Contributing/Migration-Guide-Python.html">ROS 1的Python迁移指南</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Build-Farms.html">ROS构建农场</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Windows-Tips-and-Tricks.html">Windows提示和技巧</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Contributing/Contributing-To-ROS-2-Documentation.html">为ROS 2文档做出贡献</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Features.html">功能状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Feature-Ideas.html">功能点子</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Roadmap.html">路线图</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/ROSCon-Content.html">ROSCon 演讲</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Governance.html">项目治理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Governance/ROS2-TSC-Charter.html">ROS 2 技术指导委员会章程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Governance/ROS2-TSC-Intake-process.html">ROS 2 TSC申请者招募流程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The-ROS2-Project/Governance/How-To-Start-A-Community-Working-Group.html">如何启动社区工作组</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../The-ROS2-Project/Marketing.html">营销</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../API-Docs.html">API文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Related-Projects.html">相关项目</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Related-Projects/Intel-ROS2-Projects.html">Intel ROS 2 项目</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Related-Projects/Nvidia-ROS2-Projects.html">NVIDIA ROS 2项目</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Citations.html">引用</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS 2 Documentation: Humble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../Releases.html">分发版本</a> &raquo;</li>
          <li><a href="End-of-Life.html">终止生命周期的发行版</a> &raquo;</li>
      <li>Dashing Diademata（<code class="docutils literal notranslate"><span class="pre">dashing</span></code>）</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ros2/ros2_documentation/blob/humble/source/Releases/Release-Dashing-Diademata.rst" class="fa fa-github"> 在 GitHub 上修改</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             


  <div class="section" id="dashing-diademata-dashing">
<h1>Dashing Diademata（<code class="docutils literal notranslate"><span class="pre">dashing</span></code>）<a class="headerlink" href="#dashing-diademata-dashing" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#supported-platforms" id="id4">支持的平台</a></p></li>
<li><p><a class="reference internal" href="#installation" id="id5">安装</a></p></li>
<li><p><a class="reference internal" href="#new-features-in-this-ros-2-release" id="id6">这个ROS 2版本的新功能有：</a></p></li>
<li><p><a class="reference internal" href="#changes-since-the-crystal-release" id="id7">自Crystal版本发布以来的变化。</a></p>
<ul>
<li><p><a class="reference internal" href="#declaring-parameters" id="id8">声明参数</a></p></li>
<li><p><a class="reference internal" href="#ament-cmake" id="id9">ament_cmake</a></p></li>
<li><p><a class="reference internal" href="#rclcpp" id="id10">rclcpp</a></p></li>
<li><p><a class="reference internal" href="#rclcpp-components" id="id11">rclcpp_components</a></p></li>
<li><p><a class="reference internal" href="#rclpy" id="id12">rclpy</a></p></li>
<li><p><a class="reference internal" href="#rosidl" id="id13">rosidl</a></p></li>
<li><p><a class="reference internal" href="#rosidl-generator-cpp" id="id14">rosidl_generator_cpp</a></p></li>
<li><p><a class="reference internal" href="#rosidl-generator-py" id="id15">rosidl_generator_py</a></p></li>
<li><p><a class="reference internal" href="#launch" id="id16">启动</a></p></li>
<li><p><a class="reference internal" href="#rmw" id="id17">rmw</a></p></li>
<li><p><a class="reference internal" href="#actions" id="id18">actions</a></p></li>
<li><p><a class="reference internal" href="#rviz" id="id19">rviz</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#known-issues" id="id20">已知问题</a></p></li>
<li><p><a class="reference internal" href="#timeline-before-the-release" id="id21">Timeline before the release</a></p></li>
</ul>
</div>
<p><em>Dashing Diademata</em> 是ROS 2的第四个版本。</p>
<div class="section" id="supported-platforms">
<h2><a class="toc-backref" href="#id4">支持的平台</a><a class="headerlink" href="#supported-platforms" title="永久链接至标题"></a></h2>
<p>Dashing Diademata主要支持以下平台：</p>
<p>一级平台：</p>
<ul class="simple">
<li><p>Ubuntu 18.04（Bionic）：<code class="docutils literal notranslate"><span class="pre">amd64``和``arm64</span></code></p></li>
<li><p>Mac macOS 10.12 (Sierra)</p></li>
<li><p>Windows 10（Visual Studio 2019）</p></li>
</ul>
<p>二级平台：</p>
<ul class="simple">
<li><p>Ubuntu 18.04（Bionic）：<code class="docutils literal notranslate"><span class="pre">arm32</span></code></p></li>
</ul>
<p>Tier 3 平台：</p>
<ul class="simple">
<li><p>Debian Stretch（9）：<code class="docutils literal notranslate"><span class="pre">amd64</span></code>、<code class="docutils literal notranslate"><span class="pre">arm64</span></code> 和 <code class="docutils literal notranslate"><span class="pre">arm32</span></code></p></li>
<li><p>OpenEmbedded Thud（2.6）/ webOS OSE：<code class="docutils literal notranslate"><span class="pre">arm32</span></code> 和 <code class="docutils literal notranslate"><span class="pre">x86</span></code></p></li>
</ul>
<p>有关RMW实现、编译器/解释器版本和系统依赖版本的更多信息，请参阅 <a class="reference external" href="https://www.ros.org/reps/rep-2000.html#dashing-diademata-may-2019-may-2021">REP 2000</a>。</p>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id5">安装</a><a class="headerlink" href="#installation" title="永久链接至标题"></a></h2>
<p><a class="reference external" href="../../dashing/Installation.html">安装Dashing Diademata</a></p>
</div>
<div class="section" id="new-features-in-this-ros-2-release">
<h2><a class="toc-backref" href="#id6">这个ROS 2版本的新功能有：</a><a class="headerlink" href="#new-features-in-this-ros-2-release" title="永久链接至标题"></a></h2>
<p>我们想要强调一些功能和改进：</p>
<ul class="simple">
<li><p>:doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>组件 &lt;../Tutorials/Intermediate/Composition&gt;`现在是编写节点的推荐方式。它们可以独立使用，也可以在进程中进行组合，两种方式都可以完全支持``launch``文件。</p></li>
<li><p>改进了:doc:<a href="#id1"><span class="problematic" id="id2">`</span></a>进程内通信 &lt;../Tutorials/Demos/Intra-Process-Communication&gt;`（仅限C++），无论是延迟还是最小化拷贝方面都有所改善。</p></li>
<li><p>Python客户端库已更新以匹配大部分C++等效库，并且解决了与内存使用和性能相关的一些重要错误和改进。</p></li>
<li><p>参数现在是完全替代ROS 1中``dynamic_reconfigure``的选择，包括范围约束或只读。</p></li>
<li><p>通过依赖（IDL 4.2的一个子集 &lt;<a class="reference external" href="https://www.omg.org/spec/IDL/4.2">https://www.omg.org/spec/IDL/4.2</a>&gt;`__）来进行消息生成流程，现在可以使用 <code class="docutils literal notranslate"><span class="pre">.idl</span></code> 文件（除了 <code class="docutils literal notranslate"><span class="pre">.msg</span></code> / <code class="docutils literal notranslate"><span class="pre">.srv</span></code> / <code class="docutils literal notranslate"><span class="pre">.action</span></code> 文件）。这个变化还支持对普通字符串使用可选的UTF-8编码，以及对UTF-16编码的多字节字符串进行支持（参见 <a class="reference external" href="https://design.ros2.org/articles/wide_strings.html">wide strings design article</a>).</p></li>
<li><p>与 <code class="docutils literal notranslate"><span class="pre">actions</span></code> 和 <code class="docutils literal notranslate"><span class="pre">components</span></code> 相关的命令行工具。</p></li>
<li><p>支持Deadline、Lifespan和Liveliness的服务质量设置。</p></li>
<li><p>MoveIt 2 <a class="reference external" href="https://github.com/AcutronicRobotics/moveit2/releases/tag/moveit_2_alpha">alpha版本发布</a>.</p></li>
</ul>
<p>请查看GitHub上的 <a class="reference external" href="https://github.com/ros2/ros2/issues/607">Dashing元票</a>，其中包含了更多信息以及其他详细票据的参考。</p>
</div>
<div class="section" id="changes-since-the-crystal-release">
<h2><a class="toc-backref" href="#id7">自Crystal版本发布以来的变化。</a><a class="headerlink" href="#changes-since-the-crystal-release" title="永久链接至标题"></a></h2>
<div class="section" id="declaring-parameters">
<h3><a class="toc-backref" href="#id8">声明参数</a><a class="headerlink" href="#declaring-parameters" title="永久链接至标题"></a></h3>
<p>从Dashing开始，参数的行为发生了一些变化，同时还引入了一些新的API和废弃了其他的API。有关API变化的更多信息，请参阅下面的``rclcpp``和``rclpy``部分。</p>
<div class="section" id="getting-and-setting-undeclared-parameters">
<h4>获取和设置未声明的参数<a class="headerlink" href="#getting-and-setting-undeclared-parameters" title="永久链接至标题"></a></h4>
<p>从Dashing开始，访问或设置参数之前需要先声明参数。</p>
<p>在Dashing之前，您可以调用``get_parameter(name)``，如果已经设置了值，您将得到一个值，否则将得到一个类型为``PARAMETER_NOT_SET``的参数。您也可以在任何时候调用``set_parameter(name, value)``，即使参数之前未设置。</p>
<p>自从Dashing版本以后，您需要先声明一个参数，然后才能获取或设置它。如果尝试获取或设置一个未声明的参数，您将会抛出异常，例如ParameterNotDeclaredException，或在某些情况下您将会以各种方式得到一个不成功的结果（请参阅具体函数以了解更多细节）。</p>
<p>然而，您可以通过在创建节点时使用 <code class="docutils literal notranslate"><span class="pre">allow_undeclared_parameters</span></code> 选项来获得旧的行为（大多数情况下，请参阅下一段的注释）。您可能希望暂时这样做，以避免现在进行代码更改，或者以满足一些不常见的用例。例如，&quot;全局参数服务器&quot; 或 &quot;参数黑板&quot; 可能希望允许外部节点在未声明参数的情况下在自身上设置新的参数，因此它可以使用 <code class="docutils literal notranslate"><span class="pre">allow_undeclared_parameters</span></code> 选项来实现该功能。然而，在大多数情况下，不建议使用此选项，因为它会使其他参数 API 对于参数名称拼写错误和 &quot;在设置之前使用&quot; 的逻辑错误等 bug 变得不太安全。</p>
<p>请注意，使用 <code class="docutils literal notranslate"><span class="pre">allow_undeclared_parameters</span></code> 选项将为 &quot;get&quot; 和 &quot;set&quot; 方法提供大部分旧行为，但它不会将与参数相关的所有行为更改恢复到 ROS Crystal 的状态。为此，您还需要将 <code class="docutils literal notranslate"><span class="pre">automatically_declare_parameters_from_overrides</span></code> 选项设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code>，该选项在下面的 <a class="reference internal" href="#parameter-configuration-using-a-yaml-file"><span class="std std-ref">Parameter Configuration using a YAML File</span></a> 中进行了描述。</p>
</div>
<div class="section" id="declaring-a-parameter-with-a-parameterdescriptor">
<h4>使用 ParameterDescriptor 声明参数<a class="headerlink" href="#declaring-a-parameter-with-a-parameterdescriptor" title="永久链接至标题"></a></h4>
<p>在使用参数之前声明参数的另一个好处是可以同时声明参数描述符。</p>
<p>现在，当声明参数时，您可以同时包含自定义的 <code class="docutils literal notranslate"><span class="pre">ParameterDescriptor</span></code>、名称和默认值。<code class="docutils literal notranslate"><span class="pre">ParameterDescriptor</span></code> 在 <code class="docutils literal notranslate"><span class="pre">rcl_interfaces/msg/ParameterDescriptor</span></code> 中定义为一条消息，其中包含诸如 <code class="docutils literal notranslate"><span class="pre">description</span></code> 这样的元数据和诸如 <code class="docutils literal notranslate"><span class="pre">read_only</span></code> 或 <code class="docutils literal notranslate"><span class="pre">integer_range</span></code> 这样的约束。这些约束可用于在设置参数时拒绝无效值，或者作为对外部工具的提示，告知给定参数的有效值是什么。<code class="docutils literal notranslate"><span class="pre">read_only</span></code> 约束将阻止参数在声明后更改其值，并防止其被撤销声明。</p>
<p>供参考，以下链接是撰写本文时的 <code class="docutils literal notranslate"><span class="pre">ParameterDescriptor</span></code> 消息的链接：</p>
<p><a class="reference external" href="https://github.com/ros2/rcl_interfaces/blob/0aba5a142878c2077d7a03977087e7d74d40ee68/rcl_interfaces/msg/ParameterDescriptor.msg#L1">https://github.com/ros2/rcl_interfaces/blob/0aba5a142878c2077d7a03977087e7d74d40ee68/rcl_interfaces/msg/ParameterDescriptor.msg#L1</a></p>
</div>
<div class="section" id="parameter-configuration-using-a-yaml-file">
<span id="id1"></span><h4>使用YAML文件进行参数配置<a class="headerlink" href="#parameter-configuration-using-a-yaml-file" title="永久链接至标题"></a></h4>
<p>从Dashing版本开始，YAML配置文件中的参数（例如通过命令行参数``__params:=``传递给节点）仅用于在声明参数时覆盖参数的默认值。</p>
<p>在Dashing版本之前，通过YAML文件传递的任何参数都会隐式设置在节点上。</p>
<p>从Dashing版本开始，情况已经改变，因为需要声明参数才能在节点外部观察者（如``ros2 param list``）中显示参数。</p>
<p>可以通过在创建节点时使用``automatically_declare_parameters_from_overrides``选项来实现旧的行为。如果将此选项设置为``true``，则在构造节点时会自动声明输入YAML文件中的所有参数。这可以用于避免对现有代码进行重大更改或满足特定的用例。例如，&quot;全局参数服务器&quot;可能希望在启动时使用任意参数进行初始化，而事先无法声明这些参数。然而，大多数情况下，不建议使用此选项，因为它可能导致在YAML文件中设置参数，并假设节点会使用该参数，即使节点实际上并未使用该参数。</p>
<p>未来我们希望拥有一个检查器，如果您向节点传递了它不期望的参数，它将会提醒您。</p>
<p>YAML文件中的参数将继续影响在首次声明时的参数值。</p>
</div>
</div>
<div class="section" id="ament-cmake">
<h3><a class="toc-backref" href="#id9">ament_cmake</a><a class="headerlink" href="#ament-cmake" title="永久链接至标题"></a></h3>
<p>CMake函数``ament_index_has_resource``以前返回``TRUE``或``FALSE``。从`此版本开始 &lt;<a class="reference external" href="https://github.com/ament/ament_cmake/pull/155">https://github.com/ament/ament_cmake/pull/155</a>&gt;`_，如果找到资源，它将返回前缀路径，否则返回``FALSE``。</p>
<p>如果您在CMake条件中使用返回值，像这样：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">ament_index_has_resource</span><span class="p">(</span><span class="s">var</span><span class="w"> </span><span class="s">...</span><span class="p">)</span>
<span class="nb">if</span><span class="p">(</span><span class="o">${</span><span class="nv">var</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>您需要更新条件以确保它将字符串值视为``TRUE``：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">if</span><span class="p">(</span><span class="s">var</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="rclcpp">
<h3><a class="toc-backref" href="#id10">rclcpp</a><a class="headerlink" href="#rclcpp" title="永久链接至标题"></a></h3>
<div class="section" id="behavior-change-for-node-get-node-names">
<h4><a href="#id1"><span class="problematic" id="id2">``</span></a>Node::get_node_names()``的行为变更<a class="headerlink" href="#behavior-change-for-node-get-node-names" title="永久链接至标题"></a></h4>
<p>函数``NodeGraph::get_node_names()``，以及因此也是``Node::get_node_names()``，现在返回一个包含完全限定的节点名称（包括命名空间）的``std::vector&lt;std::string&gt;``，而不仅仅是节点名称。</p>
</div>
<div class="section" id="changed-the-way-that-options-are-passed-to-nodes">
<h4>更改了传递选项给节点的方式<a class="headerlink" href="#changed-the-way-that-options-are-passed-to-nodes" title="永久链接至标题"></a></h4>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>rclcpp::Node()``构造函数的扩展参数（除了名称和命名空间）已被替换为``rclcpp::NodeOptions``结构。有关该结构和选项的默认值的详细信息，请参阅`ros2/rclcpp#622 &lt;<a class="reference external" href="https://github.com/ros2/rclcpp/pull/622/files">https://github.com/ros2/rclcpp/pull/622/files</a>&gt;`__。</p>
<p>如果您正在使用类似以下方式的``rclcpp::Node()``的扩展参数：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">contexts</span><span class="o">::</span><span class="n">default_context</span><span class="o">::</span><span class="n">get_global_default_context</span><span class="p">();</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">args</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="p">(</span><span class="s">&quot;use_sim_time&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;foo_node&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bar_namespace&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>您需要更新为使用``NodeOptions``结构。</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">args</span><span class="p">;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="p">(</span><span class="s">&quot;use_sim_time&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">NodeOptions</span><span class="w"> </span><span class="n">node_options</span><span class="p">;</span><span class="w"></span>
<span class="n">node_options</span><span class="p">.</span><span class="n">arguments</span><span class="p">(</span><span class="n">args</span><span class="p">);</span><span class="w"></span>
<span class="n">node_options</span><span class="p">.</span><span class="n">parameter_overrides</span><span class="p">(</span><span class="n">params</span><span class="p">);</span><span class="w"></span>
<span class="k">auto</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;foo_node&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bar_namespace&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">node_options</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="changes-to-creating-publishers-and-subscriptions">
<h4>创建发布者和订阅者的变化<a class="headerlink" href="#changes-to-creating-publishers-and-subscriptions" title="永久链接至标题"></a></h4>
<p>在Dashing版本中，创建发布者和订阅者方面有一些变化：</p>
<ul class="simple">
<li><p>现在使用新的``rclcpp::QoS``类来传递QoS设置，并且API鼓励用户至少指定历史深度。</p></li>
<li><p>选项现在作为对象传递，即``rclcpp::PublisherOptions``和``rclcpp::SubscriptionOptions``。</p></li>
</ul>
<p>所有的变化都向后兼容（无需更改代码），但是一些旧的调用方式已被弃用。建议用户更新为新的签名。</p>
<hr class="docutils" />
<p>在过去，创建发布者或订阅者时，可以不指定任何QoS设置（例如，对于发布者，只需提供主题名称），或者可以指定已设置了所有设置的“qos profile”数据结构（类型为``rmw_qos_profile_t``）。现在，您必须使用新的``rclcpp::QoS``对象来指定您的QoS，至少要为您的QoS指定历史设置。这鼓励用户在使用``KEEP_LAST``时指定历史深度，而不是将其默认为可能不合适的值。</p>
<p>在ROS 1中，这被称为``queue_size``，在C++和Python中都是必需的。我们正在更改ROS 2 API以恢复此要求。</p>
<hr class="docutils" />
<p>此外，以前可以在创建发布者或订阅时传递的任何选项现在已封装在``rclcpp::PublisherOptions``和``rclcpp::SubscriptionOptions``类中。这使得签名更短，使用更方便，并且可以在不破坏API的情况下添加新的未来选项。</p>
<hr class="docutils" />
<p>一些创建发布者和订阅者的签名现在已经过时，并添加了新的签名，以允许您使用新的``rclcpp::QoS``和发布者/订阅者选项类。</p>
<p>这些是新的推荐API：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">MessageT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">AllocatorT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">PublisherT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Publisher</span><span class="o">&lt;</span><span class="n">MessageT</span><span class="p">,</span><span class="w"> </span><span class="n">AllocatorT</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">PublisherT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">create_publisher</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">topic_name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">QoS</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">qos</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">PublisherOptionsWithAllocator</span><span class="o">&lt;</span><span class="n">AllocatorT</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">  </span><span class="n">PublisherOptionsWithAllocator</span><span class="o">&lt;</span><span class="n">AllocatorT</span><span class="o">&gt;</span><span class="p">()</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">MessageT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">CallbackT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">AllocatorT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">SubscriptionT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Subscription</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">subscription_traits</span><span class="o">::</span><span class="n">has_message_type</span><span class="o">&lt;</span><span class="n">CallbackT</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">AllocatorT</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">SubscriptionT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">create_subscription</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">topic_name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">QoS</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">qos</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">CallbackT</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">SubscriptionOptionsWithAllocator</span><span class="o">&lt;</span><span class="n">AllocatorT</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">  </span><span class="n">SubscriptionOptionsWithAllocator</span><span class="o">&lt;</span><span class="n">AllocatorT</span><span class="o">&gt;</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">message_memory_strategy</span><span class="o">::</span><span class="n">MessageMemoryStrategy</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">subscription_traits</span><span class="o">::</span><span class="n">has_message_type</span><span class="o">&lt;</span><span class="n">CallbackT</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">AllocatorT</span><span class="w"></span>
<span class="w">  </span><span class="o">&gt;::</span><span class="n">SharedPtr</span><span class="w"></span>
<span class="w">  </span><span class="n">msg_mem_strat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>这些是已过时的API：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">MessageT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">AllocatorT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">PublisherT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Publisher</span><span class="o">&lt;</span><span class="n">MessageT</span><span class="p">,</span><span class="w"> </span><span class="n">AllocatorT</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="s">&quot;use create_publisher(const std::string &amp;, const rclcpp::QoS &amp;, ...) instead&quot;</span><span class="p">)]]</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">PublisherT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">create_publisher</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">topic_name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="kt">size_t</span><span class="w"> </span><span class="n">qos_history_depth</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">AllocatorT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">allocator</span><span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">MessageT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">AllocatorT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">PublisherT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Publisher</span><span class="o">&lt;</span><span class="n">MessageT</span><span class="p">,</span><span class="w"> </span><span class="n">AllocatorT</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="s">&quot;use create_publisher(const std::string &amp;, const rclcpp::QoS &amp;, ...) instead&quot;</span><span class="p">)]]</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">PublisherT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">create_publisher</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">topic_name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">rmw_qos_profile_t</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">qos_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rmw_qos_profile_default</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">AllocatorT</span><span class="o">&gt;</span><span class="w"> </span><span class="n">allocator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">MessageT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">CallbackT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">Alloc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">SubscriptionT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Subscription</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">subscription_traits</span><span class="o">::</span><span class="n">has_message_type</span><span class="o">&lt;</span><span class="n">CallbackT</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">Alloc</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;use create_subscription(const std::string &amp;, const rclcpp::QoS &amp;, CallbackT, ...) instead&quot;</span><span class="w"></span>
<span class="p">)]]</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">SubscriptionT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">create_subscription</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">topic_name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">CallbackT</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">rmw_qos_profile_t</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">qos_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rmw_qos_profile_default</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">callback_group</span><span class="o">::</span><span class="n">CallbackGroup</span><span class="o">::</span><span class="n">SharedPtr</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">ignore_local_publications</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">message_memory_strategy</span><span class="o">::</span><span class="n">MessageMemoryStrategy</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">subscription_traits</span><span class="o">::</span><span class="n">has_message_type</span><span class="o">&lt;</span><span class="n">CallbackT</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">Alloc</span><span class="o">&gt;::</span><span class="n">SharedPtr</span><span class="w"></span>
<span class="w">  </span><span class="n">msg_mem_strat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Alloc</span><span class="o">&gt;</span><span class="w"> </span><span class="n">allocator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">MessageT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">CallbackT</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">Alloc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">SubscriptionT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Subscription</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">subscription_traits</span><span class="o">::</span><span class="n">has_message_type</span><span class="o">&lt;</span><span class="n">CallbackT</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">Alloc</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;use create_subscription(const std::string &amp;, const rclcpp::QoS &amp;, CallbackT, ...) instead&quot;</span><span class="w"></span>
<span class="p">)]]</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">SubscriptionT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">create_subscription</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">topic_name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">CallbackT</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="kt">size_t</span><span class="w"> </span><span class="n">qos_history_depth</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">callback_group</span><span class="o">::</span><span class="n">CallbackGroup</span><span class="o">::</span><span class="n">SharedPtr</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">ignore_local_publications</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">message_memory_strategy</span><span class="o">::</span><span class="n">MessageMemoryStrategy</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="k">typename</span><span class="w"> </span><span class="nc">rclcpp</span><span class="o">::</span><span class="n">subscription_traits</span><span class="o">::</span><span class="n">has_message_type</span><span class="o">&lt;</span><span class="n">CallbackT</span><span class="o">&gt;::</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">Alloc</span><span class="o">&gt;::</span><span class="n">SharedPtr</span><span class="w"></span>
<span class="w">  </span><span class="n">msg_mem_strat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Alloc</span><span class="o">&gt;</span><span class="w"> </span><span class="n">allocator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<hr class="docutils" />
<p>传递QoS的更改最有可能影响用户。</p>
<p>A typical change for a publisher looks like this:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- pub_ = create_publisher&lt;std_msgs::msg::String&gt;(&quot;chatter&quot;);</span><span class="w"></span>
<span class="gi">+ pub_ = create_publisher&lt;std_msgs::msg::String&gt;(&quot;chatter&quot;, 10);</span><span class="w"></span>
</pre></div>
</div>
<p>And for a subscription:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- sub_ = create_subscription&lt;std_msgs::msg::String&gt;(&quot;chatter&quot;, callback);</span><span class="w"></span>
<span class="gi">+ sub_ = create_subscription&lt;std_msgs::msg::String&gt;(&quot;chatter&quot;, 10, callback);</span><span class="w"></span>
</pre></div>
</div>
<p>If you have no idea what depth to use and don't care right now (maybe just prototyping), then we recommend using <code class="docutils literal notranslate"><span class="pre">10</span></code>, as that was the default before and should preserve existing behavior.</p>
<p>More in depth documentation about how to select an appropriate depth is forthcoming.</p>
<p>This is an example of a slightly more involved change to avoid the newly deprecated API's:</p>
<div class="highlight-diff notranslate"><div class="highlight"><pre><span></span><span class="gd">- // Creates a latched topic</span><span class="w"></span>
<span class="gd">- rmw_qos_profile_t qos = rmw_qos_profile_default;</span><span class="w"></span>
<span class="gd">- qos.depth = 1;</span><span class="w"></span>
<span class="gd">- qos.durability = RMW_QOS_POLICY_DURABILITY_TRANSIENT_LOCAL;</span><span class="w"></span>
<span class="gd">-</span><span class="w"></span>
<span class="w"> </span> model_xml_.data = model_xml;<span class="w"></span>
<span class="w"> </span> node_handle-&gt;declare_parameter(&quot;robot_description&quot;, model_xml);<span class="w"></span>
<span class="w"> </span> description_pub_ = node_handle-&gt;create_publisher&lt;std_msgs::msg::String&gt;(<span class="w"></span>
<span class="gd">-   &quot;robot_description&quot;, qos);</span><span class="w"></span>
<span class="gi">+   &quot;robot_description&quot;,</span><span class="w"></span>
<span class="gi">+   // Transient local is similar to latching in ROS 1.</span><span class="w"></span>
<span class="gi">+   rclcpp::QoS(1).transient_local());</span><span class="w"></span>
</pre></div>
</div>
<p>See the pull request (and connected pull requests) that introduced the QoS change for more examples and details:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/pull/713">https://github.com/ros2/rclcpp/pull/713</a></p>
<ul>
<li><p><a class="reference external" href="https://github.com/ros2/demos/pull/332">https://github.com/ros2/demos/pull/332</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/robot_state_publisher/pull/19">https://github.com/ros2/robot_state_publisher/pull/19</a></p></li>
<li><p>and others...</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="changes-due-to-declare-parameter-change">
<h4>Changes Due to Declare Parameter Change<a class="headerlink" href="#changes-due-to-declare-parameter-change" title="永久链接至标题"></a></h4>
<p>For details about the actual behavior change, see <a class="reference internal" href="#declaring-parameters">Declaring Parameters</a> above.</p>
<p>There are several new API calls in the <code class="docutils literal notranslate"><span class="pre">rclcpp::Node</span></code>'s interface:</p>
<ul>
<li><p>Methods that declare parameters given a name, optional default value, optional descriptor, and return the value actually set:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterValue</span><span class="w"> </span><span class="o">&amp;</span><span class="w"></span>
<span class="nf">rclcpp::Node::declare_parameter</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterValue</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">default_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">ParameterValue</span><span class="p">(),</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">parameter_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">  </span><span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span><span class="p">());</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="k">auto</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">declare_parameter</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">ParameterT</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">default_value</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">parameter_descriptor</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">  </span><span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span><span class="p">());</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">declare_parameters</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">namespace_</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">ParameterT</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">parameters</span><span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">declare_parameters</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">namespace_</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">ParameterT</span><span class="p">,</span><span class="w"> </span><span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">  </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">parameters</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>A method to undeclare parameters and to check if a parameter has been declared:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"></span>
<span class="nf">rclcpp::Node::undeclare_parameter</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>

<span class="kt">bool</span><span class="w"></span>
<span class="nf">rclcpp::Node::has_parameter</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>Some convenience methods that did not previously exist:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">SetParametersResult</span><span class="w"></span>
<span class="nf">rclcpp::Node::set_parameter</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">parameter</span><span class="p">);</span><span class="w"></span>

<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Parameter</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">get_parameters</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">names</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="n">rcl_interfaces</span><span class="o">::</span><span class="n">msg</span><span class="o">::</span><span class="n">ParameterDescriptor</span><span class="w"></span>
<span class="nf">rclcpp::Node::describe_parameter</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p>A new method to set the callback which is called anytime a parameter will be changed, giving you the opportunity to reject it:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">OnParametersSetCallbackType</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">  </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">node_interfaces</span><span class="o">::</span><span class="n">NodeParametersInterface</span><span class="o">::</span><span class="n">OnParametersSetCallbackType</span><span class="p">;</span><span class="w"></span>

<span class="n">OnParametersSetCallbackType</span><span class="w"></span>
<span class="nf">rclcpp::Node::set_on_parameters_set_callback</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="n">OnParametersSetCallbackType</span><span class="w"> </span><span class="n">callback</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</li>
</ul>
<p>There were also several deprecated methods:</p>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="s">&quot;use declare_parameter() instead&quot;</span><span class="p">)]]</span><span class="w"></span>
<span class="kt">void</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">set_parameter_if_not_set</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">ParameterT</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="s">&quot;use declare_parameters() instead&quot;</span><span class="p">)]]</span><span class="w"></span>
<span class="kt">void</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">set_parameters_if_not_set</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">ParameterT</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">values</span><span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">ParameterT</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="s">&quot;use declare_parameter() and it&#39;s return value instead&quot;</span><span class="p">)]]</span><span class="w"></span>
<span class="kt">void</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">get_parameter_or_set</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">ParameterT</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">ParameterT</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">alternative_value</span><span class="p">);</span><span class="w"></span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">CallbackT</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">[[</span><span class="n">deprecated</span><span class="p">(</span><span class="s">&quot;use set_on_parameters_set_callback() instead&quot;</span><span class="p">)]]</span><span class="w"></span>
<span class="kt">void</span><span class="w"></span>
<span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="o">::</span><span class="n">register_param_change_callback</span><span class="p">(</span><span class="n">CallbackT</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">callback</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="memory-strategy">
<h4>Memory Strategy<a class="headerlink" href="#memory-strategy" title="永久链接至标题"></a></h4>
<p>The interface <code class="docutils literal notranslate"><span class="pre">rclcpp::memory_strategy::MemoryStrategy</span></code> was using the typedef <code class="docutils literal notranslate"><span class="pre">WeakNodeVector</span></code> in various method signatures.
As of Dashing the typedef has been been changed to <code class="docutils literal notranslate"><span class="pre">WeakNodeList</span></code> and with it the type of the parameter in various methods.
Any custom memory strategy needs to be updated to match the modified interface.</p>
<p>The relevant API change can be found in <a class="reference external" href="https://github.com/ros2/rclcpp/pull/741">ros2/rclcpp#741</a>.</p>
</div>
</div>
<div class="section" id="rclcpp-components">
<h3><a class="toc-backref" href="#id11">rclcpp_components</a><a class="headerlink" href="#rclcpp-components" title="永久链接至标题"></a></h3>
<p>The correct way to implement composition in Dashing is by utilizing the <code class="docutils literal notranslate"><span class="pre">rclcpp_components</span></code> package.</p>
<p>The following changes must be made to nodes in order to correctly implement runtime composition:</p>
<p>The Node must have a constructor that takes <code class="docutils literal notranslate"><span class="pre">rclcpp::NodeOptions</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Listener</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">Node</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">Listener</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">rclcpp</span><span class="o">::</span><span class="n">NodeOptions</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">options</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="s">&quot;listener&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>C++ registration macros (if present) need to be updated to use the <code class="docutils literal notranslate"><span class="pre">rclcpp_components</span></code> equivalent.
If not present, registration macros must be added in one translation unit.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Insert at bottom of translation unit, e.g. listener.cpp</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;rclcpp_components/register_node_macro.hpp&quot;</span><span class="cp"></span>
<span class="c1">// Use fully-qualifed name in registration</span>
<span class="n">RCLCPP_COMPONENTS_REGISTER_NODE</span><span class="p">(</span><span class="n">composition</span><span class="o">::</span><span class="n">Listener</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>CMake registration macros (if present) need to be updated.
If not present, registration macros must be added to the project's CMake.</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">add_library</span><span class="p">(</span><span class="s">listener</span><span class="w"> </span><span class="s">src/listener.cpp</span><span class="p">)</span>
<span class="nb">rclcpp_components_register_nodes</span><span class="p">(</span><span class="s">listener</span><span class="w"> </span><span class="s2">&quot;composition::Listener&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information on composition, see <a class="reference external" href="https://index.ros.org/doc/ros2/Tutorials/Composition/">the tutorial</a></p>
</div>
<div class="section" id="rclpy">
<h3><a class="toc-backref" href="#id12">rclpy</a><a class="headerlink" href="#rclpy" title="永久链接至标题"></a></h3>
<div class="section" id="changes-to-creating-publishers-subscriptions-and-qos-profiles">
<h4>Changes to Creating Publishers, Subscriptions, and QoS Profiles<a class="headerlink" href="#changes-to-creating-publishers-subscriptions-and-qos-profiles" title="永久链接至标题"></a></h4>
<p>Prior to Dashing, you could optionally provide a <code class="docutils literal notranslate"><span class="pre">QoSProfile</span></code> object when creating a publisher or subscription.
In an effort to encourage users to specify a history depth for message queues, we now <strong>require</strong> that a depth value or <code class="docutils literal notranslate"><span class="pre">QoSProfile</span></code> object is given when creating publishers or subscriptions.</p>
<p>To create a publisher, previously you would have written:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Empty</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">)</span>
<span class="c1"># Or using a keyword argument for QoSProfile</span>
<span class="n">node</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Empty</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="n">qos_profile</span><span class="o">=</span><span class="n">qos_profile_sensor_data</span><span class="p">)</span>
</pre></div>
</div>
<p>In Dashing, prefer the following API that provides a depth value or <code class="docutils literal notranslate"><span class="pre">QoSProfile</span></code> object as a third positional argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assume a history setting of KEEP_LAST with depth 10</span>
<span class="n">node</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Empty</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="c1"># Or pass a QoSProfile object directly</span>
<span class="n">node</span><span class="o">.</span><span class="n">create_publisher</span><span class="p">(</span><span class="n">Empty</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="n">qos_profile_sensor_data</span><span class="p">)</span>
</pre></div>
</div>
<p>Likewise for subscriptions, previously you would have written:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">BasicTypes</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span>
<span class="c1"># Or using a keyword argument for QoSProfile</span>
<span class="n">node</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">BasicTypes</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span> <span class="n">qos_profile</span><span class="o">=</span><span class="n">qos_profile_sensor_data</span><span class="p">)</span>
</pre></div>
</div>
<p>In Dashing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assume a history setting of KEEP_LAST with depth 10</span>
<span class="n">node</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">BasicTypes</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="c1"># Or pass a QoSProfile object directly</span>
<span class="n">node</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">BasicTypes</span><span class="p">,</span> <span class="s1">&#39;chatter&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">),</span> <span class="n">qos_profile_sensor_data</span><span class="p">)</span>
</pre></div>
</div>
<p>To ease the transition, users who do not use the new API will see deprecation warnings.</p>
<p>Furthermore, we also require that when constructing <code class="docutils literal notranslate"><span class="pre">QoSProfile</span></code> objects that a history policy and/or depth is set.
If a history policy of <code class="docutils literal notranslate"><span class="pre">KEEP_LAST</span></code> is provided, then a depth argument is also required.
For example, these calls are valid:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">QoSProfile</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="n">QoSHistoryPolicy</span><span class="o">.</span><span class="n">RMW_QOS_POLICY_HISTORY_KEEP_ALL</span><span class="p">)</span>
<span class="n">QoSProfile</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="n">QoSHistoryPolicy</span><span class="o">.</span><span class="n">RMW_QOS_POLICY_HISTORY_KEEP_LAST</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">QoSProfile</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># equivalent to the previous line</span>
</pre></div>
</div>
<p>And these calls will cause a deprecation warning:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">QoSProfile</span><span class="p">()</span>
<span class="n">QoSProfile</span><span class="p">(</span><span class="n">reliability</span><span class="o">=</span><span class="n">QoSReliabilityPolicy</span><span class="o">.</span><span class="n">RMW_QOS_POLICY_RELIABILITY_BEST_EFFORT</span><span class="p">)</span>
<span class="c1"># KEEP_LAST but no depth</span>
<span class="n">QoSProfile</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="n">QoSHistoryPolicy</span><span class="o">.</span><span class="n">RMW_QOS_POLICY_HISTORY_KEEP_LAST</span><span class="p">)</span>
</pre></div>
</div>
<p>See the issue and pull request related to introducing this change for more details:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rclpy/issues/342">https://github.com/ros2/rclpy/issues/342</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclpy/pull/344">https://github.com/ros2/rclpy/pull/344</a></p></li>
</ul>
</div>
<div class="section" id="id2">
<h4>Changes Due to Declare Parameter Change<a class="headerlink" href="#id2" title="永久链接至标题"></a></h4>
<p>For details about the actual behavior change, see <a class="reference internal" href="#declaring-parameters">Declaring Parameters</a> above. The changes are analogous to the ones in <code class="docutils literal notranslate"><span class="pre">rclcpp</span></code>.</p>
<p>These are the new API methods available in <code class="docutils literal notranslate"><span class="pre">rclpy.node.Node</span></code> interface:</p>
<ul>
<li><p>To declare parameters given a name, an optional default value (supported by <code class="docutils literal notranslate"><span class="pre">rcl_interfaces.msg.ParameterValue</span></code>) and an optional descriptor, returning the value actually set:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">declare_parameter</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">descriptor</span><span class="p">:</span> <span class="n">ParameterDescriptor</span> <span class="o">=</span> <span class="n">ParameterDescriptor</span><span class="p">()</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Parameter</span>

<span class="k">def</span> <span class="nf">declare_parameters</span><span class="p">(</span>
  <span class="n">namespace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
  <span class="n">parameters</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span>
      <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
      <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
      <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">ParameterDescriptor</span><span class="p">],</span>
  <span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>To undeclare previously declared parameters and to check if a parameter has been declared beforehand:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">undeclare_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">has_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</pre></div>
</div>
</li>
<li><p>To get and set parameter descriptors:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">describe_parameter</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ParameterDescriptor</span>

<span class="k">def</span> <span class="nf">describe_parameters</span><span class="p">(</span><span class="n">names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ParameterDescriptor</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">set_descriptor</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">descriptor</span><span class="p">:</span> <span class="n">ParameterDescriptor</span><span class="p">,</span>
    <span class="n">alternative_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ParameterValue</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ParameterValue</span>
</pre></div>
</div>
</li>
<li><p>A convenience method to get parameters that may not have been declared:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_parameter_or</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">alternative_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Parameter</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="other-changes">
<h4>Other changes<a class="headerlink" href="#other-changes" title="永久链接至标题"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">rclpy.parameter.Parameter</span></code> can now guess its type without explicitly setting it (as long as it's one of the supported ones by <code class="docutils literal notranslate"><span class="pre">rcl_interfaces.msg.ParameterValue</span></code>).
For example, this code:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s1">&#39;myparam&#39;</span><span class="p">,</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">DOUBLE</span><span class="p">,</span> <span class="mf">2.41</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Is equivalent to this code:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Parameter</span><span class="p">(</span><span class="s1">&#39;myparam&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">2.41</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>This change does not break existing API.</p>
</div>
</div>
<div class="section" id="rosidl">
<h3><a class="toc-backref" href="#id13">rosidl</a><a class="headerlink" href="#rosidl" title="永久链接至标题"></a></h3>
<p>Until Crystal each message generator package registered itself using the <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code> extension point <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces</span></code> and was passed a set of <code class="docutils literal notranslate"><span class="pre">.msg</span></code> / <code class="docutils literal notranslate"><span class="pre">.srv</span></code> / <code class="docutils literal notranslate"><span class="pre">.action</span></code> files.
As of Dashing the message generation pipeline is based on <code class="docutils literal notranslate"><span class="pre">.idl</span></code> files instead.</p>
<p>Any message generator package needs to change and register itself using the new extension point <code class="docutils literal notranslate"><span class="pre">rosidl_generate_idl_interfaces</span></code> which passes only <code class="docutils literal notranslate"><span class="pre">.idl</span></code> files instead.
The message generators for the commonly supported languages C, C++, and Python as well as the typesupport packages for introspection, Fast RTPS, Connext and OpenSplice have already been updated (see <a class="reference external" href="https://github.com/ros2/rosidl/pull/334/files">ros2/rosidl#334</a>).
The CMake code calling <code class="docutils literal notranslate"><span class="pre">rosidl_generate_interfaces()</span></code> can either pass <code class="docutils literal notranslate"><span class="pre">.idl</span></code> files directly or pass <code class="docutils literal notranslate"><span class="pre">.msg</span></code> / <code class="docutils literal notranslate"><span class="pre">.srv</span></code> / <code class="docutils literal notranslate"><span class="pre">.action</span></code> which will then internally be converted into <code class="docutils literal notranslate"><span class="pre">.idl</span></code> files before being passed to each message generator.</p>
<p>The format of <code class="docutils literal notranslate"><span class="pre">.msg</span></code> / <code class="docutils literal notranslate"><span class="pre">.srv</span></code> / <code class="docutils literal notranslate"><span class="pre">.action</span></code> files is not being evolved in the future.
The mapping between <code class="docutils literal notranslate"><span class="pre">.msg</span></code> / <code class="docutils literal notranslate"><span class="pre">.srv</span></code> / <code class="docutils literal notranslate"><span class="pre">.action</span></code> files and <code class="docutils literal notranslate"><span class="pre">.idl</span></code> files is described in <a class="reference external" href="https://design.ros2.org/articles/legacy_interface_definition.html">this design article</a>.
A <a class="reference external" href="https://design.ros2.org/articles/idl_interface_definition.html">second design article</a> describes the supported features in <code class="docutils literal notranslate"><span class="pre">.idl</span></code> files.
In order to leverage any of the new features existing interfaces need to be converted (e.g. using the command line tools  <code class="docutils literal notranslate"><span class="pre">msg2idl</span></code> / <code class="docutils literal notranslate"><span class="pre">srv2idl</span></code> / <code class="docutils literal notranslate"><span class="pre">action2idl</span></code>).</p>
<p>To distinguish same type names, but with different namespaces, the introspection structs now contain a namespace field that replaces the package name (see <a class="reference external" href="https://github.com/ros2/rosidl/pull/355/files">ros2/rosidl#335</a>).</p>
<div class="section" id="mapping-of-char-in-msg-files">
<h4>Mapping of char in .msg files<a class="headerlink" href="#mapping-of-char-in-msg-files" title="永久链接至标题"></a></h4>
<p>In <a class="reference external" href="https://wiki.ros.org/msg#Fields">ROS 1</a> <code class="docutils literal notranslate"><span class="pre">char</span></code> has been deprecated for a long time and is being mapped to <code class="docutils literal notranslate"><span class="pre">uint8</span></code>.
In ROS 2 until Crystal <code class="docutils literal notranslate"><span class="pre">char</span></code> was mapped to a single character (<code class="docutils literal notranslate"><span class="pre">char</span></code> in C / C++, <code class="docutils literal notranslate"><span class="pre">str</span></code> with length 1 in Python) in an effort to provide a more natural mapping.
As of Dashing the ROS 1 semantic has been restored and <code class="docutils literal notranslate"><span class="pre">char</span></code> maps to <code class="docutils literal notranslate"><span class="pre">uint8</span></code> again.</p>
</div>
</div>
<div class="section" id="rosidl-generator-cpp">
<h3><a class="toc-backref" href="#id14">rosidl_generator_cpp</a><a class="headerlink" href="#rosidl-generator-cpp" title="永久链接至标题"></a></h3>
<p>The C++ data structures generated for messages, services and actions provide setter methods for each field.
Until Crystal each setter returned a pointer to the data structure itself to enable the named parameter idiom.
As of Dashing these setters <a class="reference external" href="https://github.com/ros2/rosidl/pull/353">return a reference</a> instead since that seems to be the more common signature as well as it clarifies that the returned value can't be a <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>.</p>
</div>
<div class="section" id="rosidl-generator-py">
<h3><a class="toc-backref" href="#id15">rosidl_generator_py</a><a class="headerlink" href="#rosidl-generator-py" title="永久链接至标题"></a></h3>
<p>Until Crystal an array (fixed size) or sequence (dynamic size, optionally with an upper boundary) field in a message was stored as a <code class="docutils literal notranslate"><span class="pre">list</span></code> in Python.
As of Dashing the Python type for arrays / sequences of numeric values has been changed:</p>
<ul class="simple">
<li><p>an array of numeric values is stored as a <code class="docutils literal notranslate"><span class="pre">numpy.ndarray</span></code> (the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is chosen to match the type of the numeric value)</p></li>
<li><p>a sequence of numeric values is stored as an <code class="docutils literal notranslate"><span class="pre">array.array</span></code> (the <code class="docutils literal notranslate"><span class="pre">typename</span></code> is chosen to match the type of the numeric value)</p></li>
</ul>
<p>As before an array / sequence of non-numeric types is still represented as a <code class="docutils literal notranslate"><span class="pre">list</span></code> in Python.</p>
<p>This change brings a number of benefits:</p>
<ul class="simple">
<li><p>The new data structures ensure that each item in the array / sequence complies with the value range restrictions of the numeric type.</p></li>
<li><p>The numeric values can be stored more efficiently in memory which avoid the overhead of Python objects for each item.</p></li>
<li><p>The memory layout of both data structures allows to read and write all items of the array / sequence in a single operation which makes the conversion from and to Python significantly faster / more efficient.</p></li>
</ul>
</div>
<div class="section" id="launch">
<h3><a class="toc-backref" href="#id16">启动</a><a class="headerlink" href="#launch" title="永久链接至标题"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">launch_testing</span></code> package caught up with the <code class="docutils literal notranslate"><span class="pre">launch</span></code> package redesign done in Bouncy Bolson.
The legacy Python API, already moved into the <code class="docutils literal notranslate"><span class="pre">launch.legacy</span></code> submodule, has thus been deprecated and removed.</p>
<p>See <code class="docutils literal notranslate"><span class="pre">launch</span></code> <a class="reference external" href="https://github.com/ros2/launch/tree/dashing/launch/examples">examples</a> and <a class="reference external" href="https://github.com/ros2/launch/tree/dashing/launch/doc">documentation</a> for reference on how to use its new API.</p>
<p>See <a class="reference external" href="https://github.com/ros2/demos">demos tests</a> for reference on how to use the new <code class="docutils literal notranslate"><span class="pre">launch_testing</span></code> API.</p>
</div>
<div class="section" id="rmw">
<h3><a class="toc-backref" href="#id17">rmw</a><a class="headerlink" href="#rmw" title="永久链接至标题"></a></h3>
<p>Changes since the <a class="reference internal" href="Release-Crystal-Clemmys.html"><span class="doc">Crystal Clemmys</span></a> release:</p>
<ul class="simple">
<li><p>New API in <code class="docutils literal notranslate"><span class="pre">rmw</span></code>, a fini function for <code class="docutils literal notranslate"><span class="pre">rmw_context_t</span></code>:</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/c518842f6f82910482470b40c221c268d30691bd/rmw/include/rmw/init.h#L111-L136">rmw_context_fini</a></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Modification of <code class="docutils literal notranslate"><span class="pre">rmw</span></code>, now passes <code class="docutils literal notranslate"><span class="pre">rmw_context_t</span></code> to <code class="docutils literal notranslate"><span class="pre">rmw_create_wait_set</span></code>:</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/c518842f6f82910482470b40c221c268d30691bd/rmw/include/rmw/rmw.h#L522-L543">rmw_create_wait_set</a></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>New APIs in <code class="docutils literal notranslate"><span class="pre">rmw</span></code> for preallocating space for published and subscribed messages:</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/dc7b2f49f1f961d6cf2c173adc54736451be8938/rmw/include/rmw/rmw.h#L262">rmw_init_publisher_allocation</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/dc7b2f49f1f961d6cf2c173adc54736451be8938/rmw/include/rmw/rmw.h#L279">rmw_fini_publisher_allocation</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/dc7b2f49f1f961d6cf2c173adc54736451be8938/rmw/include/rmw/rmw.h#L489">rmw_init_subscription_allocation</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/dc7b2f49f1f961d6cf2c173adc54736451be8938/rmw/include/rmw/rmw.h#L506">rmw_fini_subscription_allocation</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/dc7b2f49f1f961d6cf2c173adc54736451be8938/rmw/include/rmw/rmw.h#L395">rmw_serialized_message_size</a></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Modification of <code class="docutils literal notranslate"><span class="pre">rmw</span></code>, now passes <code class="docutils literal notranslate"><span class="pre">rmw_publisher_allocation_t</span></code> or <code class="docutils literal notranslate"><span class="pre">rmw_subscription_allocation_t</span></code> to <code class="docutils literal notranslate"><span class="pre">rmw_publish</span></code> and <code class="docutils literal notranslate"><span class="pre">rmw_take</span></code>, respectively.
Note that this argument can be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> or <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>, which keeps existing Crystal behavior.</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/dc7b2f49f1f961d6cf2c173adc54736451be8938/rmw/include/rmw/rmw.h#L310">rmw_publish</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rmw/blob/dc7b2f49f1f961d6cf2c173adc54736451be8938/rmw/include/rmw/rmw.h#L556">rmw_take</a></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Type names returned by <code class="docutils literal notranslate"><span class="pre">rmw_get_*_names_and_types*</span></code> functions should have a fully-qualified namespace.
For example, instead of <code class="docutils literal notranslate"><span class="pre">rcl_interfaces/Parameter</span></code> and <code class="docutils literal notranslate"><span class="pre">rcl_interfaces/GetParameters</span></code>, the returned type names should be <code class="docutils literal notranslate"><span class="pre">rcl_interface/msg/Parameter</span></code> and <code class="docutils literal notranslate"><span class="pre">rcl_interfaces/srv/GetParameters</span></code>.</p></li>
</ul>
</div>
<div class="section" id="actions">
<h3><a class="toc-backref" href="#id18">actions</a><a class="headerlink" href="#actions" title="永久链接至标题"></a></h3>
<ul>
<li><p>Changes to <code class="docutils literal notranslate"><span class="pre">rclcpp_action::Client</span></code> signatures:</p>
<p>The signature of <a class="reference external" href="https://github.com/ros2/rclcpp/blob/ef41059a751702274667e2164182c062b47c453d/rclcpp_action/include/rclcpp_action/client.hpp#L343">rclcpp_action::Client::async_send_goal</a> has changed.
Now users can optionally provide callback functions for the <strong>goal response</strong> and the <strong>result</strong> using the new
<a class="reference external" href="https://github.com/ros2/rclcpp/blob/ef41059a751702274667e2164182c062b47c453d/rclcpp_action/include/rclcpp_action/client.hpp#L276">SendGoalOptions</a> struct.
The goal response callback is called when an action server accepts or rejects the goal and the result callback is called when the result for the goal is received.
Optional callbacks were also added to <a class="reference external" href="https://github.com/ros2/rclcpp/blob/ef41059a751702274667e2164182c062b47c453d/rclcpp_action/include/rclcpp_action/client.hpp#L432-L434">rclcpp_action::Client::async_cancel_goal</a>
and <a class="reference external" href="https://github.com/ros2/rclcpp/blob/ef41059a751702274667e2164182c062b47c453d/rclcpp_action/include/rclcpp_action/client.hpp#L399-L401">rclcpp_action::Client::async_get_result</a>.</p>
</li>
<li><p>Changes to goal transition names:</p>
<p>The names of goal state transitions have been refactored to reflect the design documention.
This affects <code class="docutils literal notranslate"><span class="pre">rcl_action</span></code>, <code class="docutils literal notranslate"><span class="pre">rclcpp_action</span></code>, and <code class="docutils literal notranslate"><span class="pre">rclpy</span></code>.
Here is a list of the event name changes (<em>Old name -&gt; New name</em>):</p>
<ul class="simple">
<li><p>GOAL_EVENT_CANCEL -&gt; GOAL_EVENT_CANCEL_GOAL</p></li>
<li><p>GOAL_EVENT_SET_SUCCEEDED -&gt; GOAL_EVENT_SUCCEED</p></li>
<li><p>GOAL_EVENT_SET_ABORTED -&gt; GOAL_EVENT_ABORT</p></li>
<li><p>GOAL_EVENT_SET_CANCELED -&gt; GOAL_EVENT_CANCELED</p></li>
</ul>
</li>
<li><p>Changes to <code class="docutils literal notranslate"><span class="pre">CancelGoal.srv</span></code>:</p>
<p>A <code class="docutils literal notranslate"><span class="pre">return_code</span></code> field was added to the response message of the <code class="docutils literal notranslate"><span class="pre">CancelGoal</span></code> service.
This is to better communicate a reason for a failed service call.
See the <a class="reference external" href="https://github.com/ros2/rcl_interfaces/pull/76">pull request</a> and connected issue for details.</p>
</li>
</ul>
</div>
<div class="section" id="rviz">
<h3><a class="toc-backref" href="#id19">rviz</a><a class="headerlink" href="#rviz" title="永久链接至标题"></a></h3>
<ul class="simple">
<li><p>Plugins should use fully qualified type names otherwise a warning will be logged.
For <a class="reference external" href="https://github.com/ros2/rviz/blob/dfceae319d49546f1e4ad39689853c18fef0001e/rviz_default_plugins/plugins_description.xml#L13">example</a>, use the type <code class="docutils literal notranslate"><span class="pre">sensor_msgs/msg/Image</span></code> instead of <code class="docutils literal notranslate"><span class="pre">sensor_msgs/Image</span></code>.
See <a class="reference external" href="https://github.com/ros2/rviz/pull/387">PR introducing this change</a> for more details.</p></li>
</ul>
</div>
</div>
<div class="section" id="known-issues">
<h2><a class="toc-backref" href="#id20">已知问题</a><a class="headerlink" href="#known-issues" title="永久链接至标题"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/issues/715">[ros2/rclcpp#715]</a> There is an inconsistency in the way that parameter YAML files are loaded between standalone ROS 2 nodes and composed ROS 2 nodes.
Currently available workarounds are noted in an <a class="reference external" href="https://github.com/ros2/rclcpp/issues/715#issuecomment-497392626">issue comment</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclpy/issues/360">[ros2/rclpy#360]</a> rclpy nodes ignore <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">ctrl</kbd>-<kbd class="kbd docutils literal notranslate">c</kbd></kbd> when using OpenSplice on Windows.</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rosidl_typesupport_opensplice/issues/30">[ros2/rosidl_typesupport_opensplice#30]</a> There is a bug preventing nesting a message inside of a service or action definition with the same name when using OpenSplice.</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/pull/781">[ros2/rclcpp#781]</a> Calling <code class="docutils literal notranslate"><span class="pre">get_parameter</span></code>/<code class="docutils literal notranslate"><span class="pre">list_parameter</span></code> from within <code class="docutils literal notranslate"><span class="pre">on_set_parameter_callback</span></code> causes a deadlock on Dashing.  This is fixed for Eloquent, but is an ABI break so has not been backported to Dashing.</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/issues/912">[ros2/rclcpp#912]</a> Inter-process communication forces a message copy when intra-process communication takes place between an <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> publisher and a single <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> subscription (published <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> is internally being promoted to an <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code>).</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rosbag2/issues/125">[ros2/rosbag2#125]</a> Topics with unreliable QOS are not recorded.</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/issues/715">[ros2/rclcpp#715]</a> Composable nodes cannot receive parameters via remapping. Supplying parameters to composable nodes can be accomplished using the methods described in <a class="reference external" href="https://github.com/ros2/rclcpp/issues/715#issuecomment-497392626">[this comment]</a>.</p></li>
<li><p><a class="reference external" href="https://github.com/ros2/rclcpp/issues/893">[ros2/rclcpp#893]</a> <code class="docutils literal notranslate"><span class="pre">rclcpp::Context</span></code> is not destroyed because of a reference cycle with <code class="docutils literal notranslate"><span class="pre">rclcpp::GraphListener</span></code>. This causes a memory leak. A fix has not been backported because of the risk of breaking ABI.</p></li>
</ul>
</div>
<div class="section" id="timeline-before-the-release">
<h2><a class="toc-backref" href="#id21">Timeline before the release</a><a class="headerlink" href="#timeline-before-the-release" title="永久链接至标题"></a></h2>
<p>A few milestones leading up to the release:</p>
<blockquote>
<div><dl class="simple">
<dt>Mon. Apr 8th (alpha)</dt><dd><p>First releases of core packages available.
Testing can happen from now on (some features might not have landed yet).</p>
</dd>
<dt>Thu. May 2nd</dt><dd><p>API freeze for core packages</p>
</dd>
<dt>Mon. May 6th (beta)</dt><dd><p>Updated releases of core packages available.
Additional testing of the latest features.</p>
</dd>
<dt>Thu. May 16th</dt><dd><p>Feature freeze.
Only bug fix releases should be made after this point.
New packages can be released independently.</p>
</dd>
<dt>Mon. May 20th (release candidate)</dt><dd><p>Updated releases of core packages available.</p>
</dd>
<dt>Wed. May 29th</dt><dd><p>Freeze rosdistro.
No PRs for Dashing on the <a class="reference external" href="http://docs.ros.org/en/independent/api/rosdistro/html/rosdistro.html#module-rosdistro" title="(在 rosdistro)"><code class="xref any docutils literal notranslate"><span class="pre">rosdistro</span></code></a> repo will be merged (reopens after the release announcement).</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Release-Eloquent-Elusor.html" class="btn btn-neutral float-left" title="Eloquent Elusor (eloquent)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="Release-Crystal-Clemmys.html" class="btn btn-neutral float-right" title="Crystal Clemmys (crystal)" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2023, Open Robotics.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EVD5Z6G6NH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-EVD5Z6G6NH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>