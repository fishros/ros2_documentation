<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Concepts/About-Middleware-Implementations</title>
</head>
<body>
  <div class="section" id="about-ros-2-middleware-implementations">
<h1>关于ROS 2中间件实现<a class="headerlink" href="#about-ros-2-middleware-implementations" title="永久链接至标题"></a></h1>
<p>ROS中间件实现是一组|packages|，用于实现一些内部的ROS接口，例如``rmw``、<a href="#id1"><span class="problematic" id="id2">``</span></a>rcl``和``rosidl``|APIs|。</p>
<div class="section" id="common-packages-for-dds-middleware-packages">
<h2>DDS中间件的常见包<a class="headerlink" href="#common-packages-for-dds-middleware-packages" title="永久链接至标题"></a></h2>
<p>所有当前的ROS中间件实现都基于完整或部分的DDS实现。例如，有一种中间件实现使用RTI的Connext DDS，另一种实现使用eProsima的Fast DDS。因此，在大多数基于DDS的中间件实现之间存在一些共享的|packages|。</p>
<p>在|GitHub|_上的`ros2/rosidl_dds &lt;<a class="reference external" href="https://github.com/ros2/rosidl_dds">https://github.com/ros2/rosidl_dds</a>&gt;`_代码库中，有以下|package|：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rosidl_generator_dds_idl</span></code>：提供从``rosidl``文件（例如``.msg``文件、<a href="#id1"><span class="problematic" id="id2">``</span></a>.srv``文件等）生成DDS <a href="#id3"><span class="problematic" id="id4">``</span></a>.idl``文件的工具。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">rosidl_generator_dds_idl</span></code> <a class="reference internal" href="../Glossary.html#term-package"><span class="xref std std-term">package</span></a> 会为每个包含消息的 <a class="reference internal" href="../Glossary.html#term-package"><span class="xref std std-term">packages</span></a> 中定义的 <code class="docutils literal notranslate"><span class="pre">rosidl</span></code> 文件（例如 <code class="docutils literal notranslate"><span class="pre">.msg</span></code> 文件）生成一个 DDS <code class="docutils literal notranslate"><span class="pre">.idl</span></code> 文件。目前基于 DDS 的 ROS 中间件实现使用该生成器的输出 <code class="docutils literal notranslate"><span class="pre">.idl</span></code> 文件来生成供应商特定的预编译类型支持。</p>
</div>
<div class="section" id="structure-of-ros-middleware-implementations">
<h2>ROS 中间件实现的结构<a class="headerlink" href="#structure-of-ros-middleware-implementations" title="永久链接至标题"></a></h2>
<p>一个 ROS 中间件实现通常由一个单一仓库中的几个 <a class="reference internal" href="../Glossary.html#term-package"><span class="xref std std-term">packages</span></a> 组成：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;implementation_name&gt;_cmake_module</span></code>：包含用于发现和公开所需依赖项的 CMake 模块</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rmw_&lt;implementation_name&gt;_&lt;language&gt;</span></code>：包含特定语言（通常是 C++）中 <code class="docutils literal notranslate"><span class="pre">rmw</span></code> <a class="reference internal" href="../Glossary.html#term-API"><span class="xref std std-term">API</span></a> 的实现</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rosidl_typesupport_&lt;implementation_name&gt;_&lt;language&gt;</span></code>：包含用于为 <code class="docutils literal notranslate"><span class="pre">rosidl</span></code> 文件生成静态类型支持代码的工具，适用于特定语言的实现（通常是 C 或 C++）</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&lt;implementation_name&gt;_cmake_module</span></code> <a class="reference internal" href="../Glossary.html#term-package"><span class="xref std std-term">package</span></a> 包含了查找中间件实现所需的所有 CMake 模块和函数。例如，<code class="docutils literal notranslate"><span class="pre">rti_connext_dds_cmake_module</span></code> 提供了围绕 RTI Connext DDS 提供的 CMake 模块的包装逻辑，确保所有依赖它的软件包将选择相同的 RTI Connext DDS 安装。类似地，<code class="docutils literal notranslate"><span class="pre">fastrtps_cmake_module</span></code> 包括一个用于查找 eProsima's Fast DDS 的 CMake 模块，而 <code class="docutils literal notranslate"><span class="pre">gurumdds_cmake_module</span></code> 包括一个用于查找 GurumNetworks GurumDDS 的 CMake 模块。并非所有实现都会有这样的包：例如，Eclipse 的 Cyclone DDS 已经提供了一个 CMake 模块，其 RMW 实现直接使用它，无需额外的包装。</p>
<p><code class="docutils literal notranslate"><span class="pre">rmw_&lt;implementation_name&gt;_&lt;language&gt;</span></code> <a class="reference internal" href="../Glossary.html#term-package"><span class="xref std std-term">package</span></a> 在特定语言中实现了 <code class="docutils literal notranslate"><span class="pre">rmw</span></code> C <a class="reference internal" href="../Glossary.html#term-API"><span class="xref std std-term">API</span></a>。实现本身可以是 C++，只需将头文件的符号公开为 <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code>，以便 C 应用程序可以链接到它。</p>
<p><code class="docutils literal notranslate"><span class="pre">rosidl_typesupport_&lt;implementation_name&gt;_&lt;language&gt;</span></code> <a class="reference internal" href="../Glossary.html#term-package"><span class="xref std std-term">package</span></a> 提供了一个生成器，用于生成特定语言的 DDS 代码。这是使用 <code class="docutils literal notranslate"><span class="pre">rosidl_generator_dds_idl</span></code> <a class="reference internal" href="../Glossary.html#term-package"><span class="xref std std-term">package</span></a> 生成的 <code class="docutils literal notranslate"><span class="pre">.idl</span></code> 文件和 DDS 供应商提供的 DDS IDL 代码生成器完成的。它还生成用于将 ROS 消息结构与 DDS 消息结构相互转换的代码。该生成器还负责为其所使用的消息包创建一个特定于消息包和所使用的 DDS 供应商的共享库。</p>
<p>如上所述，如果 rmw 实现支持消息的运行时解释，则可以使用 <code class="docutils literal notranslate"><span class="pre">rosidl_typesupport_introspection_&lt;language&gt;</span></code> 代替特定于供应商的类型支持包。通过支持 <a class="reference external" href="http://www.omg.org/spec/DDS-XTypes">DDS X-Types Dynamic Data 标准</a>，实现了在生成代码之前以编程方式在主题上发送和接收类型的能力。因此，rmw 实现可以提供对 X-Types 标准的支持，并/或者提供一个在编译时生成的类型支持包，特定于其 DDS 实现。</p>
<p>以 <code class="docutils literal notranslate"><span class="pre">Eclipse</span> <span class="pre">Cyclone</span> <span class="pre">DDS</span></code> 作为 rmw 实现的示例，它的 ROS 中间件实现位于 <a class="reference external" href="https://github.com/">GitHub</a> 上的 <a class="reference external" href="https://github.com/ros2/rmw_cyclonedds">ros2/rmw_cyclonedds</a>。</p>
<p><code class="docutils literal notranslate"><span class="pre">Fast</span> <span class="pre">DDS</span></code> 的 rmw 实现位于 <a class="reference external" href="https://github.com/">GitHub</a> 上的 <a class="reference external" href="https://github.com/ros2/rmw_fastrtps_cpp">ros2/rmw_fastrtps_cpp</a>。</p>
<p><code class="docutils literal notranslate"><span class="pre">Connext</span> <span class="pre">DDS</span></code> 的 rmw 实现位于 <a class="reference external" href="https://github.com/">GitHub</a> 上，链接为 <a class="reference external" href="https://github.com/ros2/rmw_connextdds">ros2/rmw_connextdds</a>。</p>
<p><code class="docutils literal notranslate"><span class="pre">GurumDDS</span></code> 的 rmw 实现位于 <a class="reference external" href="https://github.com/">GitHub</a> 上，链接为 <a class="reference external" href="https://github.com/ros2/rmw_gurumdds">ros/rmw_gurumdds</a>。</p>
<p>要了解有关为 ROS 创建新的中间件实现所需的更多信息，请参阅此页面：</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>TODO: 链接到更详细的中间件实现文档和/或教程。</p>
</div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>