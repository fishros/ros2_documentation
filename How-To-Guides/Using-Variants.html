<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How-To-Guides/Using-Variants</title>
</head>
<body>
  <div class="section" id="using-variants">
<h1>使用变体<a class="headerlink" href="#using-variants" title="永久链接至标题"></a></h1>
<p>元软件包不直接提供软件，而是依赖于一组其他相关软件包，以便为完整的软件包组提供便捷的安装机制。<a class="footnote-reference brackets" href="#id3" id="id1">1</a> <a class="footnote-reference brackets" href="#id4" id="id2">2</a> 变体是一组常用的 ROS 软件包的官方元软件包列表。</p>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="https://wiki.debian.org/metapackage">https://wiki.debian.org/metapackage</a></p>
</dd>
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><a class="reference external" href="https://help.ubuntu.com/community/MetaPackages">https://help.ubuntu.com/community/MetaPackages</a></p>
</dd>
</dl>
<p>ROS 2中的不同变体在`REP-2001 &lt;<a class="reference external" href="https://ros.org/reps/rep-2001.html">https://ros.org/reps/rep-2001.html</a>&gt;`_中有详细说明。</p>
<p>除了官方的变体外，还可能存在针对特定机构或机器人的元包，如`REP-108 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-0108.html#institution-specific">https://www.ros.org/reps/rep-0108.html#institution-specific</a>&gt;`_中所述。</p>
<div class="section" id="adding-variants">
<h2>添加变体<a class="headerlink" href="#adding-variants" title="永久链接至标题"></a></h2>
<p>对于ROS社区有用的其他变体可以通过向`REP-2001提出更新的方式 &lt;<a class="reference external" href="https://github.com/ros-infrastructure/rep/blob/master/rep-2001.rst">https://github.com/ros-infrastructure/rep/blob/master/rep-2001.rst</a>&gt;`_ 来提议。在更新中描述所包含的新变体中的软件包。机构和机器人特定的变体可以直接由各自的维护者发布，不需要对REP-2001进行更新。</p>
</div>
<div class="section" id="creating-project-specific-variants">
<h2>创建项目特定的变体<a class="headerlink" href="#creating-project-specific-variants" title="永久链接至标题"></a></h2>
<p>如果您在自己的项目中创建ROS软件包供私人使用，您可以使用官方的变体作为示例来创建特定于您的项目的变体。要做到这一点，您只需要创建两个文件：</p>
<ol class="arabic simple">
<li><p>创建一个最小化变体包作为具有 <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code> 构建类型的包，其中 <code class="docutils literal notranslate"><span class="pre">ament_cmake</span></code> 有一个 <code class="docutils literal notranslate"><span class="pre">buildtool_depend</span></code>，并为每个要包含在变体中的包添加 <code class="docutils literal notranslate"><span class="pre">exec_depend</span></code> 条目。</p></li>
</ol>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="cp">&lt;?xml-model href=&quot;http://download.ros.org/schema/package_format2.xsd&quot; schematypens=&quot;http://www.w3.org/2001/XMLSchema&quot;?&gt;</span>
<span class="nt">&lt;package</span> <span class="na">format=</span><span class="s">&quot;2&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;name&gt;</span>my_project_variant<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;description&gt;</span>A package to aggregate all packages in my_project.<span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;maintainer</span> <span class="na">email=</span><span class="s">&quot;maintainer-email&quot;</span><span class="nt">&gt;</span>Maintainer Name<span class="nt">&lt;/maintainer&gt;</span>
  <span class="nt">&lt;license&gt;</span>Apache License 2.0<span class="nt">&lt;/license&gt;</span>
  <span class="cm">&lt;!-- packages in my_project --&gt;</span>
  <span class="nt">&lt;exec_depend&gt;</span>my_project_msgs<span class="nt">&lt;/exec_depend&gt;</span>
  <span class="nt">&lt;exec_depend&gt;</span>my_project_services<span class="nt">&lt;/exec_depend&gt;</span>
  <span class="nt">&lt;exec_depend&gt;</span>my_project_examples<span class="nt">&lt;/exec_depend&gt;</span>

  <span class="nt">&lt;export&gt;</span>
    <span class="nt">&lt;build_type&gt;</span>ament_cmake<span class="nt">&lt;/build_type&gt;</span>
  <span class="nt">&lt;/export&gt;</span>
<span class="nt">&lt;/package&gt;</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>一个最小化的 ament_cmake 包包括一个 <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> 文件，将 package.xml 注册为 ament 包，以便在 ROS 2 中使用。</p></li>
</ol>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>

<span class="nb">project</span><span class="p">(</span><span class="s">my_project_variant</span><span class="w"> </span><span class="s">NONE</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">ament_cmake</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">ament_package</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>然后，您可以将您的变体包与其他私有包一起构建和安装。</p></li>
</ol>
<div class="section" id="creating-custom-variants-with-platform-specific-tools">
<h3>使用特定于平台的工具创建自定义变体。<a class="headerlink" href="#creating-custom-variants-with-platform-specific-tools" title="永久链接至标题"></a></h3>
<p>有些平台提供了创建基本包的工具，不需要完整的ROS构建环境或等效基础设施。可以使用这些工具创建平台相关的变体。这种方法不包括对ROS打包工具的支持，且是平台相关的，但如果您创建的是一组现有软件包而不是公共和私有ROS软件包的混合物，则所需的基础设施要少得多。例如，在Debian或Ubuntu系统上，您可以使用 <code class="docutils literal notranslate"><span class="pre">equivs</span></code> 实用工具。Debian管理员手册中有一节关于 <a class="reference external" href="https://www.debian.org/doc/manuals/debian-handbook/sect.building-first-package.en.html#id-1.18.5.2">元软件包</a>。</p>
</div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>