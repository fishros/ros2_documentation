<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How-To-Guides/Using-Python-Packages</title>
</head>
<body>
  <div class="section" id="using-python-packages-with-ros-2">
<span id="pythonpackages"></span><h1>在ROS 2中使用Python包 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1027">[1027]</a><a class="headerlink" href="#using-python-packages-with-ros-2" title="永久链接至标题"></a></h1>
<p><a href="#id1"><span class="problematic" id="id2">**</span></a>目标：<a href="#id3"><span class="problematic" id="id4">**</span></a>解释如何与ROS 2生态系统中的其他Python包进行互操作。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1028">[1028]</a></p>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=362">[362]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#installing-via-rosdep" id="id1">通过``rosdep``进行安装 [1030]</a></p></li>
<li><p><a class="reference internal" href="#installing-via-a-package-manager" id="id2">通过软件包管理器安装 [1037]</a></p></li>
<li><p><a class="reference internal" href="#installing-via-a-virtual-environment" id="id3">通过虚拟环境安装 [1041]</a></p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>请注意，如果您打算使用预编译的二进制文件（无论是``deb``文件还是“fat”二进制发行版），Python解释器必须与用于构建原始二进制文件的解释器相匹配。如果您打算使用类似于``virtualenv``或``pipenv``的工具，请确保使用系统解释器。如果您使用类似于``conda``的工具，很可能解释器与系统解释器不匹配，且与ROS 2的二进制文件不兼容。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1029">[1029]</a></p>
</div>
<div class="section" id="installing-via-rosdep">
<h2>通过``rosdep``进行安装 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1030">[1030]</a><a class="headerlink" href="#installing-via-rosdep" title="永久链接至标题"></a></h2>
<p>包含第三方Python包的最快方法是使用它们对应的``rosdep``键（如果可用）。可以通过以下方式检查``rosdep``键： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1031">[1031]</a></p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ros/rosdistro/blob/master/rosdep/base.yaml">https://github.com/ros/rosdistro/blob/master/rosdep/base.yaml</a> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1032">[1032]</a></p></li>
<li><p><a class="reference external" href="https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml">https://github.com/ros/rosdistro/blob/master/rosdep/python.yaml</a> <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1033">[1033]</a></p></li>
</ul>
<p>这些``rosdep``键可以添加到您的``package.xml``文件中，指示构建系统您的软件包（以及依赖软件包）依赖于这些键。在新的工作空间中，您还可以使用以下命令快速安装所有rosdep键： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1034">[1034]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rosdep install -yr ./path/to/your/workspace</span>
</pre></div>
</div>
<p>如果您感兴趣的软件包目前没有相应的``rosdep``键，可以按照`rosdep键贡献指南`_进行添加。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1035">[1035]</a></p>
<p>要了解更多关于``rosdep``工具及其工作原理的信息，请参阅`rosdep文档`_。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1036">[1036]</a></p>
</div>
<div class="section" id="installing-via-a-package-manager">
<h2>通过软件包管理器安装 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1037">[1037]</a><a class="headerlink" href="#installing-via-a-package-manager" title="永久链接至标题"></a></h2>
<p>如果您不想创建一个 rosdep 键，但是该软件包在系统的软件包管理器中可用（例如 <code class="docutils literal notranslate"><span class="pre">apt</span></code>），您可以通过以下方式安装和使用该软件包： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1038">[1038]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install python3-serial</span>
</pre></div>
</div>
<p>如果该软件包在 <a class="reference external" href="https://pypi.org/">Python Package Index (PyPI)</a> 上可用，并且您想要在系统上进行全局安装： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1039">[1039]</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pyserial</span>
</pre></div>
</div>
<p>如果该软件包在 PyPI 上可用，并且您想要在本地安装到您的用户目录下： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1040">[1040]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m pip install -U --user pyserial</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-via-a-virtual-environment">
<h2>通过虚拟环境安装 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1041">[1041]</a><a class="headerlink" href="#installing-via-a-virtual-environment" title="永久链接至标题"></a></h2>
<p>首先，创建一个 Colcon 工作空间： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1042">[1042]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mkdir -p ~/colcon_venv/src</span>
<span class="go">cd ~/colcon_venv/</span>
</pre></div>
</div>
<p>然后设置您的虚拟环境： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1043">[1043]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Make a virtual env and activate it
<span class="go">virtualenv -p python3 ./venv</span>
<span class="go">source ./venv/bin/activate</span>
<span class="gp"># </span>Make sure that colcon doesn’t try to build the venv
<span class="go">touch ./venv/COLCON_IGNORE</span>
</pre></div>
</div>
<p>接下来，在您的虚拟环境中安装所需的 Python 包： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1044">[1044]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">python3 -m pip install gtsam pyserial… etc</span>
</pre></div>
</div>
<p>现在你可以构建你的工作空间并运行依赖于虚拟环境中安装的包的 Python 节点。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1045">[1045]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>Source Humble and build
<span class="go">source /opt/ros/humble/setup.bash</span>
<span class="go">colcon build</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>如果你想使用 Bloom 发布你的包，你应该将你所需的包添加到 <code class="docutils literal notranslate"><span class="pre">rosdep</span></code> 中，请参阅 <a class="reference external" href="http://docs.ros.org/en/independent/api/rosdep/html/contributing_rules.html">rosdep 关键字贡献指南</a>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1046">[1046]</a></p>
</div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>