<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How-To-Guides/Disabling-ZeroCopy-loaned-messages</title>
</head>
<body>
  <div class="section" id="disabling-zero-copy-loaned-messages">
<span id="zerocopyloanedmessages"></span><h1>禁用零拷贝借用消息 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=361">[361]</a><a class="headerlink" href="#disabling-zero-copy-loaned-messages" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title">内容 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=362">[362]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#how-to-disable-loaned-messages" id="id1">如何禁用借用消息 [364]</a></p></li>
</ul>
</div>
<p>有关借用消息工作原理的详细信息，请参阅`借用消息&lt;<a class="reference external" href="https://design.ros2.org/articles/zero_copy.html">https://design.ros2.org/articles/zero_copy.html</a>&gt;`__文章。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=363">[363]</a></p>
<div class="section" id="how-to-disable-loaned-messages">
<h2>如何禁用借用消息 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=364">[364]</a><a class="headerlink" href="#how-to-disable-loaned-messages" title="永久链接至标题"></a></h2>
<p>默认情况下，<em>借用消息</em> 将尝试从底层中间件借用内存，如果它支持*借用消息*。可以使用 <code class="docutils literal notranslate"><span class="pre">ROS_DISABLE_LOANED_MESSAGES</span></code> 环境变量来禁用*借用消息*，并回退到正常的发布者和订阅者行为，无需进行任何代码更改或中间件配置。您可以使用以下命令设置环境变量： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=365">[365]</a></p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-TGludXg=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-TGludXg=" name="TGludXg=" role="tab" tabindex="0">Linux</button><button aria-controls="panel-0-bWFjT1M=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="-1">macOS</button><button aria-controls="panel-0-V2luZG93cw==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-V2luZG93cw==" name="V2luZG93cw==" role="tab" tabindex="-1">Windows</button></div><div aria-labelledby="tab-0-TGludXg=" class="sphinx-tabs-panel group-tab" id="panel-0-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ROS_DISABLE_LOANED_MESSAGES=1</span>
</pre></div>
</div>
<p>为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=367">[367]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;export ROS_DISABLE_LOANED_MESSAGES=1&quot; &gt;&gt; ~/.bashrc</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-bWFjT1M=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export ROS_DISABLE_LOANED_MESSAGES=1</span>
</pre></div>
</div>
<p>为了在不同的shell会话之间保持这个设置，可以将该命令添加到shell启动脚本中： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=367">[367]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">echo &quot;export ROS_DISABLE_LOANED_MESSAGES=1&quot; &gt;&gt; ~/.bash_profile</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-V2luZG93cw==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-V2luZG93cw==" name="V2luZG93cw==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">set ROS_DISABLE_LOANED_MESSAGES=1</span>
</pre></div>
</div>
<p>如果想要在不同的shell会话之间永久生效，还需要运行以下命令： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=370">[370]</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">setx ROS_DISABLE_LOANED_MESSAGES 1</span>
</pre></div>
</div>
</div></div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>