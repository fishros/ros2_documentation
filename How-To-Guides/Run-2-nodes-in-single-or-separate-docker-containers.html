<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How-To-Guides/Run-2-nodes-in-single-or-separate-docker-containers</title>
</head>
<body>
  <div class="section" id="running-ros-2-nodes-in-docker-community-contributed">
<h1>在 Docker 中运行 ROS 2 节点[社区贡献] <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=946">[946]</a><a class="headerlink" href="#running-ros-2-nodes-in-docker-community-contributed" title="永久链接至标题"></a></h1>
<div class="section" id="run-two-nodes-in-a-single-docker-container">
<h2>在单个 Docker 容器中运行两个节点 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=947">[947]</a><a class="headerlink" href="#run-two-nodes-in-a-single-docker-container" title="永久链接至标题"></a></h2>
<p>使用标签为“humble-desktop”的 ROS Docker 镜像拉取镜像。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=948">[948]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker pull osrf/ros:humble-desktop
</pre></div>
</div>
<p>在交互模式下在容器中运行镜像。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=949">[949]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ docker run -it osrf/ros:humble-desktop
root@&lt;container-id&gt;:/#
</pre></div>
</div>
<p>现在您最好的朋友是 <code class="docutils literal notranslate"><span class="pre">ros2</span></code> 命令行帮助。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=950">[950]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@&lt;container-id&gt;:/# ros2 --help
</pre></div>
</div>
<p>例如，列出所有已安装的软件包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=951">[951]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@&lt;container-id&gt;:/# ros2 pkg list
<span class="o">(</span>you will see a list of packages<span class="o">)</span>
</pre></div>
</div>
<p>例如，列出所有可执行文件： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=952">[952]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@&lt;container-id&gt;:/# ros2 pkg executables
<span class="o">(</span>you will see a list of &lt;package&gt; &lt;executable&gt;<span class="o">)</span>
</pre></div>
</div>
<p>在此容器中运行一个名为 <code class="docutils literal notranslate"><span class="pre">demo_nodes_cpp</span></code> 的软件包中的两个C++节点（一个主题订阅者 <code class="docutils literal notranslate"><span class="pre">listener</span></code>，一个主题发布者 <code class="docutils literal notranslate"><span class="pre">talker</span></code>）的最简示例： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=953">[953]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run demo_nodes_cpp listener <span class="p">&amp;</span>
ros2 run demo_nodes_cpp talker
</pre></div>
</div>
</div>
<div class="section" id="run-two-nodes-in-two-separate-docker-containers">
<h2>在两个单独的Docker容器中运行两个节点。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=954">[954]</a><a class="headerlink" href="#run-two-nodes-in-two-separate-docker-containers" title="永久链接至标题"></a></h2>
<p>打开一个终端。以交互模式在容器中运行图像，并使用 <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">run</span></code> 启动一个主题发布者（软件包 <code class="docutils literal notranslate"><span class="pre">demo_nodes_cpp</span></code> 中的可执行文件 <code class="docutils literal notranslate"><span class="pre">talker</span></code>）： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=955">[955]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it --rm osrf/ros:humble-desktop ros2 run demo_nodes_cpp talker
</pre></div>
</div>
<p>打开第二个终端。以交互模式在容器中运行图像，并使用 <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">run</span></code> 启动一个主题订阅者（软件包 <code class="docutils literal notranslate"><span class="pre">demo_nodes_cpp</span></code> 中的可执行文件 <code class="docutils literal notranslate"><span class="pre">listener</span></code>）： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=956">[956]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it --rm osrf/ros:humble-desktop ros2 run demo_nodes_cpp listener
</pre></div>
</div>
<p>作为命令行调用的替代方案，您可以创建一个名为``docker-compose.yml``的文件（版本2），其内容如下（最小化）： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=957">[957]</a></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2&#39;</span><span class="w"></span>

<span class="nt">services</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">talker</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">osrf/ros:humble-desktop</span><span class="w"></span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ros2 run demo_nodes_cpp talker</span><span class="w"></span>
<span class="w">  </span><span class="nt">listener</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">osrf/ros:humble-desktop</span><span class="w"></span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ros2 run demo_nodes_cpp listener</span><span class="w"></span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">talker</span><span class="w"></span>
</pre></div>
</div>
<p>要运行容器，请在相同目录中调用``docker compose up``。您可以使用``Ctrl+C``关闭容器。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=958">[958]</a></p>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>