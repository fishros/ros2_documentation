<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How-To-Guides/Releasing/Release-Track</title>
</head>
<body>
  <div class="section" id="release-track">
<h1>发布跟踪 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=887">[887]</a><a class="headerlink" href="#release-track" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=7">[]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#what-is-a-track" id="id12">什么是跟踪？ [888]</a></p></li>
<li><p><a class="reference internal" href="#track-configurations" id="id13">轨道配置 [892]</a></p>
<ul>
<li><p><a class="reference internal" href="#release-repository-url" id="id14">发布存储库网址 [894]</a></p></li>
<li><p><a class="reference internal" href="#repository-name" id="id15">存储库名称 [899]</a></p></li>
<li><p><a class="reference internal" href="#upstream-repository-uri" id="id16">上游存储库 URI [902]</a></p></li>
<li><p><a class="reference internal" href="#upstream-vcs-type" id="id17">上游版本控制系统类型 [905]</a></p></li>
<li><p><a class="reference internal" href="#version" id="id18">版本 [908]</a></p></li>
<li><p><a class="reference internal" href="#release-tag" id="id19">发布标签 [912]</a></p></li>
<li><p><a class="reference internal" href="#upstream-devel-branch" id="id20">上游开发分支 [917]</a></p></li>
<li><p><a class="reference internal" href="#ros-distro" id="id21">ROS发行版 [920]</a></p></li>
<li><p><a class="reference internal" href="#patches-directory" id="id22">补丁目录 [923]</a></p></li>
<li><p><a class="reference internal" href="#release-repository-push-url" id="id23">发布存储库推送 URL [926]</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="what-is-a-track">
<span id="id1"></span><h2>什么是跟踪？ <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=888">[888]</a><a class="headerlink" href="#what-is-a-track" title="永久链接至标题"></a></h2>
<p>Bloom 在首次发布软件包时需要用户输入配置信息。将这些配置存储在发布仓库中是有益的，这样我们就不必为后续发布手动输入不会更改的配置信息。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=889">[889]</a></p>
<p>由于在为不同的 ROS 发行版发布软件包时，某些配置会有所不同，bloom 使用**发布轨道来存储每个发行版的发布配置**。按照惯例，应该使用与要发布的 ROS 发行版名称相同的轨道名称来创建轨道。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=890">[890]</a></p>
<p>所有发布轨道的配置信息存储在发布仓库的主分支上的 <code class="docutils literal notranslate"><span class="pre">tracks.yaml</span></code> 文件中。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=891">[891]</a></p>
</div>
<div class="section" id="track-configurations">
<h2>轨道配置 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=892">[892]</a><a class="headerlink" href="#track-configurations" title="永久链接至标题"></a></h2>
<p>更详细地解释了与bloom一起使用的跟踪配置。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=893">[893]</a></p>
<div class="section" id="release-repository-url">
<span id="id2"></span><h3>发布存储库网址 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=894">[894]</a><a class="headerlink" href="#release-repository-url" title="永久链接至标题"></a></h3>
<p>这是您发布存储库的网址，如果您的发布存储库托管在ros2-gbp上，它应该采用``https://github.com/ros2-gbp/my_repo-release.git``的形式。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=895">[895]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>No reasonable default release repository url could be determined from previous releases.
Release repository url <span class="o">[</span>press enter to abort<span class="o">]</span>:
</pre></div>
</div>
<p>粘贴您的发布存储库网址并按Enter键。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=896">[896]</a></p>
<p>此外，Bloom可能会询问您有关初始化新存储库的情况，如下所示： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=897">[897]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Freshly initialized git repository detected.
An initial empty commit is going to be made.
Continue <span class="o">[</span>Y/n<span class="o">]</span>?
</pre></div>
</div>
<p>只需按回车键接受默认的是。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=898">[898]</a></p>
</div>
<div class="section" id="repository-name">
<span id="id3"></span><h3>存储库名称 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=899">[899]</a><a class="headerlink" href="#repository-name" title="永久链接至标题"></a></h3>
<p>存储库名称很简单，但建议将其设置为您的项目名称。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=900">[900]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Repository Name:
   upstream
      Default value, leave this as upstream <span class="k">if</span> you are unsure
   &lt;name&gt;
      Name of the repository <span class="o">(</span>used <span class="k">in</span> the archive name<span class="o">)</span>
   <span class="o">[</span><span class="s1">&#39;upstream&#39;</span><span class="o">]</span>:
</pre></div>
</div>
<p>输入项目名称（例如 <code class="docutils literal notranslate"><span class="pre">my_project</span></code>）并按 Enter 键。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=901">[901]</a></p>
</div>
<div class="section" id="upstream-repository-uri">
<span id="id4"></span><h3>上游存储库 URI <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=902">[902]</a><a class="headerlink" href="#upstream-repository-uri" title="永久链接至标题"></a></h3>
<p><strong>上游存储库</strong> 是您的源代码所在的存储库。这很可能是指指向托管在 GitHub 或 GitLab 等 git 托管服务上的项目的 https 链接。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=903">[903]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Upstream Repository URI:
   &lt;uri&gt;
      Any valid URI. This variable can be templated, <span class="k">for</span> example an svn url
      can be templated as such: <span class="s2">&quot;https://svn.foo.com/foo/tags/foo-:{version}&quot;</span>
      where the :<span class="o">{</span>version<span class="o">}</span> token will be replaced with the version <span class="k">for</span> this release.
   <span class="o">[</span>None<span class="o">]</span>:
</pre></div>
</div>
<p>确保**使用 https 地址**（例如 <code class="docutils literal notranslate"><span class="pre">https://github.com/my_organization/my_repo.git</span></code>），而不是 ssh 地址。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=904">[904]</a></p>
</div>
<div class="section" id="upstream-vcs-type">
<span id="id5"></span><h3>上游版本控制系统类型 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=905">[905]</a><a class="headerlink" href="#upstream-vcs-type" title="永久链接至标题"></a></h3>
<p>这是`上游仓库URI`_的版本控制系统（VCS）类型。您必须指定仓库使用的VCS类型，可以选择``svn``、<code class="docutils literal notranslate"><span class="pre">git</span></code>、<code class="docutils literal notranslate"><span class="pre">hg``或``tar</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=906">[906]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Upstream VCS Type:
   svn
      Upstream URI is a svn repository
   git
      Upstream URI is a git repository
   hg
      Upstream URI is a hg repository
   tar
      Upstream URI is a tarball
   <span class="o">[</span><span class="s1">&#39;git&#39;</span><span class="o">]</span>:
</pre></div>
</div>
<p>大多数仓库将使用git，但某些旧版本仓库可能使用hg或svn。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=907">[907]</a></p>
</div>
<div class="section" id="version">
<span id="id6"></span><h3>版本 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=908">[908]</a><a class="headerlink" href="#version" title="永久链接至标题"></a></h3>
<p>这是您发布的软件包的版本。(例如，<code class="docutils literal notranslate"><span class="pre">1.0.3</span></code>) <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=909">[909]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Version:
   :<span class="o">{</span>ask<span class="o">}</span>
      This means that the user will be prompted <span class="k">for</span> the version each release.
      This also means that the upstream devel will be ignored.
   :<span class="o">{</span>auto<span class="o">}</span>
      This means the version will be guessed from the devel branch.
      This means that the devel branch must be set, the devel branch must exist,
      and there must be a valid package.xml <span class="k">in</span> the upstream devel branch.
   &lt;version&gt;
      This will be the version used.
      It must be updated <span class="k">for</span> each new upstream version.
   <span class="o">[</span><span class="s1">&#39;:{auto}&#39;</span><span class="o">]</span>:
</pre></div>
</div>
<p>将其设置为``:{auto}``（默认设置，推荐使用）将自动从devel分支的package.xml文件中确定版本。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=910">[910]</a></p>
<p>将其设置为``:{ask}``将在每次使用bloom进行发布时弹出提示，要求您输入版本号。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=911">[911]</a></p>
</div>
<div class="section" id="release-tag">
<span id="id7"></span><h3>发布标签 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=912">[912]</a><a class="headerlink" href="#release-tag" title="永久链接至标题"></a></h3>
<p>发布标签（Release Tag）是指您要从中导入代码的标签或分支。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=913">[913]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Release Tag:
   :<span class="o">{</span>version<span class="o">}</span>
      This means that the release tag will match the :<span class="o">{</span>version<span class="o">}</span> tag.
      This can be further templated, <span class="k">for</span> example: <span class="s2">&quot;foo-:{version}&quot;</span> or <span class="s2">&quot;v:{version}&quot;</span>

      This can describe any vcs reference. For git that means <span class="o">{</span>tag, branch, hash<span class="o">}</span>,
      <span class="k">for</span> hg that means <span class="o">{</span>tag, branch, hash<span class="o">}</span>, <span class="k">for</span> svn that means a revision number.
      For tar this value doubles as the sub directory <span class="o">(</span><span class="k">if</span> the repository is
      <span class="k">in</span> foo/ of the tar ball, putting foo here will cause the contents of
      foo/ to be imported to upstream instead of foo itself<span class="o">)</span>.
   :<span class="o">{</span>ask<span class="o">}</span>
      This means the user will be prompted <span class="k">for</span> the release tag on each release.
   :<span class="o">{</span>none<span class="o">}</span>
      For svn and tar only you can <span class="nb">set</span> the release tag to :<span class="o">{</span>none<span class="o">}</span>, so that
      it is ignored.  For svn this means no revision number is used.
   <span class="o">[</span><span class="s1">&#39;:{version}&#39;</span><span class="o">]</span>:
</pre></div>
</div>
<p>将其设置为 <a href="#id1"><span class="problematic" id="id2">``</span></a>:{version}``（默认设置，也是推荐设置）将使发布标签与版本标签匹配。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=914">[914]</a></p>
<p>一种较少见的设置是将其设置为分支名称，以便始终在发布时从上游项目中拉取该分支。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=915">[915]</a></p>
<p>或者，如果您希望每次发布时都提示输入不同的标签，请输入 <code class="docutils literal notranslate"><span class="pre">:{ask}</span></code>。<code class="docutils literal notranslate"><span class="pre">:{ask}</span></code> 在上游项目频繁进行标记发布并且您希望每次发布时引用新的标签时很有用。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=916">[916]</a></p>
</div>
<div class="section" id="upstream-devel-branch">
<span id="id8"></span><h3>上游开发分支 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=917">[917]</a><a class="headerlink" href="#upstream-devel-branch" title="永久链接至标题"></a></h3>
<p>上游开发分支是你的:ref:<code class="xref any docutils literal notranslate"><span class="pre">上游存储库</span> <span class="pre">&lt;upstream-repository-uri&gt;`中分支的名称。如果你为每个ROS发行版使用单独的分支，那么每个发布跟踪的这个字段都会不同。它用于确定在设置:ref:`版本`为`</span></code>:{auto}``时你正在发布的软件包的版本。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=918">[918]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Upstream Devel Branch:
   &lt;vcs reference&gt;
      Branch <span class="k">in</span> upstream repository on which to search <span class="k">for</span> the version.
      This is used only when version is <span class="nb">set</span> to <span class="s1">&#39;:{auto}&#39;</span>.
   <span class="o">[</span>None<span class="o">]</span>:
</pre></div>
</div>
<p>要从名为``humble``的分支发布，请输入``humble``。将其保留为``None``将导致版本从存储库的默认分支确定（不建议这样做）。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=919">[919]</a></p>
</div>
<div class="section" id="ros-distro">
<span id="id9"></span><h3>ROS发行版 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=920">[920]</a><a class="headerlink" href="#ros-distro" title="永久链接至标题"></a></h3>
<p>这是你计划发布软件包的发行版。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=921">[921]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ROS Distro:
   &lt;ROS distro&gt;
      This can be any valid ROS distro, e.g. indigo, kinetic, lunar, melodic
   <span class="o">[</span><span class="s1">&#39;indigo&#39;</span><span class="o">]</span>:
</pre></div>
</div>
<p>如果你计划发布到ROS humble，请输入``humble``。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=922">[922]</a></p>
</div>
<div class="section" id="patches-directory">
<span id="id10"></span><h3>补丁目录 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=923">[923]</a><a class="headerlink" href="#patches-directory" title="永久链接至标题"></a></h3>
<p>这是用于发布版本的任何额外补丁的目录。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=924">[924]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Patches Directory:
   &lt;path <span class="k">in</span> bloom branch&gt;
      This can be any valid relative path <span class="k">in</span> the bloom branch. The contents
      of this folder will be overlaid onto the upstream branch after each
      import-upstream.  Additionally, any package.xml files found <span class="k">in</span> the
      overlay will have the :<span class="o">{</span>version<span class="o">}</span> string replaced with the current
      version being released.
   :<span class="o">{</span>none<span class="o">}</span>
      Use this <span class="k">if</span> you want to disable overlaying of files.
   <span class="o">[</span>None<span class="o">]</span>:
</pre></div>
</div>
<p>将额外的补丁添加到发布版本是一个很少使用的功能。对于几乎所有软件包，应该将其保留为默认值 <code class="docutils literal notranslate"><span class="pre">None</span></code>。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=925">[925]</a></p>
</div>
<div class="section" id="release-repository-push-url">
<span id="id11"></span><h3>发布存储库推送 URL <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=926">[926]</a><a class="headerlink" href="#release-repository-push-url" title="永久链接至标题"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Release Repository Push URL:
   :<span class="o">{</span>none<span class="o">}</span>
      This indicates that the default release url should be used.
   &lt;url&gt;
      <span class="o">(</span>optional<span class="o">)</span> Used when pushing to remote release repositories. This is only
      needed when the release uri which is <span class="k">in</span> the rosdistro file is not writable.
      This is useful, <span class="k">for</span> example, when a releaser would like to use a ssh url
      to push rather than a https:// url.
   <span class="o">[</span>None<span class="o">]</span>:
</pre></div>
</div>
<p>在大多数情况下，可以将其保留为默认值。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=927">[927]</a></p>
</div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>