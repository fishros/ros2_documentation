<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How-To-Guides/Using-ros1_bridge-Jammy-upstream</title>
</head>
<body>
  <div class="section" id="using-ros1-bridge-with-upstream-ros-on-ubuntu-22-04">
<h1>在Ubuntu 22.04上使用``ros1_bridge``和上游ROS <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1122">[1122]</a><a class="headerlink" href="#using-ros1-bridge-with-upstream-ros-on-ubuntu-22-04" title="永久链接至标题"></a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">目录 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=7">[]</a></p>
<ul class="simple">
<li><p><a class="reference internal" href="#ros-2-via-debian-packages" id="id1">通过Debian软件包使用ROS 2 [1125]</a></p></li>
<li><p><a class="reference internal" href="#ros-2-from-source" id="id2">ROS 2 源代码构建 [1130]</a></p></li>
</ul>
</div>
<p>在Ubuntu 22.04 Jammy Jellyfish上发布的ROS 2 Humble（和Rolling）标志着首个在没有官方ROS 1版本的平台上发布的ROS 2版本。虽然ROS 1 Noetic将在其`长期支持窗口 &lt;<a class="reference external" href="https://www.ros.org/reps/rep-0003.html#noetic-ninjemys-may-2020-may-2025">https://www.ros.org/reps/rep-0003.html#noetic-ninjemys-may-2020-may-2025</a>&gt;`__ 内继续得到支持，但它只针对Ubuntu 20.04。或者，Debian和Ubuntu中存在一些`ROS 1软件包的上游变体 &lt;<a class="reference external" href="https://packages.ubuntu.com/jammy/ros-desktop">https://packages.ubuntu.com/jammy/ros-desktop</a>&gt;`__，它们不作为ROS维护者的官方发行版进行维护。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1123">[1123]</a></p>
<p>本指南概述了在Ubuntu 22.04 Jammy Jellyfish上使用这些上游软件包进行ROS 2版本桥接的当前机制。这为仍然依赖ROS 1但希望迁移到更新的ROS 2和Ubuntu版本的用户提供了一条迁移路径。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1124">[1124]</a></p>
<div class="section" id="ros-2-via-debian-packages">
<h2>通过Debian软件包使用ROS 2 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1125">[1125]</a><a class="headerlink" href="#ros-2-via-debian-packages" title="永久链接至标题"></a></h2>
<p>目前无法在Ubuntu Jammy上通过Debian软件包安装ROS 2。Ubuntu软件仓库中可用的``catkin-pkg-modules``版本与ROS 2软件包仓库中的版本存在冲突。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1126">[1126]</a></p>
<p>如果ROS 2的apt仓库在可用的apt仓库（<code class="docutils literal notranslate"><span class="pre">/etc/apt/sources.list.d</span></code>）中，将无法安装任何ROS 1软件包。错误信息如下： <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1127">[1127]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ apt install ros-core-dev
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or <span class="k">if</span> you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may <span class="nb">help</span> to resolve the situation:

The following packages have unmet dependencies:
 ros-core-dev : Depends: catkin but it is not installable
E: Unable to correct problems, you have held broken packages.
</pre></div>
</div>
<p>要修正此问题，请从您的``sources.list``文件中移除packages.ros.org。如果您遵循了ROS 2安装指南，只需移除``/etc/apt/sources.list.d/ros2.list``文件即可。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1128">[1128]</a></p>
<p>目前，为了支持 <code class="docutils literal notranslate"><span class="pre">ros1_bridge</span></code>，请按照下面的说明从源代码构建ROS 2。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1129">[1129]</a></p>
</div>
<div class="section" id="ros-2-from-source">
<h2>ROS 2 源代码构建 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1130">[1130]</a><a class="headerlink" href="#ros-2-from-source" title="永久链接至标题"></a></h2>
<p>只有通过 <a class="reference internal" href="../Installation/Alternatives/Ubuntu-Development-Setup.html"><span class="doc">ROS 2 源代码构建</span></a> 的方式才能在 Ubuntu Jammy 上使用 ROS 2。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1131">[1131]</a></p>
<p>下面是源代码构建说明中必要的指令摘要。与原指南有较大差异的是，我们跳过使用 ROS 2 的apt存储库，因为存在冲突的软件包。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1132">[1132]</a></p>
<div class="section" id="install-development-tools-and-ros-tools">
<h3>安装开发工具和ROS工具 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1133">[1133]</a><a class="headerlink" href="#install-development-tools-and-ros-tools" title="永久链接至标题"></a></h3>
<p>由于我们不使用ROS 2的apt存储库，必须通过pip安装``colcon``。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1134">[1134]</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update <span class="o">&amp;&amp;</span> sudo apt install -y <span class="se">\</span>
  build-essential <span class="se">\</span>
  cmake <span class="se">\</span>
  git <span class="se">\</span>
  python3-flake8 <span class="se">\</span>
  python3-flake8-blind-except <span class="se">\</span>
  python3-flake8-builtins <span class="se">\</span>
  python3-flake8-class-newline <span class="se">\</span>
  python3-flake8-comprehensions <span class="se">\</span>
  python3-flake8-deprecated <span class="se">\</span>
  python3-flake8-docstrings <span class="se">\</span>
  python3-flake8-import-order <span class="se">\</span>
  python3-flake8-quotes <span class="se">\</span>
  python3-pip <span class="se">\</span>
  python3-pytest <span class="se">\</span>
  python3-pytest-cov <span class="se">\</span>
  python3-pytest-repeat <span class="se">\</span>
  python3-pytest-rerunfailures <span class="se">\</span>
  python3-rosdep <span class="se">\</span>
  python3-setuptools <span class="se">\</span>
  wget

<span class="c1"># Install colcon from PyPI, rather than apt packages</span>
python3 -m pip install -U colcon-common-extensions vcstool
</pre></div>
</div>
<p>从这里开始，继续阅读 <a class="reference internal" href="../Installation/Alternatives/Ubuntu-Development-Setup.html"><span class="doc">源码安装指南</span></a> 来构建ROS 2。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1135">[1135]</a></p>
</div>
<div class="section" id="install-ros-1-from-ubuntu-packages">
<h3>从Ubuntu软件包中安装ROS 1。 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1136">[1136]</a><a class="headerlink" href="#install-ros-1-from-ubuntu-packages" title="永久链接至标题"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update <span class="o">&amp;&amp;</span> sudo apt install -y ros-core-dev
</pre></div>
</div>
</div>
<div class="section" id="build-ros1-bridge">
<h3>构建``ros1_bridge`` <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1137">[1137]</a><a class="headerlink" href="#build-ros1-bridge" title="永久链接至标题"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a workspace for the ros1_bridge</span>
mkdir -p ~/ros1_bridge/src
<span class="nb">cd</span> ~/ros1_bridge/src
git clone https://github.com/ros2/ros1_bridge
<span class="nb">cd</span> ~/ros1_bridge

<span class="c1"># Source the ROS 2 workspace</span>
. ~/ros2_humble/install/local_setup.bash

<span class="c1"># Build</span>
colcon build
</pre></div>
</div>
<p>在构建完所有``ros1_bridge``之后，<a class="reference external" href="https://github.com/ros2/ros1_bridge#example-1-run-the-bridge-and-the-example-talker-and-listener">ros1_bridge示例</a> 的其余部分应该可以在新安装的环境下正常工作 <a class="reference external" href="http://fishros.org/page/calib/#/home?apihost=http://fishros.org:2023/ros2/calib&amp;msgid=1138">[1138]</a></p>
</div>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>