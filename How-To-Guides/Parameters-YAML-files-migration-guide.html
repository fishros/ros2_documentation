<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>How-To-Guides/Parameters-YAML-files-migration-guide</title>
</head>
<body>
  <div class="section" id="migrating-yaml-parameter-files-from-ros-1-to-ros-2">
<span id="yaml-ros1-ros2"></span><h1>将YAML参数文件从ROS 1迁移到ROS 2<a class="headerlink" href="#migrating-yaml-parameter-files-from-ros-1-to-ros-2" title="永久链接至标题"></a></h1>
<p>本指南介绍如何调整ROS 1参数文件以适应ROS 2。</p>
<div class="section" id="yaml-file-example">
<h2>YAML文件示例<a class="headerlink" href="#yaml-file-example" title="永久链接至标题"></a></h2>
<p>在ROS 1和ROS 2中都使用YAML编写参数文件。在ROS 2中的主要区别是必须使用节点名称来引用参数。除了完全限定的节点名称外，我们还使用键“ros__parameters”来表示节点参数的起始。</p>
<p>例如，这是一个在ROS 1中的参数文件示例：</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">lidar_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"></span>
<span class="nt">lidar_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>
<span class="nt">ports</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">11312</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">11311</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">21311</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre></div>
</div>
<p>假设前两个参数是给名为 <code class="docutils literal notranslate"><span class="pre">/lidar_ns/lidar_node_name</span></code> 的节点使用的，下一个参数是给名为 <code class="docutils literal notranslate"><span class="pre">/imu</span></code> 的节点使用的，最后一个参数我们想要在这两个节点上设置。</p>
<p>我们将按照以下方式构建我们的ROS 2参数文件：</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">/lidar_ns</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">lidar_node_name</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ros__parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">lidar_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo</span><span class="w"></span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>
<span class="nt">imu</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2438</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2439</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2440</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="nt">/**</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</pre></div>
</div>
<p>注意使用通配符（<code class="docutils literal notranslate"><span class="pre">/**</span></code>）来表示参数 <code class="docutils literal notranslate"><span class="pre">debug</span></code> 应该在任何命名空间中的任何节点上设置。</p>
</div>
<div class="section" id="feature-parity">
<h2>功能对等<a class="headerlink" href="#feature-parity" title="永久链接至标题"></a></h2>
<p>ROS 1参数文件的一些功能在ROS 2中不存在:</p>
<ul class="simple">
<li><p>列表中的混合类型尚不支持 (<a class="reference external" href="https://github.com/ros2/rcl/issues/463">相关问题</a>)</p></li>
<li><p>不支持``deg``和``rad``的替换</p></li>
</ul>
</div>
</div>

  <div id="footer">
    <p>欢迎帮助改进！</p>
  </div>
</body>
</html>